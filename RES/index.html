<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá Th·ªëng Qu·∫£n L√Ω Kh√°ch S·∫°n & Nh√† H√†ng Cao C·∫•p</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üè®</text></svg>">
    <style>
        /* Reset v√† base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            position: relative;
        }

        h1 {
            text-align: center;
            font-size: 2.8em;
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .hotel-info {
            text-align: center;
            color: #666;
            font-size: 1.1em;
            margin-top: 10px;
        }

        /* View Toggle */
        .view-toggle {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 25px;
            flex-wrap: wrap;
        }

        .view-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .view-btn.active {
            background: linear-gradient(135deg, #3498db 0%, #2c3e50 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }

        .view-btn:not(.active) {
            background: #e9ecef;
            color: #666;
        }

        .view-btn:not(.active):hover {
            background: #dee2e6;
        }

        .view-btn.disabled {
            background: #f8f9fa;
            color: #adb5bd;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .view-btn.disabled:hover {
            background: #f8f9fa;
        }

        /* User Info */
        .user-info {
            position: absolute;
            top: 30px;
            right: 30px;
            background: white;
            padding: 10px 20px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .user-details {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-weight: bold;
            color: #2c3e50;
            font-size: 1.1em;
        }

        .user-role {
            font-size: 0.8em;
            color: #666;
            margin-top: 2px;
        }

        .user-department {
            background: #3498db;
            color: white;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .logout-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .logout-btn:hover {
            background: #c0392b;
        }

        /* Login Overlay */
        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            backdrop-filter: blur(5px);
        }

        .login-container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            width: 100%;
            max-width: 450px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            animation: slideInUp 0.5s ease-out;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .login-header h2 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.8em;
        }

        .login-header p {
            color: #7f8c8d;
            font-size: 1em;
        }

        .login-role-selector {
            display: flex;
            margin-bottom: 25px;
            border-radius: 10px;
            overflow: hidden;
            border: 2px solid #e9ecef;
        }

        .role-btn {
            flex: 1;
            padding: 15px;
            border: none;
            background: #f8f9fa;
            color: #666;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .role-btn.active {
            background: linear-gradient(135deg, #3498db 0%, #2c3e50 100%);
            color: white;
        }

        .login-form {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .login-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }

        .form-group input {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1em;
            transition: border 0.3s;
        }

        .form-group input:focus {
            border-color: #3498db;
            outline: none;
        }

        .login-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .login-btn:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3);
        }

        .login-error {
            background: #f8d7da;
            color: #721c24;
            padding: 12px;
            border-radius: 8px;
            margin-top: 15px;
            text-align: center;
            display: none;
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        /* View Content */
        .view-content {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .view-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Customer View */
        .customer-view {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        /* Staff View */
        .staff-view {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 1400px) {
            .staff-view {
                grid-template-columns: 1fr;
            }
        }

        /* Management View */
        .management-view {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        /* Reports View */
        .reports-view {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        /* Notifications */
        .notifications {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            max-width: 400px;
        }

        .notification {
            background: white;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            animation: slideIn 0.3s ease-out;
            border-left: 5px solid #3498db;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .notification.success {
            border-left-color: #27ae60;
        }

        .notification.warning {
            border-left-color: #f39c12;
        }

        .notification.error {
            border-left-color: #e74c3c;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            animation: modalFadeIn 0.3s ease-out;
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Gi·ªØ nguy√™n c√°c style kh√°c... */
        .customer-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        @media (max-width: 1200px) {
            .customer-info {
                grid-template-columns: 1fr;
            }
        }

        .room-select, .customer-details {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            border: 1px solid #e9ecef;
        }

        .room-select label, .customer-details label {
            display: block;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .room-select select, .customer-details input, .customer-details select {
            width: 100%;
            padding: 15px;
            font-size: 1.1em;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            margin-bottom: 15px;
            transition: border 0.3s;
        }

        .room-select select:focus, .customer-details input:focus, .customer-details select:focus {
            border-color: #3498db;
            outline: none;
        }

        .room-price-display {
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin-top: 15px;
            font-weight: bold;
            font-size: 1.2em;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .menu-section {
            margin-bottom: 30px;
        }

        .menu-section h2 {
            margin-bottom: 20px;
            color: #2c3e50;
            font-size: 1.8em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .menu-item {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid #e9ecef;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .menu-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            border-color: #3498db;
        }

        .menu-item.highlight {
            background: linear-gradient(135deg, #fff9db 0%, #ffec99 100%);
            border-color: #ffd43b;
        }

        .menu-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .menu-name {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 1.2em;
        }

        .menu-category {
            font-size: 0.8em;
            background: #e9ecef;
            padding: 3px 10px;
            border-radius: 10px;
            display: inline-block;
            margin-bottom: 10px;
        }

        .menu-price {
            color: #e74c3c;
            font-weight: bold;
            font-size: 1.3em;
        }

        .order-summary {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            border: 1px solid #e9ecef;
        }

        .order-summary h3 {
            margin-bottom: 20px;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .order-items {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            min-height: 150px;
            border: 1px solid #dee2e6;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #f1f1f1;
        }

        .order-item:last-child {
            border-bottom: none;
        }

        .item-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .item-qty {
            font-weight: bold;
            min-width: 30px;
            text-align: center;
        }

        .qty-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: none;
            background: #3498db;
            color: white;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .remove-btn {
            background: #e74c3c;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: none;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .order-total {
            display: flex;
            justify-content: space-between;
            font-size: 1.5em;
            font-weight: bold;
            padding-top: 15px;
            border-top: 2px solid #dee2e6;
            color: #2c3e50;
        }

        .order-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .order-btn:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3);
        }

        .order-btn:disabled {
            background: #95a5a6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Staff View Components */
        .orders-panel, .rooms-panel, .dashboard-panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .dashboard-panel {
            grid-column: 1 / -1;
        }

        .orders-panel h2, .rooms-panel h2, .dashboard-panel h2 {
            margin-bottom: 20px;
            color: #2c3e50;
            font-size: 1.8em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .filter-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 20px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .filter-btn.active {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }

        .order-card {
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s;
        }

        .order-card.high-priority {
            border-color: #e74c3c;
            background: #fff5f5;
        }

        .order-card.medium-priority {
            border-color: #f39c12;
            background: #fff9e6;
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f1f1f1;
        }

        .order-room {
            font-size: 1.3em;
            font-weight: bold;
            color: #3498db;
        }

        .order-time {
            font-size: 0.9em;
            color: #666;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .order-priority {
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .priority-high {
            background: #e74c3c;
            color: white;
        }

        .priority-medium {
            background: #f39c12;
            color: white;
        }

        .priority-low {
            background: #27ae60;
            color: white;
        }

        .order-items {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            white-space: pre-wrap;
            line-height: 1.6;
        }

        .order-actions {
            display: flex;
            gap: 10px;
        }

        .complete-btn, .cancel-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .complete-btn {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
        }

        .cancel-btn {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
        }

        .rooms-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .floor-select {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }

        .floor-btn {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            border: 2px solid #ddd;
            background: white;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .floor-btn.active {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }

        .rooms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .room-card {
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s;
            position: relative;
        }

        .room-card.vip {
            border-color: #f1c40f;
            background: linear-gradient(135deg, #fff9db 0%, #ffec99 100%);
        }

        .room-card.suite {
            border-color: #9b59b6;
            background: linear-gradient(135deg, #f5eef8 0%, #e8daef 100%);
        }

        .room-card.occupied {
            border-color: #27ae60;
        }

        .room-card.need-cleaning {
            border-color: #e74c3c;
        }

        .room-header-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .room-number {
            font-size: 1.3em;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .room-type {
            font-size: 0.8em;
            padding: 3px 10px;
            border-radius: 10px;
            font-weight: bold;
        }

        .type-standard {
            background: #3498db;
            color: white;
        }

        .type-vip {
            background: #f1c40f;
            color: white;
        }

        .type-suite {
            background: #9b59b6;
            color: white;
        }

        .room-status {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
        }

        .status-occupied {
            background: #27ae60;
            color: white;
        }

        .status-empty {
            background: #95a5a6;
            color: white;
        }

        .status-cleaning {
            background: #e74c3c;
            color: white;
        }

        .room-customer {
            font-weight: bold;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .room-details {
            color: #666;
            margin-bottom: 8px;
            font-size: 0.9em;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .room-price {
            font-weight: bold;
            color: #e74c3c;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .room-actions {
            display: flex;
            gap: 10px;
        }

        .room-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            font-size: 0.9em;
        }

        .checkin-btn {
            background: #3498db;
            color: white;
        }

        .checkout-btn {
            background: #e74c3c;
            color: white;
        }

        .cleaning-btn {
            background: #f39c12;
            color: white;
        }

        .service-btn {
            background: #9b59b6;
            color: white;
        }

        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            color: white;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.1);
            z-index: 1;
        }

        .stat-card.revenue {
            background: linear-gradient(135deg, #3498db 0%, #2c3e50 100%);
        }

        .stat-card.occupancy {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
        }

        .stat-card.rooms {
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
        }

        .stat-card.orders {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        }

        .stat-card > * {
            position: relative;
            z-index: 2;
        }

        .stat-label {
            font-size: 1em;
            margin-bottom: 10px;
            opacity: 0.9;
            font-weight: 600;
        }

        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-change {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .positive-change {
            color: #2ecc71;
        }

        .negative-change {
            color: #e74c3c;
        }

        .recent-activity {
            background: white;
            border-radius: 15px;
            padding: 20px;
            border: 1px solid #e9ecef;
        }

        .activity-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .activity-item {
            padding: 15px 0;
            border-bottom: 1px solid #f1f1f1;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            color: white;
        }

        .icon-checkin {
            background: #3498db;
        }

        .icon-checkout {
            background: #e74c3c;
        }

        .icon-order {
            background: #27ae60;
        }

        .icon-cleaning {
            background: #f39c12;
        }

        .activity-details {
            flex: 1;
        }

        .activity-time {
            font-size: 0.8em;
            color: #95a5a6;
        }

        .service-request {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px dashed #ddd;
        }

        .service-tag {
            display: inline-block;
            background: #e8f4fc;
            color: #3498db;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 0.8em;
            margin-right: 5px;
            margin-bottom: 5px;
        }

        .room-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 5px 10px;
            border-radius: 10px;
            font-size: 0.7em;
            font-weight: bold;
            color: white;
        }

        .badge-new {
            background: #e74c3c;
        }

        .badge-promo {
            background: #9b59b6;
        }

        .badge-sea-view {
            background: #3498db;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #95a5a6;
        }

        .empty-state i {
            font-size: 3em;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        .highlight-room {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(52, 152, 219, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(52, 152, 219, 0); }
            100% { box-shadow: 0 0 0 0 rgba(52, 152, 219, 0); }
        }

        /* Management View Specific */
        .management-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .management-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            border: 2px solid transparent;
            transition: all 0.3s;
            cursor: pointer;
        }

        .management-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
            border-color: #3498db;
        }

        .management-card h3 {
            margin-bottom: 15px;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .management-card p {
            color: #666;
            margin-bottom: 20px;
        }

        .management-features {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .management-features li {
            padding: 8px 0;
            border-bottom: 1px solid #f1f1f1;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .management-features li:last-child {
            border-bottom: none;
        }

        .management-features li i {
            color: #27ae60;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header {
                padding: 20px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .user-info {
                position: relative;
                top: 0;
                right: 0;
                margin-top: 15px;
                width: 100%;
            }
            
            .view-toggle {
                flex-direction: column;
            }
            
            .view-btn {
                width: 100%;
                justify-content: center;
            }
            
            .customer-view, .staff-view, .management-view, .reports-view {
                padding: 20px;
            }
            
            .menu-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .rooms-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
            
            .dashboard-stats {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
            
            .stat-value {
                font-size: 2em;
            }
            
            .management-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Login Overlay -->
    <div class="login-overlay" id="loginOverlay">
        <div class="login-container">
            <div class="login-header">
                <h2><i class="fas fa-hotel"></i> ƒêƒÉng Nh·∫≠p H·ªá Th·ªëng</h2>
                <p>Vui l√≤ng ch·ªçn vai tr√≤ v√† ƒëƒÉng nh·∫≠p</p>
            </div>
            
            <div class="login-role-selector">
                <button class="role-btn active" onclick="selectRole('staff')">
                    <i class="fas fa-user-tie"></i> Nh√¢n Vi√™n
                </button>
                <button class="role-btn" onclick="selectRole('management')">
                    <i class="fas fa-chart-line"></i> Qu·∫£n L√Ω
                </button>
            </div>
            
            <!-- Staff Login Form -->
            <div class="login-form active" id="staffLoginForm">
                <div class="form-group">
                    <label for="staffUsername"><i class="fas fa-user"></i> T√™n ƒëƒÉng nh·∫≠p</label>
                    <input type="text" id="staffUsername" placeholder="Nh·∫≠p username">
                </div>
                <div class="form-group">
                    <label for="staffPassword"><i class="fas fa-lock"></i> M·∫≠t kh·∫©u</label>
                    <input type="password" id="staffPassword" placeholder="Nh·∫≠p m·∫≠t kh·∫©u">
                </div>
                <button class="login-btn" onclick="login('staff')">
                    <i class="fas fa-sign-in-alt"></i> ƒêƒÉng Nh·∫≠p Nh√¢n Vi√™n
                </button>
            </div>
            
            <!-- Management Login Form -->
            <div class="login-form" id="managementLoginForm">
                <div class="form-group">
                    <label for="managementUsername"><i class="fas fa-user"></i> T√™n ƒëƒÉng nh·∫≠p</label>
                    <input type="text" id="managementUsername" placeholder="Nh·∫≠p username">
                </div>
                <div class="form-group">
                    <label for="managementPassword"><i class="fas fa-lock"></i> M·∫≠t kh·∫©u</label>
                    <input type="password" id="managementPassword" placeholder="Nh·∫≠p m·∫≠t kh·∫©u">
                </div>
                <button class="login-btn" onclick="login('management')">
                    <i class="fas fa-sign-in-alt"></i> ƒêƒÉng Nh·∫≠p Qu·∫£n L√Ω
                </button>
            </div>
            
            <div class="login-error" id="loginError">
                <i class="fas fa-exclamation-triangle"></i> <span id="errorMessage">Sai t√™n ƒëƒÉng nh·∫≠p ho·∫∑c m·∫≠t kh·∫©u</span>
            </div>
            
            <div style="text-align: center; margin-top: 20px; color: #666; font-size: 0.9em;">
                <p>Kh√°ch h√†ng kh√¥ng c·∫ßn ƒëƒÉng nh·∫≠p. Ch·ªçn "Kh√°ch H√†ng" ƒë·ªÉ s·ª≠ d·ª•ng d·ªãch v·ª•.</p>
                <p style="margin-top: 10px;">
                    <strong>Demo Accounts:</strong><br>
                    Nh√¢n vi√™n: nhanvien1 / nv123456<br>
                    Qu·∫£n l√Ω: admin / admin123
                </p>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1><i class="fas fa-hotel"></i> Kh√°ch S·∫°n & Nh√† H√†ng Cao C·∫•p Horizon</h1>
            <div class="hotel-info">7 t·∫ßng ‚Ä¢ 70 ph√≤ng ‚Ä¢ D·ªãch v·ª• 5 sao</div>
            
            <!-- User Info (hi·ªÉn th·ªã khi ƒë√£ ƒëƒÉng nh·∫≠p) -->
            <div class="user-info" id="userInfo" style="display: none;">
                <div class="user-details">
                    <div class="user-name" id="userName"></div>
                    <div class="user-role" id="userRole"></div>
                </div>
                <div class="user-department" id="userDepartment"></div>
                <button class="logout-btn" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> ƒêƒÉng xu·∫•t
                </button>
            </div>
            
            <!-- View Toggle - Ph√¢n quy·ªÅn hi·ªÉn th·ªã n√∫t -->
            <div class="view-toggle" id="viewToggle">
                <button class="view-btn active" onclick="switchView('customer')" id="customerViewBtn">
                    <i class="fas fa-user"></i> Kh√°ch H√†ng
                </button>
                <button class="view-btn" onclick="switchView('staff')" id="staffViewBtn">
                    <i class="fas fa-user-tie"></i> Nh√¢n Vi√™n
                </button>
                <button class="view-btn" onclick="switchView('management')" id="managementViewBtn">
                    <i class="fas fa-chart-line"></i> Qu·∫£n L√Ω
                </button>
                <button class="view-btn" onclick="switchView('reports')" id="reportsViewBtn">
                    <i class="fas fa-file-alt"></i> B√°o C√°o
                </button>
            </div>
        </div>

        <!-- Notifications -->
        <div class="notifications" id="notifications"></div>

        <!-- ================== KH√ÅCH H√ÄNG VIEW ================== -->
        <div class="view-content active" id="customerView">
            <div class="customer-view">
                <div class="customer-info">
                    <div class="room-select">
                        <label><i class="fas fa-door-open"></i> Ch·ªçn Ph√≤ng & Lo·∫°i Ph√≤ng</label>
                        <select id="customerRoom" onchange="updateRoomDetails()">
                            <option value="">-- Ch·ªçn ph√≤ng --</option>
                        </select>
                        
                        <select id="roomTypeFilter" onchange="filterRoomsByType()">
                            <option value="all">T·∫•t c·∫£ lo·∫°i ph√≤ng</option>
                            <option value="standard">Ph√≤ng Ti√™u Chu·∫©n</option>
                            <option value="vip">Ph√≤ng VIP</option>
                            <option value="suite">Suite</option>
                        </select>
                        
                        <div id="roomDetails" class="room-price-display" style="display:none;">
                            <div id="roomTypeDisplay"></div>
                            <div id="roomPriceDisplay"></div>
                            <div id="roomFeatures"></div>
                        </div>
                    </div>

                    <div class="customer-details">
                        <label><i class="fas fa-user-circle"></i> Th√¥ng Tin Kh√°ch H√†ng</label>
                        <input type="text" id="customerName" placeholder="H·ªç v√† t√™n">
                        <input type="text" id="customerPhone" placeholder="S·ªë ƒëi·ªán tho·∫°i">
                        <input type="email" id="customerEmail" placeholder="Email">
                        <select id="customerGender">
                            <option value="">Gi·ªõi t√≠nh</option>
                            <option value="male">Nam</option>
                            <option value="female">N·ªØ</option>
                            <option value="other">Kh√°c</option>
                        </select>
                    </div>
                </div>

                <div class="menu-section">
                    <h2><i class="fas fa-utensils"></i> Th·ª±c ƒê∆°n Nh√† H√†ng - Nh·∫•n ƒë·ªÉ th√™m v√†o ƒë∆°n</h2>
                    
                    <div class="filter-controls">
                        <button class="filter-btn active" onclick="filterMenu('all')">T·∫•t c·∫£</button>
                        <button class="filter-btn" onclick="filterMenu('appetizer')">Khai v·ªã</button>
                        <button class="filter-btn" onclick="filterMenu('main')">M√≥n ch√≠nh</button>
                        <button class="filter-btn" onclick="filterMenu('drink')">ƒê·ªì u·ªëng</button>
                        <button class="filter-btn" onclick="filterMenu('dessert')">Tr√°ng mi·ªáng</button>
                    </div>
                    
                    <div class="menu-grid" id="menuGrid"></div>
                </div>

                <div class="order-summary">
                    <h3><i class="fas fa-shopping-cart"></i> ƒê∆°n H√†ng C·ªßa B·∫°n</h3>
                    <div class="order-items" id="orderItems">
                        <div class="empty-state">
                            <i class="fas fa-shopping-basket"></i>
                            <p>Ch∆∞a c√≥ m√≥n n√†o trong ƒë∆°n h√†ng</p>
                            <p>H√£y ch·ªçn m√≥n t·ª´ th·ª±c ƒë∆°n b√™n tr√™n</p>
                        </div>
                    </div>
                    
                    <div class="order-total">
                        <span>T·ªïng c·ªông:</span>
                        <span id="orderTotal">0ƒë</span>
                    </div>
                    
                    <button class="order-btn" id="submitOrderBtn" onclick="submitOrder()" disabled>
                        <i class="fas fa-paper-plane"></i> G·ª≠i ƒê∆°n H√†ng
                    </button>
                </div>
            </div>
        </div>

        <!-- ================== NH√ÇN VI√äN VIEW ================== -->
        <div class="view-content" id="staffView">
            <div class="staff-view">
                <!-- Orders Panel -->
                <div class="orders-panel">
                    <h2><i class="fas fa-concierge-bell"></i> ƒê∆°n ƒê·∫∑t D·ªãch V·ª•</h2>
                    
                    <div class="filter-controls">
                        <button class="filter-btn active" onclick="filterOrders('all')">T·∫•t c·∫£</button>
                        <button class="filter-btn" onclick="filterOrders('pending')">Ch·ªù x·ª≠ l√Ω</button>
                        <button class="filter-btn" onclick="filterOrders('preparing')">ƒêang chu·∫©n b·ªã</button>
                        <button class="filter-btn" onclick="filterOrders('completed')">Ho√†n th√†nh</button>
                        <button class="filter-btn" onclick="filterOrders('cancelled')">ƒê√£ h·ªßy</button>
                    </div>
                    
                    <div id="ordersList"></div>
                </div>

                <!-- Rooms Panel -->
                <div class="rooms-panel">
                    <div class="rooms-navigation">
                        <h2><i class="fas fa-bed"></i> Qu·∫£n L√Ω Ph√≤ng</h2>
                        <div class="floor-select">
                            <button class="floor-btn active" onclick="changeFloor('all')">T·∫•t c·∫£</button>
                            <!-- Floor buttons will be generated by JavaScript -->
                        </div>
                    </div>
                    
                    <div class="rooms-grid" id="roomsList"></div>
                </div>
                
                <!-- Dashboard Panel -->
                <div class="dashboard-panel">
                    <h2><i class="fas fa-tachometer-alt"></i> Th·ªëng K√™ Nhanh</h2>
                    
                    <div class="dashboard-stats">
                        <div class="stat-card revenue">
                            <div class="stat-label">Doanh Thu H√¥m Nay</div>
                            <div class="stat-value" id="todayRevenue">0ƒë</div>
                            <div class="stat-change positive-change">+12% so v·ªõi h√¥m qua</div>
                        </div>
                        <div class="stat-card occupancy">
                            <div class="stat-label">T·ª∑ L·ªá Thu√™ Ph√≤ng</div>
                            <div class="stat-value" id="occupancyRate">0%</div>
                            <div class="stat-change positive-change">+5% so v·ªõi tu·∫ßn tr∆∞·ªõc</div>
                        </div>
                        <div class="stat-card rooms">
                            <div class="stat-label">Ph√≤ng Tr·ªëng</div>
                            <div class="stat-value" id="availableRooms">70</div>
                            <div class="stat-change negative-change">-8 so v·ªõi h√¥m qua</div>
                        </div>
                        <div class="stat-card orders">
                            <div class="stat-label">ƒê∆°n H√†ng H√¥m Nay</div>
                            <div class="stat-value" id="todayOrders">0</div>
                            <div class="stat-change positive-change">+3 so v·ªõi h√¥m qua</div>
                        </div>
                    </div>
                    
                    <h3 style="margin-top: 30px; margin-bottom: 15px;"><i class="fas fa-history"></i> Ho·∫°t ƒê·ªông G·∫ßn ƒê√¢y</h3>
                    <div class="recent-activity">
                        <div class="activity-list" id="activityList"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ================== QU·∫¢N L√ù VIEW ================== -->
        <div class="view-content" id="managementView">
            <div class="management-view">
                <h2 style="margin-bottom: 30px;"><i class="fas fa-chart-line"></i> Qu·∫£n L√Ω To√†n Di·ªán</h2>
                
                <div class="management-grid">
                    <div class="management-card" onclick="showManagementFeature('financial')">
                        <h3><i class="fas fa-file-invoice-dollar"></i> Qu·∫£n L√Ω T√†i Ch√≠nh</h3>
                        <p>Qu·∫£n l√Ω doanh thu, chi ph√≠, l·ª£i nhu·∫≠n v√† c√°c kho·∫£n thu chi</p>
                        <ul class="management-features">
                            <li><i class="fas fa-check-circle"></i> B√°o c√°o doanh thu theo th·ªùi gian</li>
                            <li><i class="fas fa-check-circle"></i> Ph√¢n t√≠ch chi ph√≠ v·∫≠n h√†nh</li>
                            <li><i class="fas fa-check-circle"></i> D·ª± b√°o t√†i ch√≠nh</li>
                            <li><i class="fas fa-check-circle"></i> Qu·∫£n l√Ω h√≥a ƒë∆°n</li>
                        </ul>
                    </div>
                    
                    <div class="management-card" onclick="showManagementFeature('staff')">
                        <h3><i class="fas fa-user-tie"></i> Qu·∫£n L√Ω Nh√¢n S·ª±</h3>
                        <p>Qu·∫£n l√Ω th√¥ng tin nh√¢n vi√™n, l·ªãch l√†m vi·ªác, ƒë√°nh gi√° hi·ªáu su·∫•t</p>
                        <ul class="management-features">
                            <li><i class="fas fa-check-circle"></i> Qu·∫£n l√Ω h·ªì s∆° nh√¢n vi√™n</li>
                            <li><i class="fas fa-check-circle"></i> Ch·∫•m c√¥ng v√† t√≠nh l∆∞∆°ng</li>
                            <li><i class="fas fa-check-circle"></i> ƒê√°nh gi√° hi·ªáu su·∫•t</li>
                            <li><i class="fas fa-check-circle"></i> L·ªãch l√†m vi·ªác v√† ph√¢n ca</li>
                        </ul>
                    </div>
                    
                    <div class="management-card" onclick="showManagementFeature('inventory')">
                        <h3><i class="fas fa-boxes"></i> Qu·∫£n L√Ω Kho & V·∫≠t T∆∞</h3>
                        <p>Qu·∫£n l√Ω t·ªìn kho, ƒë·∫∑t h√†ng, v√† s·ª≠ d·ª•ng v·∫≠t t∆∞</p>
                        <ul class="management-features">
                            <li><i class="fas fa-check-circle"></i> Theo d√µi t·ªìn kho th·ªùi gian th·ª±c</li>
                            <li><i class="fas fa-check-circle"></i> Qu·∫£n l√Ω ƒë∆°n ƒë·∫∑t h√†ng</li>
                            <li><i class="fas fa-check-circle"></i> C·∫£nh b√°o h·∫øt h√†ng</li>
                            <li><i class="fas fa-check-circle"></i> Ph√¢n t√≠ch ti√™u th·ª•</li>
                        </ul>
                    </div>
                    
                    <div class="management-card" onclick="showManagementFeature('marketing')">
                        <h3><i class="fas fa-bullhorn"></i> Marketing & Khuy·∫øn M√£i</h3>
                        <p>Qu·∫£n l√Ω chi·∫øn d·ªãch marketing v√† ch∆∞∆°ng tr√¨nh khuy·∫øn m√£i</p>
                        <ul class="management-features">
                            <li><i class="fas fa-check-circle"></i> T·∫°o ch∆∞∆°ng tr√¨nh khuy·∫øn m√£i</li>
                            <li><i class="fas fa-check-circle"></i> Qu·∫£n l√Ω kh√°ch h√†ng th√¢n thi·∫øt</li>
                            <li><i class="fas fa-check-circle"></i> Ph√¢n t√≠ch hi·ªáu qu·∫£ marketing</li>
                            <li><i class="fas fa-check-circle"></i> Email marketing</li>
                        </ul>
                    </div>
                    
                    <div class="management-card" onclick="showManagementFeature('settings')">
                        <h3><i class="fas fa-cog"></i> C√†i ƒê·∫∑t H·ªá Th·ªëng</h3>
                        <p>C√†i ƒë·∫∑t v√† t√πy ch·ªânh h·ªá th·ªëng qu·∫£n l√Ω</p>
                        <ul class="management-features">
                            <li><i class="fas fa-check-circle"></i> Qu·∫£n l√Ω t√†i kho·∫£n ng∆∞·ªùi d√πng</li>
                            <li><i class="fas fa-check-circle"></i> C·∫•u h√¨nh ph√¢n quy·ªÅn</li>
                            <li><i class="fas fa-check-circle"></i> Sao l∆∞u v√† kh√¥i ph·ª•c d·ªØ li·ªáu</li>
                            <li><i class="fas fa-check-circle"></i> C√†i ƒë·∫∑t th√¥ng b√°o</li>
                        </ul>
                    </div>
                    
                    <div class="management-card" onclick="showManagementFeature('analytics')">
                        <h3><i class="fas fa-chart-bar"></i> Ph√¢n T√≠ch & B√°o C√°o</h3>
                        <p>Ph√¢n t√≠ch d·ªØ li·ªáu v√† t·∫°o b√°o c√°o chi ti·∫øt</p>
                        <ul class="management-features">
                            <li><i class="fas fa-check-circle"></i> Dashboard ph√¢n t√≠ch t·ªïng quan</li>
                            <li><i class="fas fa-check-circle"></i> B√°o c√°o t√πy ch·ªânh</li>
                            <li><i class="fas fa-check-circle"></i> Xu·∫•t d·ªØ li·ªáu ra Excel/PDF</li>
                            <li><i class="fas fa-check-circle"></i> Ph√¢n t√≠ch xu h∆∞·ªõng</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ================== B√ÅO C√ÅO VIEW ================== -->
        <div class="view-content" id="reportsView">
            <div class="reports-view">
                <h2 style="margin-bottom: 30px;"><i class="fas fa-file-alt"></i> H·ªá Th·ªëng B√°o C√°o</h2>
                
                <div style="text-align: center; padding: 60px 20px; color: #7f8c8d;">
                    <i class="fas fa-chart-bar" style="font-size: 4em; margin-bottom: 20px;"></i>
                    <h3>H·ªá th·ªëng b√°o c√°o chi ti·∫øt</h3>
                    <p>Bao g·ªìm: B√°o c√°o doanh thu, t·ª∑ l·ªá l·∫•p ƒë·∫ßy ph√≤ng, ph√¢n t√≠ch kh√°ch h√†ng, v.v.</p>
                    <p style="margin-top: 20px; color: #3498db;">
                        <i class="fas fa-info-circle"></i> Ch·ª©c nƒÉng b√°o c√°o ƒë·∫ßy ƒë·ªß ch·ªâ d√†nh cho t√†i kho·∫£n Qu·∫£n L√Ω
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Gi·ªØ nguy√™n c√°c modal c≈© -->
    <div class="modal" id="checkinModal">
        <div class="modal-content">
            <h3><i class="fas fa-key"></i> Nh·∫≠n Ph√≤ng</h3>
            <div class="form-group">
                <label for="modalCustomerName">T√™n kh√°ch h√†ng</label>
                <input type="text" id="modalCustomerName" placeholder="H·ªç v√† t√™n">
            </div>
            <div class="form-group">
                <label for="modalCustomerPhone">S·ªë ƒëi·ªán tho·∫°i</label>
                <input type="text" id="modalCustomerPhone" placeholder="S·ªë ƒëi·ªán tho·∫°i">
            </div>
            <div class="form-group">
                <label for="modalNumDays">S·ªë ng√†y thu√™</label>
                <input type="number" id="modalNumDays" placeholder="S·ªë ng√†y thu√™" min="1" value="1">
            </div>
            <div class="form-group">
                <label for="modalSpecialRequests">Y√™u c·∫ßu ƒë·∫∑c bi·ªát</label>
                <textarea id="modalSpecialRequests" placeholder="V√≠ d·ª•: Th√™m gi∆∞·ªùng, th·ª©c ƒÉn ƒë·∫∑c bi·ªát, v.v." rows="3"></textarea>
            </div>
            <div class="modal-actions">
                <button class="modal-btn confirm" onclick="confirmCheckin()">
                    <i class="fas fa-check"></i> X√°c Nh·∫≠n
                </button>
                <button class="modal-btn cancel" onclick="closeModal()">
                    <i class="fas fa-times"></i> H·ªßy
                </button>
            </div>
        </div>
    </div>

    <div class="modal" id="serviceModal">
        <div class="modal-content">
            <h3><i class="fas fa-concierge-bell"></i> Y√™u C·∫ßu D·ªãch V·ª• Ph√≤ng</h3>
            <div class="form-group">
                <label>Ph√≤ng: <span id="serviceRoomNumber" style="font-weight: bold;"></span></label>
            </div>
            <div class="form-group">
                <label>Ch·ªçn d·ªãch v·ª•:</label>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px;">
                    <label style="display: flex; align-items: center; gap: 8px;">
                        <input type="checkbox" class="service-checkbox" value="d·ªçn ph√≤ng">
                        <span>D·ªçn ph√≤ng</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px;">
                        <input type="checkbox" class="service-checkbox" value="thay khƒÉn">
                        <span>Thay khƒÉn</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px;">
                        <input type="checkbox" class="service-checkbox" value="th√™m ƒë·ªì d√πng">
                        <span>Th√™m ƒë·ªì d√πng</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px;">
                        <input type="checkbox" class="service-checkbox" value="ƒë√°nh th·ª©c">
                        <span>ƒê√°nh th·ª©c</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px;">
                        <input type="checkbox" class="service-checkbox" value="gi·∫∑t ·ªßi">
                        <span>Gi·∫∑t ·ªßi</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px;">
                        <input type="checkbox" class="service-checkbox" value="ƒë∆∞a ƒë√≥n">
                        <span>ƒê∆∞a ƒë√≥n</span>
                    </label>
                </div>
            </div>
            <div class="form-group">
                <label for="serviceNotes">Ghi ch√∫ th√™m</label>
                <textarea id="serviceNotes" placeholder="Ghi ch√∫ th√™m cho d·ªãch v·ª•..." rows="3"></textarea>
            </div>
            <div class="modal-actions">
                <button class="modal-btn confirm" onclick="confirmServiceRequest()">
                    <i class="fas fa-paper-plane"></i> G·ª≠i Y√™u C·∫ßu
                </button>
                <button class="modal-btn cancel" onclick="closeModal()">
                    <i class="fas fa-times"></i> H·ªßy
                </button>
            </div>
        </div>
    </div>

    <script>
        // ================== CONFIGURATION ==================
        const ACCOUNTS = {
            staff: [
                { username: 'nhanvien1', password: 'nv123456', name: 'Nguy·ªÖn VƒÉn A', role: 'staff', department: 'L·ªÖ t√¢n', permissions: ['view_orders', 'manage_rooms', 'update_order_status', 'view_dashboard', 'checkin', 'checkout', 'service_requests'] },
                { username: 'nhanvien2', password: 'nv123456', name: 'Tr·∫ßn Th·ªã B', role: 'staff', department: 'Nh√† h√†ng', permissions: ['view_orders', 'update_order_status', 'view_dashboard'] },
                { username: 'nhanvien3', password: 'nv123456', name: 'L√™ VƒÉn C', role: 'staff', department: 'Bu·ªìng ph√≤ng', permissions: ['manage_rooms', 'checkin', 'checkout', 'cleaning'] }
            ],
            management: [
                { username: 'quanly1', password: 'ql123456', name: 'Ph·∫°m Qu·∫£n L√Ω', role: 'management', department: 'Qu·∫£n l√Ω', permissions: ['all'] },
                { username: 'admin', password: 'admin123', name: 'Administrator', role: 'management', department: 'Qu·∫£n tr·ªã h·ªá th·ªëng', permissions: ['all'] }
            ]
        };

        const PERMISSION_MATRIX = {
            customer: {
                views: ['customer'],
                actions: ['book_room', 'order_food', 'view_menu', 'request_service']
            },
            staff: {
                views: ['customer', 'staff'],
                actions: ['view_orders', 'manage_rooms', 'update_order_status', 'view_dashboard', 'checkin', 'checkout', 'service_requests', 'mark_cleaning']
            },
            management: {
                views: ['customer', 'staff', 'management', 'reports'],
                actions: ['all']
            }
        };

        // ================== GLOBAL VARIABLES ==================
        let currentUser = null;
        let currentRole = null;
        let loginAttempts = 0;
        const MAX_LOGIN_ATTEMPTS = 3;

        // ================== LOGIN SYSTEM ==================
        function initializeLoginSystem() {
            const savedUser = localStorage.getItem('hotel_current_user');
            const savedRole = localStorage.getItem('hotel_current_role');
            
            if (savedUser && savedRole) {
                currentUser = JSON.parse(savedUser);
                currentRole = savedRole;
                handleSuccessfulLogin();
            } else {
                // KH√îNG hi·ªÉn th·ªã m√†n h√¨nh ƒëƒÉng nh·∫≠p khi v√†o trang
                // Ch·ªâ hi·ªán khi click v√†o n√∫t "Nh√¢n Vi√™n" ho·∫∑c "Qu·∫£n L√Ω"
                updateViewButtons();
            }
        }

        function showLoginModal(requestedRole = 'staff') {
            // Hi·ªÉn th·ªã modal ƒëƒÉng nh·∫≠p
            document.getElementById('loginOverlay').style.display = 'flex';
            
            // Ch·ªçn role d·ª±a tr√™n n√∫t ƒë∆∞·ª£c click
            selectRole(requestedRole);
            
            // Reset form
            document.getElementById('staffUsername').value = '';
            document.getElementById('staffPassword').value = '';
            document.getElementById('managementUsername').value = '';
            document.getElementById('managementPassword').value = '';
            document.getElementById('loginError').style.display = 'none';
        }

        function hideLoginModal() {
            document.getElementById('loginOverlay').style.display = 'none';
        }

        function selectRole(role) {
            document.querySelectorAll('.role-btn').forEach(btn => btn.classList.remove('active'));
            
            // T√¨m v√† k√≠ch ho·∫°t n√∫t t∆∞∆°ng ·ª©ng
            const roleButtons = document.querySelectorAll('.role-btn');
            roleButtons.forEach(btn => {
                if (btn.textContent.includes(role === 'staff' ? 'Nh√¢n Vi√™n' : 'Qu·∫£n L√Ω')) {
                    btn.classList.add('active');
                }
            });
            
            document.getElementById('staffLoginForm').classList.remove('active');
            document.getElementById('managementLoginForm').classList.remove('active');
            
            if (role === 'staff') {
                document.getElementById('staffLoginForm').classList.add('active');
            } else {
                document.getElementById('managementLoginForm').classList.add('active');
            }
            
            document.getElementById('loginError').style.display = 'none';
        }

        function login(role) {
            const usernameField = role === 'staff' ? 'staffUsername' : 'managementUsername';
            const passwordField = role === 'staff' ? 'staffPassword' : 'managementPassword';
            
            const username = document.getElementById(usernameField).value.trim();
            const password = document.getElementById(passwordField).value.trim();
            
            const accounts = ACCOUNTS[role];
            const user = accounts.find(acc => acc.username === username && acc.password === password);
            
            if (user) {
                currentUser = user;
                currentRole = role;
                loginAttempts = 0;
                
                localStorage.setItem('hotel_current_user', JSON.stringify(user));
                localStorage.setItem('hotel_current_role', role);
                
                handleSuccessfulLogin();
                hideLoginModal();
                addNotification(`‚úÖ ƒêƒÉng nh·∫≠p th√†nh c√¥ng! Ch√†o m·ª´ng ${user.name}`, 'success');
            } else {
                loginAttempts++;
                const errorDiv = document.getElementById('loginError');
                const errorMsg = document.getElementById('errorMessage');
                
                if (loginAttempts >= MAX_LOGIN_ATTEMPTS) {
                    errorMsg.textContent = 'B·∫°n ƒë√£ nh·∫≠p sai qu√° nhi·ªÅu l·∫ßn. Vui l√≤ng th·ª≠ l·∫°i sau 30 gi√¢y.';
                    setTimeout(() => {
                        loginAttempts = 0;
                        errorDiv.style.display = 'none';
                    }, 30000);
                } else {
                    errorMsg.textContent = `Sai t√™n ƒëƒÉng nh·∫≠p ho·∫∑c m·∫≠t kh·∫©u. C√≤n ${MAX_LOGIN_ATTEMPTS - loginAttempts} l·∫ßn th·ª≠.`;
                }
                
                errorDiv.style.display = 'block';
                errorDiv.style.animation = 'none';
                setTimeout(() => {
                    errorDiv.style.animation = 'shake 0.5s ease-in-out';
                }, 10);
            }
        }

        function handleSuccessfulLogin() {
            // Hi·ªÉn th·ªã user info
            document.getElementById('userInfo').style.display = 'flex';
            document.getElementById('userName').textContent = currentUser.name;
            document.getElementById('userRole').textContent = currentRole === 'staff' ? 'Nh√¢n Vi√™n' : 'Qu·∫£n L√Ω';
            document.getElementById('userDepartment').textContent = currentUser.department;
            
            // C·∫≠p nh·∫≠t n√∫t view
            updateViewButtons();
            
            // N·∫øu ƒëang ·ªü view c·∫ßn ƒëƒÉng nh·∫≠p, refresh view
            const currentActiveView = document.querySelector('.view-content.active').id;
            if (currentActiveView !== 'customerView') {
                switchView(currentActiveView.replace('View', ''));
            }
        }

        function logout() {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën ƒëƒÉng xu·∫•t?')) {
                currentUser = null;
                currentRole = null;
                
                localStorage.removeItem('hotel_current_user');
                localStorage.removeItem('hotel_current_role');
                
                document.getElementById('userInfo').style.display = 'none';
                
                updateViewButtons();
                switchView('customer');
                
                addNotification('‚úÖ ƒê√£ ƒëƒÉng xu·∫•t th√†nh c√¥ng', 'info');
            }
        }

        // ================== VIEW MANAGEMENT ==================
        function updateViewButtons() {
            const viewButtons = {
                customer: document.getElementById('customerViewBtn'),
                staff: document.getElementById('staffViewBtn'),
                management: document.getElementById('managementViewBtn'),
                reports: document.getElementById('reportsViewBtn')
            };
            
            // Reset all buttons
            Object.values(viewButtons).forEach(btn => {
                btn.classList.remove('active');
                btn.classList.remove('disabled');
                btn.disabled = false;
            });
            
            // Enable customer view for everyone
            viewButtons.customer.classList.add('active');
            
            // Enable views based on role
            if (currentRole === 'staff') {
                viewButtons.staff.classList.remove('disabled');
            } else if (currentRole === 'management') {
                viewButtons.staff.classList.remove('disabled');
                viewButtons.management.classList.remove('disabled');
                viewButtons.reports.classList.remove('disabled');
            }
        }

        function switchView(view) {
            // Ki·ªÉm tra quy·ªÅn truy c·∫≠p
            if (view === 'staff' || view === 'management' || view === 'reports') {
                if (!currentUser) {
                    // Hi·ªÉn th·ªã m√†n h√¨nh ƒëƒÉng nh·∫≠p v·ªõi role t∆∞∆°ng ·ª©ng
                    const requestedRole = view === 'staff' ? 'staff' : 'management';
                    showLoginModal(requestedRole);
                    return;
                }
                
                // Ki·ªÉm tra role
                if (view === 'staff' && currentRole !== 'staff' && currentRole !== 'management') {
                    addNotification('‚ö†Ô∏è B·∫°n kh√¥ng c√≥ quy·ªÅn truy c·∫≠p ch·ª©c nƒÉng Nh√¢n Vi√™n', 'warning');
                    return;
                }
                
                if ((view === 'management' || view === 'reports') && currentRole !== 'management') {
                    addNotification('‚ö†Ô∏è B·∫°n kh√¥ng c√≥ quy·ªÅn truy c·∫≠p ch·ª©c nƒÉng n√†y', 'warning');
                    return;
                }
            }
            
            // Hide all views
            document.querySelectorAll('.view-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Show selected view
            document.getElementById(view + 'View').classList.add('active');
            
            // Update active button
            document.querySelectorAll('.view-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.id === view + 'ViewBtn') {
                    btn.classList.add('active');
                }
            });
            
            // Initialize view if needed
            initializeView(view);
        }

        function hasPermissionToView(view) {
            if (view === 'customer') return true; // Everyone can view customer
            
            if (!currentRole) return false;
            
            const allowedViews = PERMISSION_MATRIX[currentRole]?.views || [];
            return allowedViews.includes(view);
        }

        function initializeView(view) {
            switch(view) {
                case 'customer':
                    updateRoomSelect();
                    renderMenu();
                    updateOrderSummary();
                    break;
                case 'staff':
                    renderOrders();
                    renderRooms();
                    updateDashboardStats();
                    generateFloorButtons();
                    break;
                case 'management':
                    // Initialize management features
                    break;
                case 'reports':
                    // Initialize reports
                    break;
            }
        }

        function showManagementFeature(feature) {
            addNotification(`M·ªü t√≠nh nƒÉng: ${feature}`, 'info');
            // Implement feature logic here
        }

        // ================== NOTIFICATION SYSTEM ==================
        function addNotification(message, type = 'info') {
            const notifDiv = document.createElement('div');
            notifDiv.className = `notification ${type}`;
            
            let icon = '‚ÑπÔ∏è';
            if (type === 'success') icon = '‚úÖ';
            if (type === 'warning') icon = '‚ö†Ô∏è';
            if (type === 'error') icon = '‚ùå';
            
            notifDiv.innerHTML = `
                <span style="font-size: 1.2em;">${icon}</span>
                <span>${message}</span>
            `;
            
            const notifications = document.getElementById('notifications');
            notifications.appendChild(notifDiv);
            
            setTimeout(() => {
                notifDiv.style.opacity = '0';
                notifDiv.style.transform = 'translateX(100px)';
                setTimeout(() => {
                    if (notifDiv.parentNode) {
                        notifDiv.parentNode.removeChild(notifDiv);
                    }
                }, 300);
            }, 4000);
        }

        // ================== HOTEL MANAGEMENT SYSTEM ==================
        const MENU_ITEMS = [
            { id: 'goi-cuon', name: 'G·ªèi cu·ªën', price: 45000, icon: 'ü•¨', category: 'appetizer', description: 'G·ªèi cu·ªën t√¥m th·ªãt' },
            { id: 'sup-ngo', name: 'S√∫p n·∫•m', price: 35000, icon: 'üç≤', category: 'appetizer', description: 'S√∫p n·∫•m t∆∞∆°i' },
            { id: 'com-ga', name: 'C∆°m g√†', price: 75000, icon: 'üçö', category: 'main', description: 'C∆°m g√† x·ªëi m·ª°' },
            { id: 'pho-bo', name: 'Ph·ªü b√≤', price: 65000, icon: 'üçú', category: 'main', description: 'Ph·ªü b√≤ H√† N·ªôi' },
            { id: 'bun-cha', name: 'B√∫n ch·∫£', price: 70000, icon: 'üçù', category: 'main', description: 'B√∫n ch·∫£ H√† N·ªôi' },
            { id: 'ca-kho', name: 'C√° kho', price: 85000, icon: 'üêü', category: 'main', description: 'C√° kho t·ªô' },
            { id: 'nuoc-cam', name: 'N∆∞·ªõc cam', price: 35000, icon: 'üçä', category: 'drink', description: 'N∆∞·ªõc cam √©p' },
            { id: 'cafe', name: 'Caf√© s·ªØa', price: 25000, icon: '‚òï', category: 'drink', description: 'Caf√© s·ªØa ƒë√°' },
            { id: 'tra-dao', name: 'Tr√† ƒë√†o', price: 40000, icon: 'üçë', category: 'drink', description: 'Tr√† ƒë√†o cam s·∫£' },
            { id: 'bia', name: 'Bia Tiger', price: 45000, icon: 'üç∫', category: 'drink', description: 'Bia Tiger l·∫°nh' },
            { id: 'kem', name: 'Kem d·ª´a', price: 35000, icon: 'üç®', category: 'dessert', description: 'Kem d·ª´a s·∫ßu ri√™ng' },
            { id: 'che', name: 'Ch√® kh√∫c b·∫°ch', price: 30000, icon: 'üçÆ', category: 'dessert', description: 'Ch√® kh√∫c b·∫°ch' },
            { id: 'banh-flan', name: 'B√°nh flan', price: 25000, icon: 'üç∞', category: 'dessert', description: 'B√°nh flan caramel' }
        ];

        const FLOORS = 7;
        const ROOMS_PER_FLOOR = 10;
        const BASE_PRICE_PER_DAY = 200000;
        const PRICE_INCREMENT_PER_FLOOR = 50000;
        
        const ROOM_TYPES = {
            'standard': { name: 'Ti√™u Chu·∫©n', priceMultiplier: 1.0, icon: 'üõèÔ∏è', features: ['TV', 'WiFi', 'ƒêi·ªÅu h√≤a', 'Ph√≤ng t·∫Øm ri√™ng'] },
            'vip': { name: 'VIP', priceMultiplier: 1.5, icon: '‚≠ê', features: ['TV m√†n h√¨nh ph·∫≥ng', 'WiFi cao t·ªëc', 'Minibar', 'B·ªìn t·∫Øm', 'D·ªãch v·ª• 24/7'] },
            'suite': { name: 'Suite', priceMultiplier: 2.2, icon: 'üëë', features: ['Ph√≤ng kh√°ch ri√™ng', 'TV 2 m√†n h√¨nh', 'Minibar ƒë·∫ßy ƒë·ªß', 'B·ªìn t·∫Øm massage', 'D·ªãch v·ª• Butler', 'B·ªØa s√°ng mi·ªÖn ph√≠'] }
        };
        
        const ROOM_TYPE_DISTRIBUTION = {
            'standard': 0.6,
            'vip': 0.3,
            'suite': 0.1
        };

        let rooms = [];
        let orders = [];
        let totalRevenue = 0;
        let todayRevenue = 0;
        let activities = [];
        let currentCheckinRoom = null;
        let currentServiceRoom = null;
        let currentOrderItems = [];
        let currentFloor = 'all';
        let currentMenuFilter = 'all';
        let currentOrderFilter = 'all';

        // Initialize all rooms
        function initializeRooms() {
            rooms = [];
            let roomCounter = 1;
            
            for (let floor = 1; floor <= FLOORS; floor++) {
                const floorBasePrice = BASE_PRICE_PER_DAY + ((floor - 1) * PRICE_INCREMENT_PER_FLOOR);
                const standardCount = Math.floor(ROOMS_PER_FLOOR * ROOM_TYPE_DISTRIBUTION.standard);
                const vipCount = Math.floor(ROOMS_PER_FLOOR * ROOM_TYPE_DISTRIBUTION.vip);
                const suiteCount = ROOMS_PER_FLOOR - standardCount - vipCount;
                
                let typeCounter = { 'standard': 0, 'vip': 0, 'suite': 0 };
                
                for (let roomNum = 1; roomNum <= ROOMS_PER_FLOOR; roomNum++) {
                    let roomType = 'standard';
                    if (typeCounter.standard < standardCount) {
                        roomType = 'standard';
                        typeCounter.standard++;
                    } else if (typeCounter.vip < vipCount) {
                        roomType = 'vip';
                        typeCounter.vip++;
                    } else {
                        roomType = 'suite';
                        typeCounter.suite++;
                    }
                    
                    const typeMultiplier = ROOM_TYPES[roomType].priceMultiplier;
                    const roomPrice = Math.floor(floorBasePrice * typeMultiplier);
                    
                    let features = [...ROOM_TYPES[roomType].features];
                    if (floor >= 5) features.push('View th√†nh ph·ªë');
                    if (floor >= 6) features.push('Ban c√¥ng');
                    if (floor === 7 && roomType === 'suite') features.push('View to√†n c·∫£nh', 'H·ªì b∆°i ri√™ng');
                    
                    const room = {
                        id: roomCounter,
                        floor: floor,
                        roomNumber: `${floor}${roomNum.toString().padStart(2, '0')}`,
                        type: roomType,
                        pricePerDay: roomPrice,
                        customer: null,
                        customerPhone: null,
                        customerEmail: null,
                        numDays: 0,
                        checkinTime: null,
                        checkoutTime: null,
                        status: 'empty',
                        specialRequests: '',
                        serviceRequests: [],
                        features: features,
                        needsCleaning: false,
                        isNew: (floor === 7 && roomType === 'suite') ? true : false,
                        hasPromo: (floor === 1 && roomNum <= 3) ? true : false
                    };
                    
                    rooms.push(room);
                    roomCounter++;
                }
            }
            
            populateDemoData();
        }
        
        function populateDemoData() {
            const demoCustomers = [
                { name: 'Nguy·ªÖn VƒÉn A', phone: '0912345678', email: 'a.nguyen@email.com', days: 3, roomId: 101 },
                { name: 'Tr·∫ßn Th·ªã B', phone: '0923456789', email: 'b.tran@email.com', days: 2, roomId: 205 },
                { name: 'L√™ VƒÉn C', phone: '0934567890', email: 'c.le@email.com', days: 5, roomId: 312 },
                { name: 'Ph·∫°m Th·ªã D', phone: '0945678901', email: 'd.pham@email.com', days: 1, roomId: 407 },
                { name: 'Ho√†ng VƒÉn E', phone: '0956789012', email: 'e.hoang@email.com', days: 4, roomId: 509 },
                { name: 'ƒê·∫∑ng Th·ªã F', phone: '0967890123', email: 'f.dang@email.com', days: 3, roomId: 610 },
                { name: 'B√πi VƒÉn G', phone: '0978901234', email: 'g.bui@email.com', days: 7, roomId: 703 }
            ];
            
            demoCustomers.forEach(customer => {
                const room = rooms.find(r => r.roomNumber == customer.roomId);
                if (room) {
                    room.customer = customer.name;
                    room.customerPhone = customer.phone;
                    room.customerEmail = customer.email;
                    room.numDays = customer.days;
                    room.checkinTime = new Date(Date.now() - Math.floor(Math.random() * 86400000));
                    room.status = 'occupied';
                    
                    activities.push({
                        type: 'checkin',
                        roomNumber: room.roomNumber,
                        customerName: customer.name,
                        time: room.checkinTime
                    });
                    
                    if (Math.random() > 0.5) {
                        const services = ['d·ªçn ph√≤ng', 'th√™m ƒë·ªì d√πng', 'gi·∫∑t ·ªßi'];
                        room.serviceRequests.push({
                            service: services[Math.floor(Math.random() * services.length)],
                            time: new Date(Date.now() - Math.floor(Math.random() * 3600000)),
                            completed: Math.random() > 0.5
                        });
                    }
                }
            });
            
            const demoOrders = [
                { roomId: 101, items: 'C∆°m g√† x 2\nN∆∞·ªõc cam x 2', status: 'completed' },
                { roomId: 205, items: 'Ph·ªü b√≤ x 1\nCaf√© s·ªØa x 1', status: 'preparing' },
                { roomId: 312, items: 'B√∫n ch·∫£ x 3\nBia Tiger x 3\nKem d·ª´a x 3', status: 'pending' },
                { roomId: 407, items: 'G·ªèi cu·ªën x 2\nC√° kho x 1\nTr√† ƒë√†o x 2', status: 'pending' }
            ];
            
            demoOrders.forEach(orderData => {
                const room = rooms.find(r => r.roomNumber == orderData.roomId);
                if (room) {
                    orders.push({
                        id: Date.now() + Math.floor(Math.random() * 1000),
                        roomId: orderData.roomId,
                        customerName: room.customer,
                        items: orderData.items,
                        time: new Date(Date.now() - Math.floor(Math.random() * 7200000)),
                        status: orderData.status,
                        priority: orderData.status === 'pending' ? 'medium' : 'low'
                    });
                    
                    activities.push({
                        type: 'order',
                        roomNumber: orderData.roomId,
                        customerName: room.customer,
                        time: new Date(Date.now() - Math.floor(Math.random() * 7200000))
                    });
                }
            });
            
            rooms.filter(r => r.status === 'empty' && Math.random() > 0.7).forEach(room => {
                room.needsCleaning = true;
                room.status = 'cleaning';
                
                activities.push({
                    type: 'cleaning',
                    roomNumber: room.roomNumber,
                    time: new Date(Date.now() - Math.floor(Math.random() * 3600000))
                });
            });
            
            todayRevenue = 12500000;
            totalRevenue = 87500000;
        }

        function formatCurrency(amount) {
            return amount.toLocaleString('vi-VN') + 'ƒë';
        }

        // ================== C√ÅC H√ÄM QU·∫¢N L√ù KH√ÅCH S·∫†N ==================
        // Generate floor buttons
        function generateFloorButtons() {
            const floorSelect = document.querySelector('.floor-select');
            const allBtn = floorSelect.querySelector('.floor-btn');
            floorSelect.innerHTML = '';
            floorSelect.appendChild(allBtn);
            
            for (let floor = 1; floor <= FLOORS; floor++) {
                const floorBtn = document.createElement('button');
                floorBtn.className = 'floor-btn';
                floorBtn.textContent = floor;
                floorBtn.onclick = () => changeFloor(floor);
                floorSelect.appendChild(floorBtn);
            }
            
            if (currentFloor === 'all') {
                floorSelect.querySelector('.floor-btn').classList.add('active');
            } else {
                floorSelect.querySelectorAll('.floor-btn')[currentFloor].classList.add('active');
            }
        }

        // Change floor view
        function changeFloor(floor) {
            currentFloor = floor;
            
            document.querySelectorAll('.floor-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            renderRooms();
        }

        // Update room select for customers
        function updateRoomSelect() {
            const select = document.getElementById('customerRoom');
            select.innerHTML = '<option value="">-- Ch·ªçn ph√≤ng --</option>';
            
            rooms.forEach(room => {
                if (room.customer) {
                    const option = document.createElement('option');
                    option.value = room.id;
                    option.textContent = `Ph√≤ng ${room.roomNumber} - ${room.customer} (${ROOM_TYPES[room.type].name})`;
                    select.appendChild(option);
                }
            });
            
            // Also add empty rooms for new customers
            rooms.filter(room => !room.customer).forEach(room => {
                const option = document.createElement('option');
                option.value = room.id;
                const promoText = room.hasPromo ? ' [KHUY·∫æN M√ÉI]' : '';
                option.textContent = `Ph√≤ng ${room.roomNumber} - ${ROOM_TYPES[room.type].name} - ${formatCurrency(room.pricePerDay)}/ƒë√™m${promoText}`;
                select.appendChild(option);
            });
        }

        // Filter rooms by type
        function filterRoomsByType() {
            const type = document.getElementById('roomTypeFilter').value;
            const select = document.getElementById('customerRoom');
            select.innerHTML = '<option value="">-- Ch·ªçn ph√≤ng --</option>';
            
            let filteredRooms = rooms;
            if (type !== 'all') {
                filteredRooms = rooms.filter(room => room.type === type);
            }
            
            filteredRooms.forEach(room => {
                if (room.customer) {
                    const option = document.createElement('option');
                    option.value = room.id;
                    option.textContent = `Ph√≤ng ${room.roomNumber} - ${room.customer} (${ROOM_TYPES[room.type].name})`;
                    select.appendChild(option);
                } else {
                    const option = document.createElement('option');
                    option.value = room.id;
                    const promoText = room.hasPromo ? ' [KHUY·∫æN M√ÉI]' : '';
                    option.textContent = `Ph√≤ng ${room.roomNumber} - ${ROOM_TYPES[room.type].name} - ${formatCurrency(room.pricePerDay)}/ƒë√™m${promoText}`;
                    select.appendChild(option);
                }
            });
        }

        // Update room details when room is selected
        function updateRoomDetails() {
            const roomId = document.getElementById('customerRoom').value;
            const detailsDiv = document.getElementById('roomDetails');
            
            if (!roomId) {
                detailsDiv.style.display = 'none';
                return;
            }
            
            const room = rooms.find(r => r.id == roomId);
            if (!room) return;
            
            const typeInfo = ROOM_TYPES[room.type];
            
            document.getElementById('roomTypeDisplay').innerHTML = `
                <strong>${typeInfo.icon} ${typeInfo.name} - T·∫ßng ${room.floor}</strong>
            `;
            
            let priceText = formatCurrency(room.pricePerDay) + ' / ƒë√™m';
            if (room.hasPromo) {
                const discountedPrice = room.pricePerDay * 0.8; // 20% discount
                priceText = `<span style="text-decoration: line-through; color: #999;">${formatCurrency(room.pricePerDay)}</span> 
                             <span style="color: #e74c3c; font-size: 1.2em;">${formatCurrency(discountedPrice)}</span> / ƒë√™m 
                             <span style="background: #e74c3c; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8em;">GI·∫¢M 20%</span>`;
            }
            
            document.getElementById('roomPriceDisplay').innerHTML = priceText;
            
            const featuresHtml = room.features.map(feature => 
                `<div style="display: inline-block; background: #e8f4fc; padding: 5px 10px; border-radius: 15px; margin: 5px 5px 5px 0; font-size: 0.9em;">‚úì ${feature}</div>`
            ).join('');
            
            document.getElementById('roomFeatures').innerHTML = `
                <div style="margin-top: 10px; font-size: 0.9em;">
                    <div style="font-weight: bold; margin-bottom: 5px;">Ti·ªán nghi:</div>
                    ${featuresHtml}
                </div>
            `;
            
            detailsDiv.style.display = 'block';
        }

        // Render menu
        function renderMenu() {
            const grid = document.getElementById('menuGrid');
            grid.innerHTML = '';
            
            let filteredItems = MENU_ITEMS;
            if (currentMenuFilter !== 'all') {
                filteredItems = MENU_ITEMS.filter(item => item.category === currentMenuFilter);
            }
            
            filteredItems.forEach(item => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'menu-item';
                itemDiv.onclick = () => addToOrder(item);
                itemDiv.innerHTML = `
                    <div class="menu-icon">${item.icon}</div>
                    <div class="menu-name">${item.name}</div>
                    <div class="menu-category">${getCategoryName(item.category)}</div>
                    <div style="font-size: 0.9em; color: #666; margin-bottom: 10px;">${item.description}</div>
                    <div class="menu-price">${formatCurrency(item.price)}</div>
                `;
                grid.appendChild(itemDiv);
            });
        }

        // Get category name
        function getCategoryName(category) {
            const names = {
                'appetizer': 'Khai v·ªã',
                'main': 'M√≥n ch√≠nh',
                'drink': 'ƒê·ªì u·ªëng',
                'dessert': 'Tr√°ng mi·ªáng'
            };
            return names[category] || category;
        }

        // Filter menu
        function filterMenu(category) {
            currentMenuFilter = category;
            
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            renderMenu();
        }

        // Add item to order
        function addToOrder(item) {
            const existingItem = currentOrderItems.find(i => i.id === item.id);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                currentOrderItems.push({
                    id: item.id,
                    name: item.name,
                    price: item.price,
                    quantity: 1,
                    icon: item.icon
                });
            }
            
            updateOrderSummary();
            
            // Highlight the menu item briefly
            const menuItems = document.querySelectorAll('.menu-item');
            menuItems.forEach(menuItem => {
                if (menuItem.querySelector('.menu-name').textContent === item.name) {
                    menuItem.classList.add('highlight');
                    setTimeout(() => {
                        menuItem.classList.remove('highlight');
                    }, 500);
                }
            });
        }

        // Update order summary
        function updateOrderSummary() {
            const orderItemsDiv = document.getElementById('orderItems');
            const orderTotalDiv = document.getElementById('orderTotal');
            const submitBtn = document.getElementById('submitOrderBtn');
            
            if (currentOrderItems.length === 0) {
                orderItemsDiv.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-shopping-basket"></i>
                        <p>Ch∆∞a c√≥ m√≥n n√†o trong ƒë∆°n h√†ng</p>
                        <p>H√£y ch·ªçn m√≥n t·ª´ th·ª±c ƒë∆°n b√™n tr√™n</p>
                    </div>
                `;
                orderTotalDiv.textContent = '0ƒë';
                submitBtn.disabled = true;
                return;
            }
            
            let total = 0;
            let itemsHtml = '';
            
            currentOrderItems.forEach((item, index) => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                
                itemsHtml += `
                    <div class="order-item">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span>${item.icon}</span>
                            <span>${item.name}</span>
                        </div>
                        <div class="item-controls">
                            <button class="qty-btn" onclick="changeQuantity(${index}, -1)">-</button>
                            <span class="item-qty">${item.quantity}</span>
                            <button class="qty-btn" onclick="changeQuantity(${index}, 1)">+</button>
                            <span style="min-width: 80px; text-align: right; font-weight: bold;">${formatCurrency(itemTotal)}</span>
                            <button class="remove-btn" onclick="removeItem(${index})">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                `;
            });
            
            orderItemsDiv.innerHTML = itemsHtml;
            orderTotalDiv.textContent = formatCurrency(total);
            submitBtn.disabled = false;
        }

        // Change item quantity
        function changeQuantity(index, change) {
            const item = currentOrderItems[index];
            item.quantity += change;
            
            if (item.quantity <= 0) {
                currentOrderItems.splice(index, 1);
            }
            
            updateOrderSummary();
        }

        // Remove item from order
        function removeItem(index) {
            currentOrderItems.splice(index, 1);
            updateOrderSummary();
        }

        // Submit order
        function submitOrder() {
            const roomId = document.getElementById('customerRoom').value;
            const customerName = document.getElementById('customerName').value.trim();
            const customerPhone = document.getElementById('customerPhone').value.trim();
            
            if (!roomId) {
                addNotification('Vui l√≤ng ch·ªçn ph√≤ng!', 'error');
                return;
            }
            
            if (!customerName) {
                addNotification('Vui l√≤ng nh·∫≠p t√™n kh√°ch h√†ng!', 'error');
                return;
            }
            
            if (!customerPhone) {
                addNotification('Vui l√≤ng nh·∫≠p s·ªë ƒëi·ªán tho·∫°i!', 'error');
                return;
            }
            
            if (currentOrderItems.length === 0) {
                addNotification('Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt m√≥n!', 'error');
                return;
            }
            
            const room = rooms.find(r => r.id == roomId);
            
            // Format order items
            let orderText = '';
            let orderTotal = 0;
            
            currentOrderItems.forEach(item => {
                const itemTotal = item.price * item.quantity;
                orderTotal += itemTotal;
                orderText += `${item.name} x ${item.quantity} - ${formatCurrency(itemTotal)}\n`;
            });
            
            orderText += `\nT·ªïng c·ªông: ${formatCurrency(orderTotal)}`;
            
            // Create order
            const order = {
                id: Date.now(),
                roomId: room.roomNumber,
                roomIdNum: parseInt(roomId),
                customerName: customerName,
                customerPhone: customerPhone,
                items: orderText,
                time: new Date(),
                status: 'pending',
                priority: 'medium'
            };
            
            orders.push(order);
            
            // Add to activities
            activities.push({
                type: 'order',
                roomNumber: room.roomNumber,
                customerName: customerName,
                time: new Date()
            });
            
            // Clear order
            currentOrderItems = [];
            updateOrderSummary();
            
            addNotification(`‚úÖ ƒê∆°n h√†ng t·ª´ ph√≤ng ${room.roomNumber} ƒë√£ ƒë∆∞·ª£c g·ª≠i! T·ªïng: ${formatCurrency(orderTotal)}`, 'success');
            
            // If in staff view, update orders list
            if (document.getElementById('staffView').classList.contains('active')) {
                renderOrders();
                updateDashboardStats();
            }
        }

        // Render orders for staff
        function renderOrders() {
            const list = document.getElementById('ordersList');
            
            let filteredOrders = orders;
            if (currentOrderFilter !== 'all') {
                filteredOrders = orders.filter(order => order.status === currentOrderFilter);
            }
            
            if (filteredOrders.length === 0) {
                list.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-concierge-bell"></i>
                        <p>Kh√¥ng c√≥ ƒë∆°n h√†ng n√†o</p>
                        <p>${currentOrderFilter !== 'all' ? 'Th·ª≠ ch·ªçn b·ªô l·ªçc kh√°c' : 'ƒê∆°n h√†ng s·∫Ω xu·∫•t hi·ªán ·ªü ƒë√¢y'}</p>
                    </div>
                `;
                return;
            }
            
            list.innerHTML = '';
            
            // Sort by priority and time
            filteredOrders.sort((a, b) => {
                const priorityOrder = { 'high': 3, 'medium': 2, 'low': 1 };
                if (priorityOrder[b.priority] !== priorityOrder[a.priority]) {
                    return priorityOrder[b.priority] - priorityOrder[a.priority];
                }
                return new Date(b.time) - new Date(a.time);
            });
            
            filteredOrders.forEach(order => {
                const orderDiv = document.createElement('div');
                orderDiv.className = `order-card ${order.priority === 'high' ? 'high-priority' : order.priority === 'medium' ? 'medium-priority' : ''}`;
                
                const statusColors = {
                    'pending': '#f39c12',
                    'preparing': '#3498db',
                    'completed': '#27ae60',
                    'cancelled': '#e74c3c'
                };
                
                const statusTexts = {
                    'pending': 'Ch·ªù x·ª≠ l√Ω',
                    'preparing': 'ƒêang chu·∫©n b·ªã',
                    'completed': 'Ho√†n th√†nh',
                    'cancelled': 'ƒê√£ h·ªßy'
                };
                
                const priorityTexts = {
                    'high': 'Cao',
                    'medium': 'Trung b√¨nh',
                    'low': 'Th·∫•p'
                };
                
                orderDiv.innerHTML = `
                    <div class="order-header">
                        <div class="order-room">
                            <i class="fas fa-door-closed"></i> Ph√≤ng ${order.roomId}
                            <span style="font-size: 0.9em; color: #666; margin-left: 10px;">${order.customerName}</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span class="order-priority priority-${order.priority}">${priorityTexts[order.priority]}</span>
                            <span class="order-time">
                                <i class="far fa-clock"></i> ${new Date(order.time).toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' })}
                            </span>
                        </div>
                    </div>
                    <div class="order-items">${order.items}</div>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span style="padding: 5px 15px; border-radius: 15px; background: ${statusColors[order.status]}; color: white; font-weight: bold; font-size: 0.9em;">
                                ${statusTexts[order.status]}
                            </span>
                            <span style="font-size: 0.9em; color: #666;">
                                <i class="fas fa-phone"></i> ${order.customerPhone}
                            </span>
                        </div>
                        <div class="order-actions">
                            ${order.status === 'pending' || order.status === 'preparing' ? `
                                <button class="complete-btn" onclick="updateOrderStatus(${order.id}, 'completed')">
                                    <i class="fas fa-check"></i> Ho√†n th√†nh
                                </button>
                                <button class="cancel-btn" onclick="updateOrderStatus(${order.id}, 'cancelled')">
                                    <i class="fas fa-times"></i> H·ªßy
                                </button>
                            ` : ''}
                            ${order.status === 'pending' ? `
                                <button class="complete-btn" style="background: #3498db;" onclick="updateOrderStatus(${order.id}, 'preparing')">
                                    <i class="fas fa-utensils"></i> Chu·∫©n b·ªã
                                </button>
                            ` : ''}
                        </div>
                    </div>
                `;
                list.appendChild(orderDiv);
            });
        }

        // Filter orders
        function filterOrders(status) {
            currentOrderFilter = status;
            
            const filterBtns = event.target.parentElement.querySelectorAll('.filter-btn');
            filterBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            renderOrders();
        }

        // Update order status
        function updateOrderStatus(orderId, status) {
            const order = orders.find(o => o.id === orderId);
            if (!order) return;
            
            const oldStatus = order.status;
            order.status = status;
            
            // Update priority based on waiting time if pending
            if (status === 'pending') {
                const waitTime = new Date() - new Date(order.time);
                if (waitTime > 30 * 60 * 1000) { // More than 30 minutes
                    order.priority = 'high';
                } else if (waitTime > 15 * 60 * 1000) { // More than 15 minutes
                    order.priority = 'medium';
                }
            }
            
            renderOrders();
            
            if (status === 'completed') {
                addNotification(`‚úÖ ƒê∆°n h√†ng ph√≤ng ${order.roomId} ƒë√£ ho√†n th√†nh`, 'success');
            } else if (status === 'cancelled') {
                addNotification(`‚ùå ƒê∆°n h√†ng ph√≤ng ${order.roomId} ƒë√£ h·ªßy`, 'error');
            }
        }

        // Show checkin modal
        function showCheckinModal(roomId) {
            if (!currentUser || (currentRole !== 'staff' && currentRole !== 'management')) {
                addNotification('‚ö†Ô∏è Vui l√≤ng ƒëƒÉng nh·∫≠p v·ªõi t∆∞ c√°ch nh√¢n vi√™n ho·∫∑c qu·∫£n l√Ω', 'warning');
                return;
            }
            
            currentCheckinRoom = roomId;
            document.getElementById('checkinModal').classList.add('active');
            document.getElementById('modalCustomerName').value = '';
            document.getElementById('modalCustomerPhone').value = '';
            document.getElementById('modalNumDays').value = '1';
            document.getElementById('modalSpecialRequests').value = '';
        }

        // Show service modal
        function showServiceModal(roomId) {
            if (!currentUser || (currentRole !== 'staff' && currentRole !== 'management')) {
                addNotification('‚ö†Ô∏è Vui l√≤ng ƒëƒÉng nh·∫≠p v·ªõi t∆∞ c√°ch nh√¢n vi√™n ho·∫∑c qu·∫£n l√Ω', 'warning');
                return;
            }
            
            currentServiceRoom = roomId;
            const room = rooms.find(r => r.id == roomId);
            if (!room) return;
            
            document.getElementById('serviceRoomNumber').textContent = room.roomNumber;
            document.getElementById('serviceModal').classList.add('active');
            
            // Clear checkboxes
            document.querySelectorAll('.service-checkbox').forEach(cb => cb.checked = false);
            document.getElementById('serviceNotes').value = '';
        }

        // Close modal
        function closeModal() {
            document.querySelectorAll('.modal').forEach(modal => modal.classList.remove('active'));
            currentCheckinRoom = null;
            currentServiceRoom = null;
        }

        // Confirm checkin
        function confirmCheckin() {
            if (!currentUser || (currentRole !== 'staff' && currentRole !== 'management')) {
                addNotification('‚ö†Ô∏è Kh√¥ng c√≥ quy·ªÅn th·ª±c hi·ªán thao t√°c n√†y', 'error');
                closeModal();
                return;
            }
            
            const customerName = document.getElementById('modalCustomerName').value.trim();
            const customerPhone = document.getElementById('modalCustomerPhone').value.trim();
            const numDays = parseInt(document.getElementById('modalNumDays').value);
            const specialRequests = document.getElementById('modalSpecialRequests').value.trim();
            
            if (!customerName) {
                addNotification('Vui l√≤ng nh·∫≠p t√™n kh√°ch h√†ng!', 'error');
                return;
            }
            
            if (!customerPhone) {
                addNotification('Vui l√≤ng nh·∫≠p s·ªë ƒëi·ªán tho·∫°i!', 'error');
                return;
            }
            
            if (!numDays || numDays < 1) {
                addNotification('S·ªë ng√†y thu√™ ph·∫£i l·ªõn h∆°n 0!', 'error');
                return;
            }
            
            const room = rooms.find(r => r.id === currentCheckinRoom);
            room.customer = customerName;
            room.customerPhone = customerPhone;
            room.numDays = numDays;
            room.checkinTime = new Date();
            room.status = 'occupied';
            room.specialRequests = specialRequests;
            room.needsCleaning = false;
            
            // Add to activities
            activities.push({
                type: 'checkin',
                roomNumber: room.roomNumber,
                customerName: customerName,
                time: new Date()
            });
            
            closeModal();
            renderRooms();
            updateRoomSelect();
            updateDashboardStats();
            
            addNotification(`‚úÖ ${customerName} ƒë√£ nh·∫≠n ph√≤ng ${room.roomNumber} - ${numDays} ng√†y`, 'success');
        }

        // Confirm service request
        function confirmServiceRequest() {
            if (!currentUser || (currentRole !== 'staff' && currentRole !== 'management')) {
                addNotification('‚ö†Ô∏è Kh√¥ng c√≥ quy·ªÅn th·ª±c hi·ªán thao t√°c n√†y', 'error');
                closeModal();
                return;
            }
            
            const room = rooms.find(r => r.id === currentServiceRoom);
            if (!room) return;
            
            const selectedServices = Array.from(document.querySelectorAll('.service-checkbox:checked')).map(cb => cb.value);
            const notes = document.getElementById('serviceNotes').value.trim();
            
            if (selectedServices.length === 0) {
                addNotification('Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt d·ªãch v·ª•!', 'error');
                return;
            }
            
            selectedServices.forEach(service => {
                room.serviceRequests.push({
                    service: service,
                    time: new Date(),
                    completed: false,
                    notes: notes
                });
            });
            
            closeModal();
            renderRooms();
            
            addNotification(`‚úÖ ƒê√£ g·ª≠i y√™u c·∫ßu d·ªãch v·ª• cho ph√≤ng ${room.roomNumber}`, 'success');
        }

        // Checkout
        function checkout(roomId) {
            if (!currentUser || (currentRole !== 'staff' && currentRole !== 'management')) {
                addNotification('‚ö†Ô∏è Vui l√≤ng ƒëƒÉng nh·∫≠p v·ªõi t∆∞ c√°ch nh√¢n vi√™n ho·∫∑c qu·∫£n l√Ω', 'warning');
                return;
            }
            
            const room = rooms.find(r => r.id === roomId);
            if (!room.customer) return;
            
            const roomCharge = room.pricePerDay * room.numDays;
            
            // Apply discount for promo rooms
            const finalCharge = room.hasPromo ? roomCharge * 0.8 : roomCharge;
            
            totalRevenue += finalCharge;
            todayRevenue += finalCharge;
            
            addNotification(`üí∞ ${room.customer} tr·∫£ ph√≤ng ${room.roomNumber}. Ti·ªÅn ph√≤ng: ${formatCurrency(finalCharge)} (${room.numDays} ng√†y)`, 'success');
            
            // Add to activities
            activities.push({
                type: 'checkout',
                roomNumber: room.roomNumber,
                customerName: room.customer,
                time: new Date(),
                amount: finalCharge
            });
            
            // Mark room as needing cleaning
            room.status = 'cleaning';
            room.needsCleaning = true;
            const oldCustomer = room.customer;
            
            // Clear customer data after a delay (to show cleaning status)
            setTimeout(() => {
                room.customer = null;
                room.customerPhone = null;
                room.customerEmail = null;
                room.numDays = 0;
                room.checkinTime = null;
                room.specialRequests = '';
                renderRooms();
                updateRoomSelect();
            }, 3000);
            
            renderRooms();
            updateDashboardStats();
        }

        // Mark cleaning as done
        function markCleaningDone(roomId) {
            if (!currentUser || (currentRole !== 'staff' && currentRole !== 'management')) {
                addNotification('‚ö†Ô∏è Vui l√≤ng ƒëƒÉng nh·∫≠p v·ªõi t∆∞ c√°ch nh√¢n vi√™n ho·∫∑c qu·∫£n l√Ω', 'warning');
                return;
            }
            
            const room = rooms.find(r => r.id === roomId);
            room.status = 'empty';
            room.needsCleaning = false;
            room.serviceRequests = room.serviceRequests.filter(req => !req.completed);
            
            // Add to activities
            activities.push({
                type: 'cleaning',
                roomNumber: room.roomNumber,
                time: new Date(),
                action: 'completed'
            });
            
            renderRooms();
            addNotification(`üßπ Ph√≤ng ${room.roomNumber} ƒë√£ ƒë∆∞·ª£c d·ªçn xong`, 'success');
        }

        // Render rooms for staff
        function renderRooms() {
            const list = document.getElementById('roomsList');
            list.innerHTML = '';
            
            let filteredRooms = rooms;
            
            // Filter by floor
            if (currentFloor !== 'all') {
                filteredRooms = rooms.filter(room => room.floor == currentFloor);
            }
            
            if (filteredRooms.length === 0) {
                list.innerHTML = `
                    <div class="empty-state" style="grid-column: 1 / -1;">
                        <i class="fas fa-bed"></i>
                        <p>Kh√¥ng c√≥ ph√≤ng n√†o</p>
                    </div>
                `;
                return;
            }
            
            filteredRooms.forEach(room => {
                const roomDiv = document.createElement('div');
                roomDiv.className = `room-card ${room.type} ${room.status === 'occupied' ? 'occupied' : ''} ${room.needsCleaning ? 'need-cleaning' : ''}`;
                
                // Add badges
                let badges = '';
                if (room.isNew) {
                    badges += `<div class="room-badge badge-new">M·ªöI</div>`;
                }
                if (room.hasPromo) {
                    badges += `<div class="room-badge badge-promo">GI·∫¢M 20%</div>`;
                }
                if (room.floor >= 5) {
                    badges += `<div class="room-badge badge-sea-view">VIEW ƒê·∫∏P</div>`;
                }
                
                const typeInfo = ROOM_TYPES[room.type];
                
                // Customer info if occupied
                let customerInfo = '';
                let serviceRequests = '';
                let actions = '';
                
                if (room.customer) {
                    customerInfo = `
                        <div class="room-customer">
                            <i class="fas fa-user"></i> ${room.customer}
                        </div>
                        <div class="room-details">
                            <i class="fas fa-phone"></i> ${room.customerPhone}
                        </div>
                        <div class="room-details">
                            <i class="far fa-calendar"></i> ${room.numDays} ng√†y (ƒë·∫øn ${formatDate(new Date(room.checkinTime.getTime() + room.numDays * 24 * 60 * 60 * 1000))})
                        </div>
                        ${room.specialRequests ? `
                            <div class="room-details">
                                <i class="fas fa-sticky-note"></i> ${room.specialRequests.substring(0, 30)}${room.specialRequests.length > 30 ? '...' : ''}
                            </div>
                        ` : ''}
                    `;
                    
                    // Service requests
                    if (room.serviceRequests.length > 0) {
                        const pendingServices = room.serviceRequests.filter(req => !req.completed);
                        if (pendingServices.length > 0) {
                            serviceRequests = `
                                <div class="service-request">
                                    <div style="font-size: 0.9em; font-weight: bold; margin-bottom: 5px;">Y√™u c·∫ßu d·ªãch v·ª•:</div>
                                    ${pendingServices.map(req => 
                                        `<span class="service-tag">${req.service}</span>`
                                    ).join('')}
                        </div>
                            `;
                        }
                    }
                    
                    actions = `
                        <button class="room-btn checkout-btn" onclick="checkout(${room.id})">
                            <i class="fas fa-sign-out-alt"></i> Tr·∫£ ph√≤ng
                        </button>
                        <button class="room-btn service-btn" onclick="showServiceModal(${room.id})">
                            <i class="fas fa-concierge-bell"></i> D·ªãch v·ª•
                        </button>
                    `;
                } else if (room.status === 'cleaning') {
                    customerInfo = `
                        <div class="room-customer">
                            <i class="fas fa-broom"></i> ƒêang d·ªçn d·∫πp
                        </div>
                        <div class="room-details">
                            <i class="far fa-clock"></i> C·∫ßn d·ªçn tr∆∞·ªõc khi nh·∫≠n kh√°ch
                        </div>
                    `;
                    
                    actions = `
                        <button class="room-btn checkin-btn" onclick="markCleaningDone(${room.id})">
                            <i class="fas fa-check"></i> ƒê√£ d·ªçn xong
                        </button>
                    `;
                } else {
                    customerInfo = `
                        <div style="text-align: center; padding: 20px 0; color: #999;">
                            <i class="fas fa-door-open" style="font-size: 2em; margin-bottom: 10px;"></i>
                            <div>Ph√≤ng tr·ªëng</div>
                        </div>
                    `;
                    
                    actions = `
                        <button class="room-btn checkin-btn" onclick="showCheckinModal(${room.id})">
                            <i class="fas fa-key"></i> Nh·∫≠n ph√≤ng
                        </button>
                    `;
                }
                
                const roomPrice = room.hasPromo ? 
                    `<span style="text-decoration: line-through; color: #999;">${formatCurrency(room.pricePerDay)}</span>
                     <span style="color: #e74c3c;">${formatCurrency(room.pricePerDay * 0.8)}</span>` : 
                    formatCurrency(room.pricePerDay);
                
                roomDiv.innerHTML = `
                    ${badges}
                    <div class="room-header-info">
                        <div class="room-number">
                            ${typeInfo.icon} Ph√≤ng ${room.roomNumber}
                            <span class="room-type type-${room.type}">${typeInfo.name}</span>
                        </div>
                        <div class="room-status status-${room.status}">
                            ${room.status === 'occupied' ? 'ƒêang thu√™' : 
                              room.status === 'cleaning' ? 'ƒêang d·ªçn' : 'Tr·ªëng'}
                        </div>
                    </div>
                    ${customerInfo}
                    <div class="room-price">
                        <i class="fas fa-tag"></i> ${roomPrice} / ƒë√™m
                    </div>
                    ${serviceRequests}
                    <div class="room-actions">
                        ${actions}
                    </div>
                `;
                
                list.appendChild(roomDiv);
            });
        }

        // Format date
        function formatDate(date) {
            return date.toLocaleDateString('vi-VN', { day: '2-digit', month: '2-digit', year: 'numeric' });
        }

        // Update dashboard stats
        function updateDashboardStats() {
            // Calculate stats
            const occupiedRooms = rooms.filter(r => r.status === 'occupied').length;
            const cleaningRooms = rooms.filter(r => r.status === 'cleaning').length;
            const availableRooms = rooms.length - occupiedRooms - cleaningRooms;
            const occupancyRate = Math.round((occupiedRooms / rooms.length) * 100);
            
            const todayOrders = orders.filter(o => {
                const orderDate = new Date(o.time);
                const today = new Date();
                return orderDate.getDate() === today.getDate() && 
                       orderDate.getMonth() === today.getMonth() && 
                       orderDate.getFullYear() === today.getFullYear();
            }).length;
            
            // Update UI
            document.getElementById('todayRevenue').textContent = formatCurrency(todayRevenue);
            document.getElementById('occupancyRate').textContent = `${occupancyRate}%`;
            document.getElementById('availableRooms').textContent = availableRooms;
            document.getElementById('todayOrders').textContent = todayOrders;
            
            // Update activity list
            updateActivityList();
        }

        // Update activity list
        function updateActivityList() {
            const activityList = document.getElementById('activityList');
            activityList.innerHTML = '';
            
            // Get recent activities (last 10)
            const recentActivities = [...activities]
                .sort((a, b) => new Date(b.time) - new Date(a.time))
                .slice(0, 10);
            
            if (recentActivities.length === 0) {
                activityList.innerHTML = `
                    <div class="empty-state">
                        <p>Ch∆∞a c√≥ ho·∫°t ƒë·ªông n√†o</p>
                    </div>
                `;
                return;
            }
            
            recentActivities.forEach(activity => {
                const activityDiv = document.createElement('div');
                activityDiv.className = 'activity-item';
                
                let iconClass = '';
                let icon = '';
                let text = '';
                
                switch(activity.type) {
                    case 'checkin':
                        iconClass = 'icon-checkin';
                        icon = 'fas fa-key';
                        text = `<strong>${activity.customerName}</strong> nh·∫≠n ph√≤ng <strong>${activity.roomNumber}</strong>`;
                        break;
                    case 'checkout':
                        iconClass = 'icon-checkout';
                        icon = 'fas fa-sign-out-alt';
                        text = `<strong>${activity.customerName}</strong> tr·∫£ ph√≤ng <strong>${activity.roomNumber}</strong>`;
                        if (activity.amount) {
                            text += ` - ${formatCurrency(activity.amount)}`;
                        }
                        break;
                    case 'order':
                        iconClass = 'icon-order';
                        icon = 'fas fa-utensils';
                        text = `ƒê∆°n h√†ng t·ª´ ph√≤ng <strong>${activity.roomNumber}</strong> - ${activity.customerName}`;
                        break;
                    case 'cleaning':
                        iconClass = 'icon-cleaning';
                        icon = 'fas fa-broom';
                        text = `Ph√≤ng <strong>${activity.roomNumber}</strong> ${activity.action === 'completed' ? 'ƒë√£ ƒë∆∞·ª£c d·ªçn xong' : 'c·∫ßn d·ªçn d·∫πp'}`;
                        break;
                }
                
                activityDiv.innerHTML = `
                    <div class="activity-icon ${iconClass}">
                        <i class="${icon}"></i>
                    </div>
                    <div class="activity-details">
                        <div>${text}</div>
                        <div class="activity-time">
                            ${new Date(activity.time).toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' })} - 
                            ${new Date(activity.time).toLocaleDateString('vi-VN')}
                        </div>
                    </div>
                `;
                
                activityList.appendChild(activityDiv);
            });
        }

        // ================== INITIALIZATION ==================
        function initialize() {
            initializeRooms();
            updateRoomSelect();
            renderMenu();
            updateOrderSummary();
            
            if (currentRole === 'staff' || currentRole === 'management') {
                renderOrders();
                renderRooms();
                updateDashboardStats();
                generateFloorButtons();
            }
        }

        // Kh·ªüi t·∫°o khi page loads
        window.onload = function() {
            initializeLoginSystem();
            initialize();
            
            setTimeout(() => {
                if (!currentUser) {
                    addNotification('Ch√†o m·ª´ng ƒë·∫øn v·ªõi H·ªá th·ªëng Qu·∫£n l√Ω Kh√°ch s·∫°n Horizon!', 'info');
                }
            }, 1000);
        };
    </script>
</body>
</html>
