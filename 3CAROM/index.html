<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Carom 3 BƒÉng Pro - ZingPlay Style</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #00b4ff;
            --secondary-color: #ff6b00;
            --accent-color: #ffcc00;
            --dark-bg: #0a1929;
            --table-green: #1a5f23;
            --wood-brown: #8b4513;
            --light-text: #f0f8ff;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --glow: 0 0 20px rgba(0, 180, 255, 0.6);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background: linear-gradient(135deg, #0a1929 0%, #0d2b4d 100%);
            color: var(--light-text);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
        }

        .background-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(0, 180, 255, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(255, 107, 0, 0.05) 0%, transparent 20%);
            z-index: -1;
        }

        .container {
            max-width: 1200px;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 25px;
            position: relative;
        }

        /* Header */
        .game-header {
            width: 100%;
            background: linear-gradient(to right, rgba(10, 25, 41, 0.9), rgba(13, 43, 77, 0.9));
            border-radius: 20px;
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow);
            border: 2px solid rgba(0, 180, 255, 0.3);
            position: relative;
            overflow: hidden;
        }

        .game-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            font-size: 2.8rem;
            color: var(--accent-color);
            filter: drop-shadow(0 0 10px rgba(255, 204, 0, 0.7));
        }

        .logo-text h1 {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(to right, var(--primary-color), var(--accent-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .logo-text p {
            font-size: 0.9rem;
            color: #a0c8ff;
            font-family: 'Roboto', sans-serif;
        }

        .header-stats {
            display: flex;
            gap: 30px;
            align-items: center;
        }

        .online-count {
            background: rgba(0, 0, 0, 0.3);
            padding: 8px 15px;
            border-radius: 50px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            border: 1px solid rgba(0, 180, 255, 0.2);
        }

        .online-count i {
            color: #0f0;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Main Game Area */
        .main-game-area {
            display: flex;
            gap: 30px;
            width: 100%;
        }

        .left-panel {
            flex: 0 0 280px;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .player-card {
            background: linear-gradient(to bottom, rgba(20, 40, 70, 0.9), rgba(10, 25, 41, 0.9));
            border-radius: 18px;
            padding: 25px;
            box-shadow: var(--shadow);
            border: 2px solid rgba(0, 180, 255, 0.2);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .player-card.active {
            border-color: var(--primary-color);
            box-shadow: var(--glow);
        }

        .player-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(to right, var(--primary-color), transparent);
        }

        .player-info {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .player-avatar {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #2a5c8b, #4a8bc9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            border: 3px solid var(--primary-color);
            box-shadow: 0 0 15px rgba(0, 180, 255, 0.5);
        }

        .player1 .player-avatar { background: linear-gradient(135deg, #1a5f9e, #00b4ff); }
        .player2 .player-avatar { background: linear-gradient(135deg, #9e5f1a, #ff6b00); }

        .player-details h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .player1 .player-details h3 { color: var(--primary-color); }
        .player2 .player-details h3 { color: var(--secondary-color); }

        .player-details p {
            font-size: 0.9rem;
            color: #a0c8ff;
            font-family: 'Roboto', sans-serif;
        }

        .player-score {
            text-align: center;
            font-size: 3.5rem;
            font-weight: 800;
            color: white;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
            margin: 10px 0;
        }

        .player-status {
            text-align: center;
            font-size: 1rem;
            padding: 8px;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.2);
            margin-top: 10px;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .player-card.active .player-status {
            background: rgba(0, 180, 255, 0.1);
            color: #7fd9ff;
        }

        /* Power Control */
        .power-control {
            background: linear-gradient(to bottom, rgba(20, 40, 70, 0.9), rgba(10, 25, 41, 0.9));
            border-radius: 18px;
            padding: 25px;
            box-shadow: var(--shadow);
            border: 2px solid rgba(255, 204, 0, 0.2);
        }

        .power-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .power-header h3 {
            font-size: 1.4rem;
            color: var(--accent-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .power-header h3 i {
            font-size: 1.6rem;
        }

        .power-display {
            font-size: 2rem;
            font-weight: 700;
            color: white;
            text-align: center;
            margin-bottom: 15px;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }

        .power-bar-container {
            width: 100%;
            height: 300px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        #powerBar {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 0%;
            background: linear-gradient(to top, #00ff00 0%, #ffff00 30%, #ff6600 70%, #ff0000 100%);
            transition: height 0.1s ease-out;
            border-radius: 13px;
        }

        .power-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 0.9rem;
            color: #a0c8ff;
        }

        /* Spin Control */
        .spin-control {
            background: linear-gradient(to bottom, rgba(20, 40, 70, 0.9), rgba(10, 25, 41, 0.9));
            border-radius: 18px;
            padding: 25px;
            box-shadow: var(--shadow);
            border: 2px solid rgba(255, 107, 0, 0.2);
        }

        .spin-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .spin-header h3 {
            font-size: 1.4rem;
            color: var(--secondary-color);
        }

        .spin-header i {
            font-size: 1.6rem;
            color: var(--secondary-color);
        }

        .spin-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .spin-btn {
            background: linear-gradient(145deg, #2a5c8b, #1e3a5f);
            border: none;
            border-radius: 12px;
            padding: 15px;
            color: white;
            font-family: 'Roboto', sans-serif;
            font-weight: 500;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            border: 2px solid transparent;
        }

        .spin-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .spin-btn.active {
            background: linear-gradient(145deg, #ff6b00, #cc5500);
            border-color: var(--secondary-color);
            box-shadow: 0 0 15px rgba(255, 107, 0, 0.5);
        }

        .spin-btn i {
            font-size: 1.4rem;
        }

        /* Game Table */
        .game-table-container {
            flex: 1;
            position: relative;
        }

        .table-wrapper {
            position: relative;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 
                0 0 60px rgba(0, 180, 255, 0.3),
                inset 0 0 100px rgba(0, 0, 0, 0.5);
            border: 15px solid var(--wood-brown);
            background: var(--wood-brown);
        }

        #gameCanvas {
            display: block;
            background: linear-gradient(to bottom, #1a5f23, #0e3a14);
            width: 100%;
        }

        .table-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 5;
        }

        .table-logo {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 80px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.8rem;
            font-weight: 700;
            border: 3px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
        }

        .cue-guide {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 12px;
            color: white;
            font-size: 0.9rem;
            max-width: 250px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 10;
        }

        .guide-text {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
        }

        .guide-text i {
            color: var(--accent-color);
        }

        /* Game Info */
        .game-info-panel {
            width: 100%;
            background: linear-gradient(to right, rgba(10, 25, 41, 0.9), rgba(13, 43, 77, 0.9));
            border-radius: 18px;
            padding: 25px;
            box-shadow: var(--shadow);
            border: 2px solid rgba(255, 204, 0, 0.2);
            margin-top: 10px;
        }

        .info-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .info-header h3 {
            font-size: 1.5rem;
            color: var(--accent-color);
        }

        .info-header i {
            font-size: 1.8rem;
            color: var(--accent-color);
        }

        .info-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .info-card {
            background: rgba(0, 0, 0, 0.2);
            padding: 18px;
            border-radius: 12px;
            border-left: 4px solid var(--primary-color);
        }

        .info-card h4 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .info-card p {
            font-family: 'Roboto', sans-serif;
            line-height: 1.5;
            color: #c0d8ff;
        }

        .key {
            display: inline-block;
            background: rgba(255, 255, 255, 0.1);
            padding: 3px 10px;
            border-radius: 6px;
            font-family: monospace;
            margin: 0 3px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Footer */
        .game-footer {
            width: 100%;
            text-align: center;
            padding: 20px;
            color: #7fa8d9;
            font-size: 0.9rem;
            font-family: 'Roboto', sans-serif;
            border-top: 1px solid rgba(0, 180, 255, 0.1);
            margin-top: 20px;
        }

        /* Responsive */
        @media (max-width: 1100px) {
            .main-game-area {
                flex-direction: column;
            }
            
            .left-panel {
                flex: 0 0 auto;
                width: 100%;
                flex-direction: row;
                flex-wrap: wrap;
            }
            
            .player-card {
                flex: 1;
                min-width: 250px;
            }
            
            .power-control, .spin-control {
                flex: 1;
                min-width: 250px;
            }
        }

        @media (max-width: 768px) {
            .game-header {
                flex-direction: column;
                gap: 15px;
                padding: 20px;
            }
            
            .header-stats {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .left-panel {
                flex-direction: column;
            }
            
            .info-content {
                grid-template-columns: 1fr;
            }
            
            .table-wrapper {
                border-width: 10px;
            }
        }

        /* Ball animation */
        @keyframes ballGlow {
            0%, 100% { filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.5)); }
            50% { filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.8)); }
        }

        /* Game states */
        .shot-in-progress {
            animation: pulse 1.5s infinite;
        }

        .winning-shot {
            animation: celebrate 0.5s ease-out;
        }

        @keyframes celebrate {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <div class="background-pattern"></div>
    
    <div class="container">
        <!-- Header -->
        <header class="game-header">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-billiard-ball"></i>
                </div>
                <div class="logo-text">
                    <h1>CAROM 3 BƒÇNG PRO</h1>
                    <p>Phi√™n b·∫£n cao c·∫•p - ƒê·ªì h·ªça nh∆∞ ZingPlay</p>
                </div>
            </div>
            
            <div class="header-stats">
                <div class="online-count">
                    <i class="fas fa-wifi"></i>
                    <span>ƒêang online: <strong>1,245</strong></span>
                </div>
                <div class="game-mode">
                    <i class="fas fa-users"></i>
                    <span>Ch·∫ø ƒë·ªô: <strong>2 Ng∆∞·ªùi ch∆°i</strong></span>
                </div>
                <div class="sound-control">
                    <i class="fas fa-volume-up"></i>
                    <span>√Çm thanh: <strong>B·∫≠t</strong></span>
                </div>
            </div>
        </header>
        
        <!-- Main Game Area -->
        <div class="main-game-area">
            <!-- Left Panel -->
            <div class="left-panel">
                <!-- Player 1 Card -->
                <div class="player-card player1 active" id="player1Card">
                    <div class="player-info">
                        <div class="player-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="player-details">
                            <h3>NG∆Ø·ªúI CH∆†I 1</h3>
                            <p>ƒê·∫øn l∆∞·ª£t ƒë√°nh</p>
                        </div>
                    </div>
                    <div class="player-score" id="score1">0</div>
                    <div class="player-status" id="status1">
                        <i class="fas fa-mouse-pointer"></i> Nh·∫•p v√†o bi c√°i ƒë·ªÉ b·∫Øt ƒë·∫ßu
                    </div>
                </div>
                
                <!-- Player 2 Card -->
                <div class="player-card player2" id="player2Card">
                    <div class="player-info">
                        <div class="player-avatar">
                            <i class="fas fa-user-friends"></i>
                        </div>
                        <div class="player-details">
                            <h3>NG∆Ø·ªúI CH∆†I 2</h3>
                            <p>ƒêang ch·ªù l∆∞·ª£t</p>
                        </div>
                    </div>
                    <div class="player-score" id="score2">0</div>
                    <div class="player-status" id="status2">
                        S·∫µn s√†ng
                    </div>
                </div>
                
                <!-- Power Control -->
                <div class="power-control">
                    <div class="power-header">
                        <h3><i class="fas fa-tachometer-alt"></i> ƒêI·ªÄU KHI·ªÇN L·ª∞C</h3>
                    </div>
                    <div class="power-display" id="powerValue">0%</div>
                    <div class="power-bar-container">
                        <div id="powerBar"></div>
                    </div>
                    <div class="power-labels">
                        <span>Y·∫øu</span>
                        <span>V·ª´a</span>
                        <span>M·∫°nh</span>
                    </div>
                </div>
                
                <!-- Spin Control -->
                <div class="spin-control">
                    <div class="spin-header">
                        <i class="fas fa-sync-alt"></i>
                        <h3>ƒêI·ªÄU KHI·ªÇN √ÅP PH√ä</h3>
                    </div>
                    <div class="spin-buttons">
                        <button class="spin-btn active" data-spin="none" id="spinNone">
                            <i class="fas fa-ban"></i>
                            <span>Kh√¥ng</span>
                        </button>
                        <button class="spin-btn" data-spin="top" id="spinTop">
                            <i class="fas fa-arrow-up"></i>
                            <span>Tr√™n</span>
                        </button>
                        <button class="spin-btn" data-spin="bottom" id="spinBottom">
                            <i class="fas fa-arrow-down"></i>
                            <span>D∆∞·ªõi</span>
                        </button>
                        <button class="spin-btn" data-spin="left" id="spinLeft">
                            <i class="fas fa-arrow-left"></i>
                            <span>Tr√°i</span>
                        </button>
                        <button class="spin-btn" data-spin="right" id="spinRight">
                            <i class="fas fa-arrow-right"></i>
                            <span>Ph·∫£i</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Game Table -->
            <div class="game-table-container">
                <div class="table-wrapper">
                    <canvas id="gameCanvas" width="900" height="450"></canvas>
                    <div class="table-overlay"></div>
                    <div class="table-logo">HTK</div>
                    
                    <div class="cue-guide">
                        <div class="guide-text">
                            <i class="fas fa-mouse-pointer"></i>
                            <strong>NH·∫§P v√†o bi c√°i</strong> ƒë·ªÉ hi·ªán c√¢y c∆°
                        </div>
                        <div class="guide-text">
                            <i class="fas fa-arrows-alt-h"></i>
                            <strong>K√âO chu·ªôt</strong> ƒë·ªÉ l·∫•y l·ª±c & nh·∫Øm
                        </div>
                        <div class="guide-text">
                            <i class="fas fa-hand-pointer"></i>
                            <strong>TH·∫¢ chu·ªôt</strong> ƒë·ªÉ th·ª±c hi·ªán c√∫ ƒë√°nh
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Game Info Panel -->
        <div class="game-info-panel">
            <div class="info-header">
                <i class="fas fa-info-circle"></i>
                <h3>H∆Ø·ªöNG D·∫™N CHI TI·∫æT & LU·∫¨T CH∆†I</h3>
            </div>
            <div class="info-content">
                <div class="info-card">
                    <h4><i class="fas fa-bullseye"></i> M·ª§C TI√äU</h4>
                    <p>D√πng bi c√°i (tr·∫Øng) ch·∫°m C·∫¢ HAI bi m·ª•c ti√™u (ƒë·ªè + v√†ng) sau khi bi c√°i ƒë√£ n·∫©y √çT NH·∫§T 3 BƒÇNG. M·ªói c√∫ ƒë√°nh h·ª£p l·ªá ƒë∆∞·ª£c 1 ƒëi·ªÉm.</p>
                </div>
                <div class="info-card">
                    <h4><i class="fas fa-gamepad"></i> ƒêI·ªÄU KHI·ªÇN</h4>
                    <p><span class="key">CLICK</span> bi c√°i ‚Üí <span class="key">K√âO</span> chu·ªôt l·∫•y l·ª±c ‚Üí <span class="key">TH·∫¢</span> chu·ªôt ƒë·ªÉ ƒë√°nh. Ch·ªçn √°p ph√™ ƒë·ªÉ ƒëi·ªÅu khi·ªÉn ƒë∆∞·ªùng bi.</p>
                </div>
                <div class="info-card">
                    <h4><i class="fas fa-magic"></i> √ÅP PH√ä (SPIN)</h4>
                    <p><strong>Tr√™n:</strong> Bi l√πi ‚Ä¢ <strong>D∆∞·ªõi:</strong> Bi ti·∫øn ‚Ä¢ <strong>Tr√°i/Ph·∫£i:</strong> ƒê·ªïi h∆∞·ªõng sau ch·∫°m bƒÉng.</p>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <footer class="game-footer">
            <p>¬© 2023 Carom 3 BƒÉng Pro - Phi√™n b·∫£n ZingPlay Style | Thi·∫øt k·∫ø b·ªüi HTK Studio</p>
            <p>M√¥n th·ªÉ thao tr√≠ tu·ªá ƒë·∫≥ng c·∫•p - ƒê·ªì h·ªça ·∫•n t∆∞·ª£ng - V·∫≠t l√Ω ch√¢n th·ª±c</p>
        </footer>
    </div>

    <script>
        // ==================== C·∫§U H√åNH GAME ====================
        const CONFIG = {
            BALL_RADIUS: 12,
            FRICTION: 0.988,
            MAX_POWER: 200,
            MIN_MOVING_SPEED: 0.03,
            SPIN_STRENGTH: 0.9,
            CUE_MIN_LENGTH: 40,
            CUE_MAX_LENGTH: 220,
            SLOWMO_SCALE: 0.25,
            SLOWMO_DURATION: 200,
            TABLE_WIDTH: 900,
            TABLE_HEIGHT: 450
        };

        // ==================== THAM CHI·∫æU DOM ====================
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const powerBar = document.getElementById('powerBar');
        const powerValue = document.getElementById('powerValue');
        const score1El = document.getElementById('score1');
        const score2El = document.getElementById('score2');
        const status1El = document.getElementById('status1');
        const status2El = document.getElementById('status2');
        const player1Card = document.getElementById('player1Card');
        const player2Card = document.getElementById('player2Card');
        const spinButtons = document.querySelectorAll('.spin-btn');
        const cueGuide = document.querySelector('.cue-guide');

        // ==================== L·ªöP BI V·ªöI HI·ªÜU ·ª®NG ====================
        class Ball {
            constructor(x, y, color, type, glowColor = null) {
                this.x = x;
                this.y = y;
                this.vx = 0;
                this.vy = 0;
                this.spinX = 0;
                this.spinY = 0;
                this.color = color;
                this.type = type;
                this.glowColor = glowColor || color;
                this.hitWallX = false;
                this.hitWallY = false;
                this.glowIntensity = 0;
                this.trail = [];
                this.maxTrailLength = 8;
            }

            moving() {
                return Math.hypot(this.vx, this.vy) > CONFIG.MIN_MOVING_SPEED;
            }

            updateTrail() {
                if (this.moving()) {
                    this.trail.unshift({x: this.x, y: this.y});
                    if (this.trail.length > this.maxTrailLength) {
                        this.trail.pop();
                    }
                } else if (this.trail.length > 0) {
                    this.trail.pop();
                }
            }

            draw() {
                // V·∫Ω v·ªát di chuy·ªÉn
                for (let i = 0; i < this.trail.length; i++) {
                    const alpha = (this.trail.length - i) / this.trail.length * 0.3;
                    const radius = CONFIG.BALL_RADIUS * (i / this.trail.length * 0.5 + 0.5);
                    
                    ctx.beginPath();
                    ctx.arc(this.trail[i].x, this.trail[i].y, radius, 0, Math.PI * 2);
                    ctx.fillStyle = this.color.replace(')', `, ${alpha})`).replace('rgb', 'rgba');
                    ctx.fill();
                }

                // V·∫Ω hi·ªáu ·ª©ng glow
                if (this.glowIntensity > 0) {
                    const gradient = ctx.createRadialGradient(
                        this.x, this.y, CONFIG.BALL_RADIUS,
                        this.x, this.y, CONFIG.BALL_RADIUS * 2
                    );
                    gradient.addColorStop(0, this.glowColor.replace(')', `, ${this.glowIntensity})`).replace('rgb', 'rgba'));
                    gradient.addColorStop(1, 'transparent');
                    
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, CONFIG.BALL_RADIUS * 2, 0, Math.PI * 2);
                    ctx.fillStyle = gradient;
                    ctx.fill();
                    this.glowIntensity *= 0.9;
                }

                // V·∫Ω bi ch√≠nh
                ctx.beginPath();
                ctx.arc(this.x, this.y, CONFIG.BALL_RADIUS, 0, Math.PI * 2);
                
                // Gradient cho bi
                const ballGradient = ctx.createRadialGradient(
                    this.x - CONFIG.BALL_RADIUS/3, this.y - CONFIG.BALL_RADIUS/3, 1,
                    this.x, this.y, CONFIG.BALL_RADIUS
                );
                
                if (this.type === 'cue') {
                    ballGradient.addColorStop(0, '#ffffff');
                    ballGradient.addColorStop(0.7, '#f0f0f0');
                    ballGradient.addColorStop(1, '#d0d0d0');
                } else if (this.type === 'red') {
                    ballGradient.addColorStop(0, '#ff9999');
                    ballGradient.addColorStop(0.7, '#ff3333');
                    ballGradient.addColorStop(1, '#cc0000');
                } else if (this.type === 'yellow') {
                    ballGradient.addColorStop(0, '#ffff99');
                    ballGradient.addColorStop(0.7, '#ffff33');
                    ballGradient.addColorStop(1, '#ffcc00');
                }
                
                ctx.fillStyle = ballGradient;
                ctx.fill();
                
                // Vi·ªÅn bi
                ctx.strokeStyle = this.type === 'cue' ? '#aaa' : '#000';
                ctx.lineWidth = 1.5;
                ctx.stroke();
                
                // S·ªë cho bi m·ª•c ti√™u
                if (this.type !== 'cue') {
                    ctx.fillStyle = '#fff';
                    ctx.font = `bold ${CONFIG.BALL_RADIUS}px Arial`;
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText(this.type === 'red' ? '1' : '2', this.x, this.y);
                }
                
                // ƒêi·ªÉm ƒë√°nh √°p ph√™
                if (this.type === 'cue' && (this.spinX !== 0 || this.spinY !== 0)) {
                    const spinX = this.spinX * CONFIG.BALL_RADIUS * 0.8;
                    const spinY = this.spinY * CONFIG.BALL_RADIUS * 0.8;
                    
                    ctx.beginPath();
                    ctx.arc(this.x + spinX, this.y + spinY, 4, 0, Math.PI * 2);
                    ctx.fillStyle = '#ff0000';
                    ctx.fill();
                    ctx.strokeStyle = '#fff';
                    ctx.lineWidth = 1;
                    ctx.stroke();
                }
            }

            applySpin() {
                this.vx += this.spinX * CONFIG.SPIN_STRENGTH;
                this.vy += this.spinY * CONFIG.SPIN_STRENGTH;
                this.spinX = 0;
                this.spinY = 0;
            }
        }

        // T·∫°o bi v·ªõi v·ªã tr√≠ ƒë·∫πp
        const white = new Ball(180, 225, '#ffffff', 'cue', 'rgba(255, 255, 255, 0.7)');
        const red = new Ball(450, 160, '#ff3333', 'red', 'rgba(255, 50, 50, 0.5)');
        const yellow = new Ball(620, 290, '#ffff33', 'yellow', 'rgba(255, 255, 50, 0.5)');
        const balls = [white, red, yellow];

        // ==================== TR·∫†NG TH√ÅI GAME ====================
        let gameState = {
            currentPlayer: 1,
            scores: [0, 0],
            cushionHits: 0,
            hitRed: false,
            hitYellow: false,
            shotInProgress: false,
            cueActive: false,
            cueDragging: false,
            cueStartX: 0,
            cueStartY: 0,
            cueEndX: 0,
            cueEndY: 0,
            power: 0,
            spinType: 'none',
            replay: [],
            replaying: false,
            replayIndex: 0,
            timeScale: 1,
            showGuide: true
        };

        // ==================== V·∫º B√ÄN & HI·ªÜU ·ª®NG ====================
        function drawBackground() {
            // N·ªÅn b√†n v·ªõi gradient
            const tableGradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            tableGradient.addColorStop(0, '#2a7a2f');
            tableGradient.addColorStop(0.5, '#1a5f23');
            tableGradient.addColorStop(1, '#0e3a14');
            
            ctx.fillStyle = tableGradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Hi·ªáu ·ª©ng v·∫£i
            ctx.strokeStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.lineWidth = 1;
            
            // ƒê∆∞·ªùng k·∫ª carom
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.15)';
            ctx.lineWidth = 2;
            
            // V√≤ng tr√≤n gi·ªØa b√†n
            ctx.beginPath();
            ctx.arc(canvas.width/2, canvas.height/2, 100, 0, Math.PI * 2);
            ctx.stroke();
            
            // ƒêi·ªÉm carom
            const points = [
                [canvas.width/2, canvas.height/2],
                [150, 150], [750, 150],
                [150, 300], [750, 300]
            ];
            
            points.forEach(point => {
                ctx.beginPath();
                ctx.arc(point[0], point[1], 5, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
                ctx.fill();
            });
            
            // Vi·ªÅn b√†n v·ªõi hi·ªáu ·ª©ng 3D
            ctx.strokeStyle = '#5b2c06';
            ctx.lineWidth = 20;
            ctx.strokeRect(0, 0, canvas.width, canvas.height);
            
            ctx.strokeStyle = '#8b4513';
            ctx.lineWidth = 8;
            ctx.strokeRect(10, 10, canvas.width-20, canvas.height-20);
            
            ctx.strokeStyle = '#a0522d';
            ctx.lineWidth = 2;
            ctx.strokeRect(15, 15, canvas.width-30, canvas.height-30);
        }

        function drawCue() {
            if (!gameState.cueActive) return;
            
            const dx = gameState.cueEndX - gameState.cueStartX;
            const dy = gameState.cueEndY - gameState.cueStartY;
            const distance = Math.hypot(dx, dy);
            const angle = Math.atan2(dy, dx);
            
            // T√≠nh l·ª±c
            const maxDrag = 200;
            const powerRatio = Math.min(distance / maxDrag, 1);
            gameState.power = powerRatio * CONFIG.MAX_POWER;
            
            // C·∫≠p nh·∫≠t thanh l·ª±c
            const percent = Math.round(gameState.power / CONFIG.MAX_POWER * 100);
            powerBar.style.height = percent + '%';
            powerValue.textContent = percent + '%';
            
            // M√†u thanh l·ª±c
            let barColor;
            if (percent < 33) barColor = '#0f0';
            else if (percent < 66) barColor = '#ff0';
            else barColor = '#f00';
            powerValue.style.color = barColor;
            
            // ƒê∆∞·ªùng ng·∫Øm
            ctx.save();
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.7)';
            ctx.setLineDash([5, 5]);
            ctx.lineWidth = 1.5;
            ctx.beginPath();
            ctx.moveTo(gameState.cueStartX, gameState.cueStartY);
            const aimLength = 500;
            ctx.lineTo(
                gameState.cueStartX - Math.cos(angle) * aimLength,
                gameState.cueStartY - Math.sin(angle) * aimLength
            );
            ctx.stroke();
            ctx.setLineDash([]);
            
            // C√¢y c∆°
            ctx.translate(gameState.cueStartX, gameState.cueStartY);
            ctx.rotate(angle);
            
            // Chi·ªÅu d√†i c∆°
            const cueLength = Math.max(CONFIG.CUE_MIN_LENGTH, Math.min(distance, CONFIG.CUE_MAX_LENGTH));
            
            // Th√¢n c∆° v·ªõi gradient
            const cueGradient = ctx.createLinearGradient(-cueLength, 0, 20, 0);
            cueGradient.addColorStop(0, '#8b5a2b');
            cueGradient.addColorStop(0.5, '#deb887');
            cueGradient.addColorStop(1, '#f5deb3');
            
            // V·∫Ω c∆°
            ctx.fillStyle = cueGradient;
            ctx.fillRect(-cueLength, -4, cueLength + 25, 8);
            
            // ƒê·∫ßu c∆°
            ctx.fillStyle = '#d2691e';
            ctx.fillRect(-cueLength - 8, -3, 8, 6);
            
            // Vi·ªÅn c∆°
            ctx.strokeStyle = '#5d4037';
            ctx.lineWidth = 1;
            ctx.strokeRect(-cueLength, -4, cueLength + 25, 8);
            
            // V·∫°ch trang tr√≠
            ctx.fillStyle = '#5d4037';
            for (let i = 0; i < 5; i++) {
                ctx.fillRect(-cueLength + 40 + i * 30, -5, 15, 10);
            }
            
            // ƒêi·ªÉm ƒë√°nh √°p ph√™
            if (gameState.spinType !== 'none') {
                let spinX = 0, spinY = 0;
                switch(gameState.spinType) {
                    case 'top': spinY = -CONFIG.BALL_RADIUS * 0.8; break;
                    case 'bottom': spinY = CONFIG.BALL_RADIUS * 0.8; break;
                    case 'left': spinX = -CONFIG.BALL_RADIUS * 0.8; break;
                    case 'right': spinX = CONFIG.BALL_RADIUS * 0.8; break;
                }
                
                ctx.fillStyle = '#ff3333';
                ctx.beginPath();
                ctx.arc(spinX, spinY, 5, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.strokeStyle = '#fff';
                ctx.lineWidth = 1;
                ctx.stroke();
            }
            
            ctx.restore();
            
            // ·∫®n h∆∞·ªõng d·∫´n khi ƒëang k√©o c∆°
            if (gameState.showGuide) {
                cueGuide.style.opacity = '0.5';
            }
        }

        // ==================== V·∫¨T L√ù & VA CH·∫†M ====================
        function handleCollision(ballA, ballB) {
            const dx = ballB.x - ballA.x;
            const dy = ballB.y - ballA.y;
            const distance = Math.hypot(dx, dy);
            if (distance >= CONFIG.BALL_RADIUS * 2 || distance === 0) return;

            // Hi·ªáu ·ª©ng va ch·∫°m m·∫°nh
            if (Math.hypot(ballA.vx, ballA.vy) > 3) {
                gameState.timeScale = CONFIG.SLOWMO_SCALE;
                setTimeout(() => { gameState.timeScale = 1; }, CONFIG.SLOWMO_DURATION);
                
                // Hi·ªáu ·ª©ng glow
                ballA.glowIntensity = 0.8;
                ballB.glowIntensity = 0.8;
            }

            // Va ch·∫°m v·∫≠t l√Ω
            const nx = dx / distance;
            const ny = dy / distance;
            const tx = -ny;
            const ty = nx;
            const dpTanA = ballA.vx * tx + ballA.vy * ty;
            const dpTanB = ballB.vx * tx + ballB.vy * ty;
            const dpNormA = ballA.vx * nx + ballA.vy * ny;
            const dpNormB = ballB.vx * nx + ballB.vy * ny;

            const m1 = (dpNormA + dpNormB * 2) / 3;
            const m2 = (dpNormA * 2 + dpNormB) / 3;

            ballA.vx = tx * dpTanA + nx * m2 * 0.98;
            ballA.vy = ty * dpTanA + ny * m2 * 0.98;
            ballB.vx = tx * dpTanB + nx * m1 * 0.98;
            ballB.vy = ty * dpTanB + ny * m1 * 0.98;

            // ƒê√°nh d·∫•u ch·∫°m bi m·ª•c ti√™u
            if (ballA === white || ballB === white) {
                if (ballA === red || ballB === red) gameState.hitRed = true;
                if (ballA === yellow || ballB === yellow) gameState.hitYellow = true;
            }
        }

        function updatePhysics() {
            balls.forEach(ball => {
                // C·∫≠p nh·∫≠t v·∫øt di chuy·ªÉn
                ball.updateTrail();
                
                // Di chuy·ªÉn v·ªõi timescale
                ball.x += ball.vx * gameState.timeScale;
                ball.y += ball.vy * gameState.timeScale;
                
                // Ma s√°t
                ball.vx *= CONFIG.FRICTION;
                ball.vy *= CONFIG.FRICTION;

                // Va ch·∫°m v·ªõi bƒÉng
                if (ball.x < CONFIG.BALL_RADIUS && !ball.hitWallX) {
                    ball.vx = Math.abs(ball.vx) * 0.94;
                    // √Åp ph√™ ·∫£nh h∆∞·ªüng
                    if (ball.spinX !== 0) ball.vy += ball.spinX * 0.4;
                    ball.hitWallX = true;
                    if (ball === white) {
                        gameState.cushionHits++;
                        ball.glowIntensity = 0.5;
                    }
                }
                if (ball.x > canvas.width - CONFIG.BALL_RADIUS && !ball.hitWallX) {
                    ball.vx = -Math.abs(ball.vx) * 0.94;
                    if (ball.spinX !== 0) ball.vy += ball.spinX * 0.4;
                    ball.hitWallX = true;
                    if (ball === white) {
                        gameState.cushionHits++;
                        ball.glowIntensity = 0.5;
                    }
                }
                if (ball.y < CONFIG.BALL_RADIUS && !ball.hitWallY) {
                    ball.vy = Math.abs(ball.vy) * 0.94;
                    if (ball.spinY !== 0) ball.vx += ball.spinY * 0.4;
                    ball.hitWallY = true;
                    if (ball === white) {
                        gameState.cushionHits++;
                        ball.glowIntensity = 0.5;
                    }
                }
                if (ball.y > canvas.height - CONFIG.BALL_RADIUS && !ball.hitWallY) {
                    ball.vy = -Math.abs(ball.vy) * 0.94;
                    if (ball.spinY !== 0) ball.vx += ball.spinY * 0.4;
                    ball.hitWallY = true;
                    if (ball === white) {
                        gameState.cushionHits++;
                        ball.glowIntensity = 0.5;
                    }
                }

                // Reset c·ªù va ch·∫°m
                if (ball.x > CONFIG.BALL_RADIUS && ball.x < canvas.width - CONFIG.BALL_RADIUS) ball.hitWallX = false;
                if (ball.y > CONFIG.BALL_RADIUS && ball.y < canvas.height - CONFIG.BALL_RADIUS) ball.hitWallY = false;
            });

            // Ki·ªÉm tra va ch·∫°m gi·ªØa c√°c bi
            for (let i = 0; i < balls.length; i++) {
                for (let j = i + 1; j < balls.length; j++) {
                    handleCollision(balls[i], balls[j]);
                }
            }
        }

        // ==================== LOGIC GAME ====================
        function startNewShot() {
            const dx = gameState.cueEndX - gameState.cueStartX;
            const dy = gameState.cueEndY - gameState.cueStartY;
            const distance = Math.hypot(dx, dy) || 1;
            
            // T√≠nh l·ª±c
            const powerFactor = gameState.power * 0.22;
            
            // ƒê·∫∑t v·∫≠n t·ªëc (ng∆∞·ª£c h∆∞·ªõng k√©o)
            white.vx = (-dx / distance) * powerFactor;
            white.vy = (-dy / distance) * powerFactor;
            
            // √Åp d·ª•ng √°p ph√™
            switch(gameState.spinType) {
                case 'top':
                    white.spinY = -CONFIG.SPIN_STRENGTH;
                    white.vy *= 0.65;
                    break;
                case 'bottom':
                    white.spinY = CONFIG.SPIN_STRENGTH;
                    white.vy *= 1.35;
                    break;
                case 'left':
                    white.spinX = -CONFIG.SPIN_STRENGTH;
                    break;
                case 'right':
                    white.spinX = CONFIG.SPIN_STRENGTH;
                    break;
            }
            
            white.applySpin();
            
            // Reset tr·∫°ng th√°i
            gameState.power = 0;
            gameState.cueActive = false;
            gameState.cueDragging = false;
            gameState.shotInProgress = true;
            gameState.replay = [];
            gameState.cushionHits = 0;
            gameState.hitRed = false;
            gameState.hitYellow = false;
            gameState.showGuide = false;
            
            // Reset thanh l·ª±c
            powerBar.style.height = '0%';
            powerValue.textContent = '0%';
            powerValue.style.color = '#0f0';
            
            // C·∫≠p nh·∫≠t UI
            updateStatus(`ƒêang ƒë√°nh... (BƒÉng: 0)`);
            cueGuide.style.opacity = '0.2';
        }

        function checkShotEnd() {
            if (!gameState.shotInProgress || balls.some(b => b.moving())) return false;

            gameState.shotInProgress = false;
            let pointScored = false;

            // Ki·ªÉm tra ƒëi·ªÉm
            if (gameState.cushionHits >= 3 && gameState.hitRed && gameState.hitYellow) {
                gameState.scores[gameState.currentPlayer - 1]++;
                pointScored = true;
                
                // Hi·ªáu ·ª©ng ƒÉn ƒëi·ªÉm
                const playerCard = gameState.currentPlayer === 1 ? player1Card : player2Card;
                playerCard.classList.add('winning-shot');
                setTimeout(() => playerCard.classList.remove('winning-shot'), 500);
                
                // Replay
                gameState.replaying = true;
                gameState.replayIndex = 0;
                if (gameState.replay.length === 0) {
                    gameState.replay = balls.map(b => ({ x: b.x, y: b.y }));
                }
            }

            // Chuy·ªÉn l∆∞·ª£t
            gameState.currentPlayer = gameState.currentPlayer === 1 ? 2 : 1;
            gameState.showGuide = true;

            // C·∫≠p nh·∫≠t giao di·ªán
            updateScores();
            updatePlayerTurnDisplay();
            updateStatus(pointScored ? `üéØ GHI ƒêI·ªÇM! (+1)` : `L∆∞·ª£t k·∫ø ti·∫øp...`);
            cueGuide.style.opacity = '1';

            return true;
        }

        // ==================== C·∫¨P NH·∫¨T GIAO DI·ªÜN ====================
        function updateScores() {
            score1El.textContent = gameState.scores[0];
            score2El.textContent = gameState.scores[1];
            
            // Hi·ªáu ·ª©ng khi c·∫≠p nh·∫≠t ƒëi·ªÉm
            score1El.classList.add('shot-in-progress');
            score2El.classList.add('shot-in-progress');
            setTimeout(() => {
                score1El.classList.remove('shot-in-progress');
                score2El.classList.remove('shot-in-progress');
            }, 300);
        }

        function updatePlayerTurnDisplay() {
            const isPlayer1Turn = gameState.currentPlayer === 1;
            
            player1Card.classList.toggle('active', isPlayer1Turn);
            player2Card.classList.toggle('active', !isPlayer1Turn);
            
            if (isPlayer1Turn) {
                status1El.innerHTML = '<i class="fas fa-mouse-pointer"></i> ƒê·∫øn l∆∞·ª£t b·∫°n!';
                status2El.innerHTML = 'ƒêang ch·ªù l∆∞·ª£t...';
            } else {
                status1El.innerHTML = 'ƒêang ch·ªù l∆∞·ª£t...';
                status2El.innerHTML = '<i class="fas fa-mouse-pointer"></i> ƒê·∫øn l∆∞·ª£t b·∫°n!';
            }
        }

        function updateStatus(message) {
            const statusEl = gameState.currentPlayer === 1 ? status1El : status2El;
            if (gameState.shotInProgress) {
                statusEl.innerHTML = `<i class="fas fa-spinner fa-spin"></i> ƒêang ƒë√°nh... (BƒÉng: ${gameState.cushionHits})`;
            } else {
                statusEl.innerHTML = message;
            }
        }

        // ==================== X·ª¨ L√ù ƒê·∫¶U V√ÄO ====================
        canvas.addEventListener('mousedown', (e) => {
            if (gameState.shotInProgress || gameState.replaying) return;
            
            const rect = canvas.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;
            
            // Ki·ªÉm tra click v√†o bi c√°i
            const distToWhite = Math.hypot(mouseX - white.x, mouseY - white.y);
            if (distToWhite <= CONFIG.BALL_RADIUS * 2) {
                gameState.cueActive = true;
                gameState.cueDragging = true;
                gameState.cueStartX = white.x;
                gameState.cueStartY = white.y;
                gameState.cueEndX = mouseX;
                gameState.cueEndY = mouseY;
                updateStatus('K√©o chu·ªôt ƒë·ªÉ l·∫•y l·ª±c...');
                
                // Hi·ªáu ·ª©ng click
                white.glowIntensity = 0.7;
            }
        });

        canvas.addEventListener('mousemove', (e) => {
            if (!gameState.cueDragging) return;
            
            const rect = canvas.getBoundingClientRect();
            gameState.cueEndX = e.clientX - rect.left;
            gameState.cueEndY = e.clientY - rect.top;
            
            // C·∫≠p nh·∫≠t tr·∫°ng th√°i khi k√©o
            const dx = gameState.cueEndX - gameState.cueStartX;
            const dy = gameState.cueEndY - gameState.cueStartY;
            const distance = Math.hypot(dx, dy);
            
            if (distance > 50) {
                updateStatus(`L·ª±c: ${Math.round(gameState.power / CONFIG.MAX_POWER * 100)}% - Th·∫£ chu·ªôt ƒë·ªÉ ƒë√°nh`);
            }
        });

        canvas.addEventListener('mouseup', (e) => {
            if (gameState.cueDragging) {
                if (gameState.power > 20) {
                    startNewShot();
                } else {
                    gameState.cueActive = false;
                    gameState.cueDragging = false;
                    updateStatus('L·ª±c qu√° y·∫øu! K√©o xa h∆°n.');
                    cueGuide.style.opacity = '1';
                }
            }
        });

        canvas.addEventListener('mouseleave', (e) => {
            if (gameState.cueDragging) {
                gameState.cueActive = false;
                gameState.cueDragging = false;
                updateStatus('Chu·ªôt ra ngo√†i b√†n. Th·ª≠ l·∫°i!');
                cueGuide.style.opacity = '1';
            }
        });

        // X·ª≠ l√Ω n√∫t √°p ph√™
        spinButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                spinButtons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                gameState.spinType = btn.dataset.spin;
                
                // Hi·ªáu ·ª©ng click
                btn.style.transform = 'scale(0.95)';
                setTimeout(() => btn.style.transform = '', 150);
                
                if (gameState.cueActive) {
                    updateStatus(`√Åp ph√™: ${btn.querySelector('span').textContent} - Ti·∫øp t·ª•c k√©o...`);
                }
            });
        });

        // ==================== V√íNG L·∫∂P GAME CH√çNH ====================
        function gameLoop() {
            drawBackground();

            if (gameState.replaying) {
                const frame = gameState.replay[gameState.replayIndex];
                if (frame) {
                    balls.forEach((ball, idx) => {
                        ball.x = frame[idx].x;
                        ball.y = frame[idx].y;
                    });
                }
                gameState.replayIndex++;
                if (gameState.replayIndex >= gameState.replay.length) {
                    gameState.replaying = false;
                }
            } else {
                if (gameState.shotInProgress) {
                    gameState.replay.push(balls.map(b => ({ x: b.x, y: b.y })));
                    if (gameState.replay.length > 200) gameState.replay.shift();
                    updatePhysics();
                }
                checkShotEnd();
            }

            balls.forEach(ball => ball.draw());
            drawCue();

            requestAnimationFrame(gameLoop);
        }

        // ==================== KH·ªûI ƒê·ªòNG ====================
        // Thi·∫øt l·∫≠p ban ƒë·∫ßu
        document.getElementById('spinNone').classList.add('active');
        
        updateScores();
        updatePlayerTurnDisplay();
        updateStatus('Nh·∫•p v√†o bi c√°i ƒë·ªÉ b·∫Øt ƒë·∫ßu!');
        
        // Hi·ªáu ·ª©ng kh·ªüi ƒë·ªông
        setTimeout(() => {
            white.glowIntensity = 0.5;
            setTimeout(() => { white.glowIntensity = 0; }, 1000);
        }, 500);
        
        gameLoop();
    </script>
</body>
</html>
