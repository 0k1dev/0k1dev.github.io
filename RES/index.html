<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá Th·ªëng Qu·∫£n L√Ω Kh√°ch S·∫°n & Nh√† H√†ng Cao C·∫•p Horizon</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üè®</text></svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        h1 {
            text-align: center;
            font-size: 2.8em;
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .hotel-info {
            text-align: center;
            color: #666;
            font-size: 1.1em;
            margin-top: 10px;
        }

        .view-toggle {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 25px;
            flex-wrap: wrap;
        }

        .view-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .view-btn.active {
            background: linear-gradient(135deg, #3498db 0%, #2c3e50 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }

        .view-btn:not(.active) {
            background: #e9ecef;
            color: #666;
        }

        .view-btn:not(.active):hover {
            background: #dee2e6;
        }

        .view-content {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .view-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Customer View */
        .customer-view {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .customer-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        @media (max-width: 1200px) {
            .customer-info {
                grid-template-columns: 1fr;
            }
        }

        .room-select, .customer-details {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            border: 1px solid #e9ecef;
        }

        .room-select label, .customer-details label {
            display: block;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .room-select select, .customer-details input, .customer-details select {
            width: 100%;
            padding: 15px;
            font-size: 1.1em;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            margin-bottom: 15px;
            transition: border 0.3s;
        }

        .room-select select:focus, .customer-details input:focus, .customer-details select:focus {
            border-color: #3498db;
            outline: none;
        }

        .room-price-display {
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin-top: 15px;
            font-weight: bold;
            font-size: 1.2em;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .menu-section {
            margin-bottom: 30px;
        }

        .menu-section h2 {
            margin-bottom: 20px;
            color: #2c3e50;
            font-size: 1.8em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .menu-item {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid #e9ecef;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .menu-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            border-color: #3498db;
        }

        .menu-item.highlight {
            background: linear-gradient(135deg, #fff9db 0%, #ffec99 100%);
            border-color: #ffd43b;
        }

        .menu-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .menu-name {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 1.2em;
        }

        .menu-category {
            font-size: 0.8em;
            background: #e9ecef;
            padding: 3px 10px;
            border-radius: 10px;
            display: inline-block;
            margin-bottom: 10px;
        }

        .menu-price {
            color: #e74c3c;
            font-weight: bold;
            font-size: 1.3em;
        }

        .order-summary {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            border: 1px solid #e9ecef;
        }

        .order-summary h3 {
            margin-bottom: 20px;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .order-items {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            min-height: 150px;
            border: 1px solid #dee2e6;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #f1f1f1;
        }

        .order-item:last-child {
            border-bottom: none;
        }

        .item-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .item-qty {
            font-weight: bold;
            min-width: 30px;
            text-align: center;
        }

        .qty-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: none;
            background: #3498db;
            color: white;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .remove-btn {
            background: #e74c3c;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: none;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .order-total {
            display: flex;
            justify-content: space-between;
            font-size: 1.5em;
            font-weight: bold;
            padding-top: 15px;
            border-top: 2px solid #dee2e6;
            color: #2c3e50;
        }

        .order-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .order-btn:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3);
        }

        .order-btn:disabled {
            background: #95a5a6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Staff View */
        .staff-view {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 1400px) {
            .staff-view {
                grid-template-columns: 1fr;
            }
        }

        .orders-panel, .rooms-panel, .dashboard-panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .dashboard-panel {
            grid-column: 1 / -1;
        }

        .orders-panel h2, .rooms-panel h2, .dashboard-panel h2 {
            margin-bottom: 20px;
            color: #2c3e50;
            font-size: 1.8em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .filter-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 20px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .filter-btn.active {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }

        .order-card {
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s;
        }

        .order-card.high-priority {
            border-color: #e74c3c;
            background: #fff5f5;
        }

        .order-card.medium-priority {
            border-color: #f39c12;
            background: #fff9e6;
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f1f1f1;
        }

        .order-room {
            font-size: 1.3em;
            font-weight: bold;
            color: #3498db;
        }

        .order-time {
            font-size: 0.9em;
            color: #666;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .order-priority {
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .priority-high {
            background: #e74c3c;
            color: white;
        }

        .priority-medium {
            background: #f39c12;
            color: white;
        }

        .priority-low {
            background: #27ae60;
            color: white;
        }

        .order-items {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            white-space: pre-wrap;
            line-height: 1.6;
        }

        .order-actions {
            display: flex;
            gap: 10px;
        }

        .complete-btn, .cancel-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .complete-btn {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
        }

        .cancel-btn {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
        }

        .rooms-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .floor-select {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }

        .floor-btn {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            border: 2px solid #ddd;
            background: white;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .floor-btn.active {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }

        .rooms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .room-card {
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s;
            position: relative;
        }

        .room-card.vip {
            border-color: #f1c40f;
            background: linear-gradient(135deg, #fff9db 0%, #ffec99 100%);
        }

        .room-card.suite {
            border-color: #9b59b6;
            background: linear-gradient(135deg, #f5eef8 0%, #e8daef 100%);
        }

        .room-card.occupied {
            border-color: #27ae60;
        }

        .room-card.need-cleaning {
            border-color: #e74c3c;
        }

        .room-header-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .room-number {
            font-size: 1.3em;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .room-type {
            font-size: 0.8em;
            padding: 3px 10px;
            border-radius: 10px;
            font-weight: bold;
        }

        .type-standard {
            background: #3498db;
            color: white;
        }

        .type-vip {
            background: #f1c40f;
            color: white;
        }

        .type-suite {
            background: #9b59b6;
            color: white;
        }

        .room-status {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
        }

        .status-occupied {
            background: #27ae60;
            color: white;
        }

        .status-empty {
            background: #95a5a6;
            color: white;
        }

        .status-cleaning {
            background: #e74c3c;
            color: white;
        }

        .room-customer {
            font-weight: bold;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .room-details {
            color: #666;
            margin-bottom: 8px;
            font-size: 0.9em;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .room-price {
            font-weight: bold;
            color: #e74c3c;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .room-actions {
            display: flex;
            gap: 10px;
        }

        .room-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            font-size: 0.9em;
        }

        .checkin-btn {
            background: #3498db;
            color: white;
        }

        .checkout-btn {
            background: #e74c3c;
            color: white;
        }

        .cleaning-btn {
            background: #f39c12;
            color: white;
        }

        .service-btn {
            background: #9b59b6;
            color: white;
        }

        /* Management View */
        .management-view {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .management-tab {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .management-tab.active {
            display: block;
        }

        .management-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .management-stat-card {
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            color: white;
            position: relative;
            overflow: hidden;
        }

        .management-stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.1);
            z-index: 1;
        }

        .management-stat-card > * {
            position: relative;
            z-index: 2;
        }

        .management-stat-card.revenue {
            background: linear-gradient(135deg, #3498db 0%, #2c3e50 100%);
        }

        .management-stat-card.occupancy {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
        }

        .management-stat-card.customers {
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
        }

        .management-stat-card.expenses {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        }

        .management-stat-label {
            font-size: 1em;
            margin-bottom: 10px;
            opacity: 0.9;
            font-weight: 600;
        }

        .management-stat-value {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .management-stat-change {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .positive-change {
            color: #2ecc71;
        }

        .negative-change {
            color: #e74c3c;
        }

        .chart-container {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid #e9ecef;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        .chart-title {
            margin-bottom: 20px;
            color: #2c3e50;
            font-size: 1.5em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chart {
            height: 300px;
            display: flex;
            align-items: flex-end;
            gap: 10px;
            padding: 20px 0;
            position: relative;
        }

        .chart-bar {
            flex: 1;
            background: #3498db;
            border-radius: 5px 5px 0 0;
            position: relative;
            transition: height 0.5s ease-out;
            min-height: 10px;
        }

        .chart-bar:hover {
            opacity: 0.8;
        }

        .chart-label {
            position: absolute;
            bottom: -25px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 0.8em;
            color: #666;
        }

        .report-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .report-table th {
            background: #f8f9fa;
            padding: 15px;
            text-align: left;
            border-bottom: 2px solid #dee2e6;
            font-weight: 600;
            color: #2c3e50;
        }

        .report-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #e9ecef;
        }

        .report-table tr:hover {
            background: #f8f9fa;
        }

        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            color: white;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.1);
            z-index: 1;
        }

        .stat-card.revenue {
            background: linear-gradient(135deg, #3498db 0%, #2c3e50 100%);
        }

        .stat-card.occupancy {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
        }

        .stat-card.rooms {
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
        }

        .stat-card.orders {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        }

        .stat-card > * {
            position: relative;
            z-index: 2;
        }

        .stat-label {
            font-size: 1em;
            margin-bottom: 10px;
            opacity: 0.9;
            font-weight: 600;
        }

        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-change {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .recent-activity {
            background: white;
            border-radius: 15px;
            padding: 20px;
            border: 1px solid #e9ecef;
        }

        .activity-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .activity-item {
            padding: 15px 0;
            border-bottom: 1px solid #f1f1f1;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            color: white;
        }

        .icon-checkin {
            background: #3498db;
        }

        .icon-checkout {
            background: #e74c3c;
        }

        .icon-order {
            background: #27ae60;
        }

        .icon-cleaning {
            background: #f39c12;
        }

        .activity-details {
            flex: 1;
        }

        .activity-time {
            font-size: 0.8em;
            color: #95a5a6;
        }

        .notifications {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            max-width: 400px;
        }

        .notification {
            background: white;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            animation: slideIn 0.3s ease-out;
            border-left: 5px solid #3498db;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .notification.success {
            border-left-color: #27ae60;
        }

        .notification.warning {
            border-left-color: #f39c12;
        }

        .notification.error {
            border-left-color: #e74c3c;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            animation: modalFadeIn 0.3s ease-out;
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-content h3 {
            margin-bottom: 25px;
            color: #2c3e50;
            font-size: 1.8em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: border 0.3s;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            border-color: #3498db;
            outline: none;
        }

        .modal-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .modal-btn {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .modal-btn.confirm {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
        }

        .modal-btn.confirm:hover {
            background: linear-gradient(135deg, #219653 0%, #27ae60 100%);
        }

        .modal-btn.cancel {
            background: #95a5a6;
            color: white;
        }

        .modal-btn.cancel:hover {
            background: #7f8c8d;
        }

        .room-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 5px 10px;
            border-radius: 10px;
            font-size: 0.7em;
            font-weight: bold;
            color: white;
        }

        .badge-new {
            background: #e74c3c;
        }

        .badge-promo {
            background: #9b59b6;
        }

        .badge-sea-view {
            background: #3498db;
        }

        .badge-balcony {
            background: #27ae60;
        }

        .badge-pool {
            background: #3498db;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #95a5a6;
        }

        .empty-state i {
            font-size: 3em;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        .highlight-room {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(52, 152, 219, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(52, 152, 219, 0); }
            100% { box-shadow: 0 0 0 0 rgba(52, 152, 219, 0); }
        }

        .service-request {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px dashed #ddd;
        }

        .service-tag {
            display: inline-block;
            background: #e8f4fc;
            color: #3498db;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 0.8em;
            margin-right: 5px;
            margin-bottom: 5px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header {
                padding: 20px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .customer-view, .orders-panel, .rooms-panel, .dashboard-panel, .management-view {
                padding: 20px;
            }
            
            .view-btn {
                padding: 10px 20px;
                font-size: 0.9em;
            }
            
            .menu-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .rooms-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
            
            .dashboard-stats, .management-stats {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
            
            .stat-value, .management-stat-value {
                font-size: 2em;
            }
            
            .staff-view, .management-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Management Grid */
        .management-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 1200px) {
            .management-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.9em;
            font-weight: normal;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        /* Progress bar */
        .progress-container {
            height: 10px;
            background: #e9ecef;
            border-radius: 5px;
            overflow: hidden;
            margin: 5px 0;
        }

        .progress-bar {
            height: 100%;
            background: #27ae60;
            border-radius: 5px;
            transition: width 0.3s ease-out;
        }

        /* Status badges */
        .status-badge {
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .status-active {
            background: #d4edda;
            color: #155724;
        }

        .status-inactive {
            background: #f8d7da;
            color: #721c24;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        /* Print styles */
        @media print {
            .view-toggle, .modal, .notifications {
                display: none !important;
            }
            
            body {
                background: white !important;
                color: black !important;
            }
            
            .container > div {
                box-shadow: none !important;
                border: 1px solid #ddd !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1><i class="fas fa-hotel"></i> Kh√°ch S·∫°n & Nh√† H√†ng Cao C·∫•p Horizon</h1>
            <div class="hotel-info">7 t·∫ßng ‚Ä¢ 70 ph√≤ng ‚Ä¢ D·ªãch v·ª• 5 sao ‚Ä¢ Qu·∫£n l√Ω chuy√™n nghi·ªáp</div>
            <div class="view-toggle">
                <button class="view-btn active" onclick="switchView('customer')">
                    <i class="fas fa-user"></i> Kh√°ch H√†ng
                </button>
                <button class="view-btn" onclick="switchView('staff')">
                    <i class="fas fa-user-tie"></i> Nh√¢n Vi√™n
                </button>
                <button class="view-btn" onclick="switchView('management')">
                    <i class="fas fa-chart-line"></i> Qu·∫£n L√Ω
                </button>
            </div>
        </div>

        <!-- Notifications -->
        <div class="notifications" id="notifications"></div>

        <!-- Customer View -->
        <div class="view-content active" id="customerView">
            <!-- (Gi·ªØ nguy√™n ph·∫ßn Customer View t·ª´ code tr∆∞·ªõc) -->
            <div class="customer-view">
                <div class="customer-info">
                    <div class="room-select">
                        <label><i class="fas fa-door-open"></i> Ch·ªçn Ph√≤ng & Lo·∫°i Ph√≤ng</label>
                        <select id="customerRoom" onchange="updateRoomDetails()">
                            <option value="">-- Ch·ªçn ph√≤ng --</option>
                        </select>
                        
                        <select id="roomTypeFilter" onchange="filterRoomsByType()">
                            <option value="all">T·∫•t c·∫£ lo·∫°i ph√≤ng</option>
                            <option value="standard">Ph√≤ng Ti√™u Chu·∫©n</option>
                            <option value="vip">Ph√≤ng VIP</option>
                            <option value="suite">Suite</option>
                        </select>
                        
                        <div id="roomDetails" class="room-price-display" style="display:none;">
                            <div id="roomTypeDisplay"></div>
                            <div id="roomPriceDisplay"></div>
                            <div id="roomFeatures"></div>
                        </div>
                    </div>

                    <div class="customer-details">
                        <label><i class="fas fa-user-circle"></i> Th√¥ng Tin Kh√°ch H√†ng</label>
                        <input type="text" id="customerName" placeholder="H·ªç v√† t√™n">
                        <input type="text" id="customerPhone" placeholder="S·ªë ƒëi·ªán tho·∫°i">
                        <input type="email" id="customerEmail" placeholder="Email">
                        <select id="customerGender">
                            <option value="">Gi·ªõi t√≠nh</option>
                            <option value="male">Nam</option>
                            <option value="female">N·ªØ</option>
                            <option value="other">Kh√°c</option>
                        </select>
                    </div>
                </div>

                <div class="menu-section">
                    <h2><i class="fas fa-utensils"></i> Th·ª±c ƒê∆°n Nh√† H√†ng - Nh·∫•n ƒë·ªÉ th√™m v√†o ƒë∆°n</h2>
                    
                    <div class="filter-controls">
                        <button class="filter-btn active" onclick="filterMenu('all')">T·∫•t c·∫£</button>
                        <button class="filter-btn" onclick="filterMenu('appetizer')">Khai v·ªã</button>
                        <button class="filter-btn" onclick="filterMenu('main')">M√≥n ch√≠nh</button>
                        <button class="filter-btn" onclick="filterMenu('drink')">ƒê·ªì u·ªëng</button>
                        <button class="filter-btn" onclick="filterMenu('dessert')">Tr√°ng mi·ªáng</button>
                    </div>
                    
                    <div class="menu-grid" id="menuGrid"></div>
                </div>

                <div class="order-summary">
                    <h3><i class="fas fa-shopping-cart"></i> ƒê∆°n H√†ng C·ªßa B·∫°n</h3>
                    <div class="order-items" id="orderItems">
                        <div class="empty-state">
                            <i class="fas fa-shopping-basket"></i>
                            <p>Ch∆∞a c√≥ m√≥n n√†o trong ƒë∆°n h√†ng</p>
                            <p>H√£y ch·ªçn m√≥n t·ª´ th·ª±c ƒë∆°n b√™n tr√™n</p>
                        </div>
                    </div>
                    
                    <div class="order-total">
                        <span>T·ªïng c·ªông:</span>
                        <span id="orderTotal">0ƒë</span>
                    </div>
                    
                    <button class="order-btn" id="submitOrderBtn" onclick="submitOrder()" disabled>
                        <i class="fas fa-paper-plane"></i> G·ª≠i ƒê∆°n H√†ng
                    </button>
                </div>
            </div>
        </div>

        <!-- Staff View -->
        <div class="view-content" id="staffView">
            <div class="staff-view">
                <!-- Orders Panel -->
                <div class="orders-panel">
                    <h2><i class="fas fa-concierge-bell"></i> ƒê∆°n ƒê·∫∑t D·ªãch V·ª•</h2>
                    
                    <div class="filter-controls">
                        <button class="filter-btn active" onclick="filterOrders('all')">T·∫•t c·∫£</button>
                        <button class="filter-btn" onclick="filterOrders('pending')">Ch·ªù x·ª≠ l√Ω</button>
                        <button class="filter-btn" onclick="filterOrders('preparing')">ƒêang chu·∫©n b·ªã</button>
                        <button class="filter-btn" onclick="filterOrders('completed')">Ho√†n th√†nh</button>
                        <button class="filter-btn" onclick="filterOrders('cancelled')">ƒê√£ h·ªßy</button>
                    </div>
                    
                    <div id="ordersList"></div>
                </div>

                <!-- Rooms Panel -->
                <div class="rooms-panel">
                    <div class="rooms-navigation">
                        <h2><i class="fas fa-bed"></i> Qu·∫£n L√Ω Ph√≤ng</h2>
                        <div class="floor-select">
                            <button class="floor-btn active" onclick="changeFloor('all')">T·∫•t c·∫£</button>
                            <!-- Floor buttons will be generated by JavaScript -->
                        </div>
                    </div>
                    
                    <div class="rooms-grid" id="roomsList"></div>
                </div>
                
                <!-- Dashboard Panel -->
                <div class="dashboard-panel">
                    <h2><i class="fas fa-tachometer-alt"></i> Th·ªëng K√™ Nhanh</h2>
                    
                    <div class="dashboard-stats">
                        <div class="stat-card revenue">
                            <div class="stat-label">Doanh Thu H√¥m Nay</div>
                            <div class="stat-value" id="todayRevenue">0ƒë</div>
                            <div class="stat-change positive-change">+12% so v·ªõi h√¥m qua</div>
                        </div>
                        <div class="stat-card occupancy">
                            <div class="stat-label">T·ª∑ L·ªá Thu√™ Ph√≤ng</div>
                            <div class="stat-value" id="occupancyRate">0%</div>
                            <div class="stat-change positive-change">+5% so v·ªõi tu·∫ßn tr∆∞·ªõc</div>
                        </div>
                        <div class="stat-card rooms">
                            <div class="stat-label">Ph√≤ng Tr·ªëng</div>
                            <div class="stat-value" id="availableRooms">70</div>
                            <div class="stat-change negative-change">-8 so v·ªõi h√¥m qua</div>
                        </div>
                        <div class="stat-card orders">
                            <div class="stat-label">ƒê∆°n H√†ng H√¥m Nay</div>
                            <div class="stat-value" id="todayOrders">0</div>
                            <div class="stat-change positive-change">+3 so v·ªõi h√¥m qua</div>
                        </div>
                    </div>
                    
                    <h3 style="margin-top: 30px; margin-bottom: 15px;"><i class="fas fa-history"></i> Ho·∫°t ƒê·ªông G·∫ßn ƒê√¢y</h3>
                    <div class="recent-activity">
                        <div class="activity-list" id="activityList"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Management View - HO√ÄN THI·ªÜN -->
        <div class="view-content" id="managementView">
            <div class="management-view">
                <!-- Management Header -->
                <div style="margin-bottom: 30px;">
                    <h2 style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                        <i class="fas fa-chart-line"></i> B·∫£ng ƒêi·ªÅu Khi·ªÉn Qu·∫£n L√Ω
                    </h2>
                    <p style="color: #666; font-size: 1.1em;">Ph√¢n t√≠ch to√†n di·ªán v√† qu·∫£n l√Ω h·ªá th·ªëng kh√°ch s·∫°n</p>
                </div>
                
                <!-- Management Tabs -->
                <div class="view-toggle" style="margin-bottom: 30px; justify-content: flex-start; background: #f8f9fa; padding: 10px; border-radius: 15px;">
                    <button class="view-btn active" onclick="switchManagementTab('overview')">
                        <i class="fas fa-tachometer-alt"></i> T·ªïng Quan
                    </button>
                    <button class="view-btn" onclick="switchManagementTab('financial')">
                        <i class="fas fa-chart-bar"></i> T√†i Ch√≠nh
                    </button>
                    <button class="view-btn" onclick="switchManagementTab('rooms')">
                        <i class="fas fa-bed"></i> Ph√≤ng ·ªêc
                    </button>
                    <button class="view-btn" onclick="switchManagementTab('customers')">
                        <i class="fas fa-users"></i> Kh√°ch H√†ng
                    </button>
                    <button class="view-btn" onclick="switchManagementTab('staff')">
                        <i class="fas fa-user-tie"></i> Nh√¢n S·ª±
                    </button>
                    <button class="view-btn" onclick="switchManagementTab('reports')">
                        <i class="fas fa-file-alt"></i> B√°o C√°o
                    </button>
                </div>
                
                <!-- Overview Tab -->
                <div class="management-tab active" id="overviewTab">
                    <div class="management-stats">
                        <div class="management-stat-card revenue">
                            <div class="management-stat-label">Doanh Thu Th√°ng N√†y</div>
                            <div class="management-stat-value" id="monthRevenue">0ƒë</div>
                            <div class="management-stat-change" id="monthRevenueChange">+15.2% so v·ªõi th√°ng tr∆∞·ªõc</div>
                        </div>
                        <div class="management-stat-card occupancy">
                            <div class="management-stat-label">T·ª∑ L·ªá Thu√™ Ph√≤ng</div>
                            <div class="management-stat-value" id="monthOccupancy">0%</div>
                            <div class="management-stat-change" id="monthOccupancyChange">+8.5% so v·ªõi th√°ng tr∆∞·ªõc</div>
                        </div>
                        <div class="management-stat-card customers">
                            <div class="management-stat-label">Kh√°ch H√†ng VIP</div>
                            <div class="management-stat-value" id="vipCustomers">0</div>
                            <div class="management-stat-change positive-change">+12% so v·ªõi th√°ng tr∆∞·ªõc</div>
                        </div>
                        <div class="management-stat-card expenses">
                            <div class="management-stat-label">Chi Ph√≠ V·∫≠n H√†nh</div>
                            <div class="management-stat-value" id="monthExpenses">0ƒë</div>
                            <div class="management-stat-change negative-change">+5.3% so v·ªõi th√°ng tr∆∞·ªõc</div>
                        </div>
                    </div>
                    
                    <div class="management-grid" style="margin-top: 30px;">
                        <div class="chart-container">
                            <div class="chart-title">
                                <i class="fas fa-chart-line"></i> Doanh Thu 6 Th√°ng G·∫ßn ƒê√¢y
                            </div>
                            <div class="chart" id="revenueTrendChart">
                                <!-- Revenue trend chart -->
                            </div>
                        </div>
                        
                        <div class="chart-container">
                            <div class="chart-title">
                                <i class="fas fa-chart-pie"></i> Ph√¢n B·ªï Doanh Thu Theo D·ªãch V·ª•
                            </div>
                            <div style="height: 300px; display: flex; justify-content: center; align-items: center;" id="revenueDistribution">
                                <!-- Revenue distribution -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="chart-container" style="margin-top: 25px;">
                        <div class="chart-title">
                            <i class="fas fa-chart-area"></i> T·ª∑ L·ªá Thu√™ Ph√≤ng Theo T·∫ßng
                        </div>
                        <div class="chart" id="floorOccupancyChart">
                            <!-- Floor occupancy chart -->
                        </div>
                    </div>
                </div>
                
                <!-- Financial Tab -->
                <div class="management-tab" id="financialTab">
                    <div class="management-grid">
                        <div class="chart-container">
                            <div class="chart-title">
                                <i class="fas fa-money-bill-wave"></i> Doanh Thu Chi Ti·∫øt
                            </div>
                            <div style="margin-bottom: 20px;">
                                <select id="financialPeriod" onchange="updateFinancialCharts()" style="padding: 8px 15px; border-radius: 8px; border: 2px solid #ddd;">
                                    <option value="month">Th√°ng n√†y</option>
                                    <option value="quarter">Qu√Ω n√†y</option>
                                    <option value="year">NƒÉm nay</option>
                                    <option value="custom">T√πy ch·ªânh</option>
                                </select>
                            </div>
                            <div class="chart" id="detailedRevenueChart">
                                <!-- Detailed revenue chart -->
                            </div>
                        </div>
                        
                        <div class="chart-container">
                            <div class="chart-title">
                                <i class="fas fa-balance-scale"></i> Chi Ph√≠ & L·ª£i Nhu·∫≠n
                            </div>
                            <div class="chart" id="expensesProfitChart">
                                <!-- Expenses vs profit chart -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="chart-container" style="margin-top: 25px;">
                        <div class="chart-title">
                            <i class="fas fa-file-invoice-dollar"></i> B√°o C√°o T√†i Ch√≠nh Chi Ti·∫øt
                        </div>
                        <table class="report-table">
                            <thead>
                                <tr>
                                    <th>Danh M·ª•c</th>
                                    <th>Doanh Thu</th>
                                    <th>Chi Ph√≠</th>
                                    <th>L·ª£i Nhu·∫≠n</th>
                                    <th>T·ª∑ L·ªá</th>
                                </tr>
                            </thead>
                            <tbody id="financialReport">
                                <!-- Financial report data -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Rooms Tab -->
                <div class="management-tab" id="roomsTab">
                    <div class="management-grid">
                        <div class="chart-container">
                            <div class="chart-title">
                                <i class="fas fa-chart-bar"></i> Hi·ªáu Su·∫•t Ph√≤ng Theo Lo·∫°i
                            </div>
                            <div class="chart" id="roomPerformanceChart">
                                <!-- Room performance chart -->
                            </div>
                        </div>
                        
                        <div class="chart-container">
                            <div class="chart-title">
                                <i class="fas fa-calendar-alt"></i> L·ªãch S·ª≠ Thu√™ Ph√≤ng
                            </div>
                            <div style="height: 300px; overflow-y: auto; padding: 10px;">
                                <table class="report-table">
                                    <thead>
                                        <tr>
                                            <th>Ph√≤ng</th>
                                            <th>Lo·∫°i</th>
                                            <th>S·ªë l·∫ßn thu√™</th>
                                            <th>Doanh thu</th>
                                            <th>T·ª∑ l·ªá thu√™</th>
                                        </tr>
                                    </thead>
                                    <tbody id="roomHistoryTable">
                                        <!-- Room history data -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <div class="chart-container" style="margin-top: 25px;">
                        <div class="chart-title">
                            <i class="fas fa-star"></i> Ph√≤ng Ph·ªï Bi·∫øn Nh·∫•t
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                            <div style="text-align: center; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                                <div style="font-size: 0.9em; color: #666; margin-bottom: 10px;">Ph√≤ng thu√™ nhi·ªÅu nh·∫•t</div>
                                <div style="font-size: 2em; font-weight: bold; color: #3498db;" id="mostBookedRoom">-</div>
                                <div style="font-size: 0.9em; color: #666;">l∆∞·ª£t thu√™</div>
                            </div>
                            
                            <div style="text-align: center; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                                <div style="font-size: 0.9em; color: #666; margin-bottom: 10px;">Doanh thu cao nh·∫•t</div>
                                <div style="font-size: 2em; font-weight: bold; color: #27ae60;" id="highestRevenueRoom">-</div>
                                <div style="font-size: 0.9em; color: #666;">VNƒê</div>
                            </div>
                            
                            <div style="text-align: center; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                                <div style="font-size: 0.9em; color: #666; margin-bottom: 10px;">Th·ªùi gian thu√™ TB</div>
                                <div style="font-size: 2em; font-weight: bold; color: #e74c3c;" id="avgStayDuration">-</div>
                                <div style="font-size: 0.9em; color: #666;">ng√†y</div>
                            </div>
                            
                            <div style="text-align: center; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                                <div style="font-size: 0.9em; color: #666; margin-bottom: 10px;">T·ª∑ l·ªá thu√™ cao nh·∫•t</div>
                                <div style="font-size: 2em; font-weight: bold; color: #9b59b6;" id="highestOccupancyRoom">-</div>
                                <div style="font-size: 0.9em; color: #666;">%</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Customers Tab -->
                <div class="management-tab" id="customersTab">
                    <div class="management-grid">
                        <div class="chart-container">
                            <div class="chart-title">
                                <i class="fas fa-user-chart"></i> Ph√¢n B·ªï Kh√°ch H√†ng
                            </div>
                            <div style="height: 300px; display: flex; justify-content: center; align-items: center;" id="customerDistributionChart">
                                <!-- Customer distribution chart -->
                            </div>
                        </div>
                        
                        <div class="chart-container">
                            <div class="chart-title">
                                <i class="fas fa-history"></i> Kh√°ch H√†ng Th∆∞·ªùng Xuy√™n
                            </div>
                            <div style="height: 300px; overflow-y: auto;">
                                <table class="report-table">
                                    <thead>
                                        <tr>
                                            <th>Kh√°ch h√†ng</th>
                                            <th>S·ªë l·∫ßn thu√™</th>
                                            <th>T·ªïng chi ti√™u</th>
                                            <th>Lo·∫°i</th>
                                        </tr>
                                    </thead>
                                    <tbody id="frequentCustomersTable">
                                        <!-- Frequent customers data -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <div class="chart-container" style="margin-top: 25px;">
                        <div class="chart-title">
                            <i class="fas fa-chart-line"></i> Xu H∆∞·ªõng Kh√°ch H√†ng
                        </div>
                        <div class="chart" id="customerTrendChart">
                            <!-- Customer trend chart -->
                        </div>
                    </div>
                </div>
                
                <!-- Staff Tab -->
                <div class="management-tab" id="staffTab">
                    <div class="management-grid">
                        <div class="chart-container">
                            <div class="chart-title">
                                <i class="fas fa-users"></i> Hi·ªáu Su·∫•t Nh√¢n Vi√™n
                            </div>
                            <div style="height: 300px; overflow-y: auto;">
                                <table class="report-table">
                                    <thead>
                                        <tr>
                                            <th>Nh√¢n vi√™n</th>
                                            <th>Ch·ª©c v·ª•</th>
                                            <th>Hi·ªáu su·∫•t</th>
                                            <th>ƒê√°nh gi√°</th>
                                            <th>Thao t√°c</th>
                                        </tr>
                                    </thead>
                                    <tbody id="staffPerformanceTable">
                                        <!-- Staff performance data -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div class="chart-container">
                            <div class="chart-title">
                                <i class="fas fa-calendar-check"></i> L·ªãch L√†m Vi·ªác
                            </div>
                            <div style="height: 300px; overflow-y: auto; padding: 10px;">
                                <div id="staffSchedule">
                                    <!-- Staff schedule -->
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="chart-container" style="margin-top: 25px;">
                        <div class="chart-title">
                            <i class="fas fa-chart-bar"></i> Ph√¢n B·ªï Nh√¢n S·ª± Theo B·ªô Ph·∫≠n
                        </div>
                        <div class="chart" id="staffDistributionChart">
                            <!-- Staff distribution chart -->
                        </div>
                    </div>
                </div>
                
                <!-- Reports Tab -->
                <div class="management-tab" id="reportsTab">
                    <div style="text-align: center; padding: 40px 20px;">
                        <i class="fas fa-file-pdf" style="font-size: 4em; color: #3498db; margin-bottom: 20px;"></i>
                        <h3 style="margin-bottom: 15px;">B√°o C√°o H·ªá Th·ªëng</h3>
                        <p style="color: #666; margin-bottom: 30px;">T·∫°o v√† xu·∫•t b√°o c√°o chi ti·∫øt v·ªÅ m·ªçi kh√≠a c·∫°nh c·ªßa kh√°ch s·∫°n</p>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;">
                            <div style="background: #f8f9fa; padding: 25px; border-radius: 15px; cursor: pointer; transition: all 0.3s;" onclick="generateReport('financial')">
                                <i class="fas fa-file-invoice-dollar" style="font-size: 2.5em; color: #27ae60; margin-bottom: 15px;"></i>
                                <h4 style="margin-bottom: 10px;">B√°o C√°o T√†i Ch√≠nh</h4>
                                <p style="color: #666; font-size: 0.9em;">Doanh thu, chi ph√≠, l·ª£i nhu·∫≠n</p>
                            </div>
                            
                            <div style="background: #f8f9fa; padding: 25px; border-radius: 15px; cursor: pointer; transition: all 0.3s;" onclick="generateReport('occupancy')">
                                <i class="fas fa-bed" style="font-size: 2.5em; color: #3498db; margin-bottom: 15px;"></i>
                                <h4 style="margin-bottom: 10px;">B√°o C√°o Ph√≤ng ·ªêc</h4>
                                <p style="color: #666; font-size: 0.9em;">T·ª∑ l·ªá thu√™ ph√≤ng, hi·ªáu su·∫•t</p>
                            </div>
                            
                            <div style="background: #f8f9fa; padding: 25px; border-radius: 15px; cursor: pointer; transition: all 0.3s;" onclick="generateReport('customers')">
                                <i class="fas fa-users" style="font-size: 2.5em; color: #9b59b6; margin-bottom: 15px;"></i>
                                <h4 style="margin-bottom: 10px;">B√°o C√°o Kh√°ch H√†ng</h4>
                                <p style="color: #666; font-size: 0.9em;">Ph√¢n t√≠ch h√†nh vi, xu h∆∞·ªõng</p>
                            </div>
                            
                            <div style="background: #f8f9fa; padding: 25px; border-radius: 15px; cursor: pointer; transition: all 0.3s;" onclick="generateReport('staff')">
                                <i class="fas fa-user-tie" style="font-size: 2.5em; color: #f39c12; margin-bottom: 15px;"></i>
                                <h4 style="margin-bottom: 10px;">B√°o C√°o Nh√¢n S·ª±</h4>
                                <p style="color: #666; font-size: 0.9em;">Hi·ªáu su·∫•t, ch·∫•m c√¥ng, l∆∞∆°ng</p>
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 15px; justify-content: center;">
                            <button class="modal-btn confirm" onclick="generateMonthlyReport()">
                                <i class="fas fa-calendar"></i> B√°o C√°o Th√°ng
                            </button>
                            <button class="modal-btn confirm" style="background: #9b59b6;" onclick="generateQuarterlyReport()">
                                <i class="fas fa-chart-bar"></i> B√°o C√°o Qu√Ω
                            </button>
                            <button class="modal-btn confirm" style="background: #27ae60;" onclick="generateYearlyReport()">
                                <i class="fas fa-chart-line"></i> B√°o C√°o NƒÉm
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div class="modal" id="checkinModal">
        <div class="modal-content">
            <h3><i class="fas fa-key"></i> Nh·∫≠n Ph√≤ng</h3>
            <div class="form-group">
                <label for="modalCustomerName">T√™n kh√°ch h√†ng</label>
                <input type="text" id="modalCustomerName" placeholder="H·ªç v√† t√™n">
            </div>
            <div class="form-group">
                <label for="modalCustomerPhone">S·ªë ƒëi·ªán tho·∫°i</label>
                <input type="text" id="modalCustomerPhone" placeholder="S·ªë ƒëi·ªán tho·∫°i">
            </div>
            <div class="form-group">
                <label for="modalNumDays">S·ªë ng√†y thu√™</label>
                <input type="number" id="modalNumDays" placeholder="S·ªë ng√†y thu√™" min="1" value="1">
            </div>
            <div class="form-group">
                <label for="modalSpecialRequests">Y√™u c·∫ßu ƒë·∫∑c bi·ªát</label>
                <textarea id="modalSpecialRequests" placeholder="V√≠ d·ª•: Th√™m gi∆∞·ªùng, th·ª©c ƒÉn ƒë·∫∑c bi·ªát, v.v." rows="3"></textarea>
            </div>
            <div class="modal-actions">
                <button class="modal-btn confirm" onclick="confirmCheckin()">
                    <i class="fas fa-check"></i> X√°c Nh·∫≠n
                </button>
                <button class="modal-btn cancel" onclick="closeModal()">
                    <i class="fas fa-times"></i> H·ªßy
                </button>
            </div>
        </div>
    </div>

    <div class="modal" id="serviceModal">
        <div class="modal-content">
            <h3><i class="fas fa-concierge-bell"></i> Y√™u C·∫ßu D·ªãch V·ª• Ph√≤ng</h3>
            <div class="form-group">
                <label>Ph√≤ng: <span id="serviceRoomNumber" style="font-weight: bold;"></span></label>
            </div>
            <div class="form-group">
                <label>Ch·ªçn d·ªãch v·ª•:</label>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px;">
                    <label style="display: flex; align-items: center; gap: 8px;">
                        <input type="checkbox" class="service-checkbox" value="d·ªçn ph√≤ng">
                        <span>D·ªçn ph√≤ng</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px;">
                        <input type="checkbox" class="service-checkbox" value="thay khƒÉn">
                        <span>Thay khƒÉn</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px;">
                        <input type="checkbox" class="service-checkbox" value="th√™m ƒë·ªì d√πng">
                        <span>Th√™m ƒë·ªì d√πng</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px;">
                        <input type="checkbox" class="service-checkbox" value="ƒë√°nh th·ª©c">
                        <span>ƒê√°nh th·ª©c</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px;">
                        <input type="checkbox" class="service-checkbox" value="gi·∫∑t ·ªßi">
                        <span>Gi·∫∑t ·ªßi</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px;">
                        <input type="checkbox" class="service-checkbox" value="ƒë∆∞a ƒë√≥n">
                        <span>ƒê∆∞a ƒë√≥n</span>
                    </label>
                </div>
            </div>
            <div class="form-group">
                <label for="serviceNotes">Ghi ch√∫ th√™m</label>
                <textarea id="serviceNotes" placeholder="Ghi ch√∫ th√™m cho d·ªãch v·ª•..." rows="3"></textarea>
            </div>
            <div class="modal-actions">
                <button class="modal-btn confirm" onclick="confirmServiceRequest()">
                    <i class="fas fa-paper-plane"></i> G·ª≠i Y√™u C·∫ßu
                </button>
                <button class="modal-btn cancel" onclick="closeModal()">
                    <i class="fas fa-times"></i> H·ªßy
                </button>
            </div>
        </div>
    </div>

    <!-- Management Modals -->
    <div class="modal" id="reportModal">
        <div class="modal-content" style="max-width: 800px;">
            <h3><i class="fas fa-file-pdf"></i> B√°o C√°o Chi Ti·∫øt</h3>
            <div id="reportContent" style="max-height: 500px; overflow-y: auto; padding: 20px; background: #f8f9fa; border-radius: 10px; margin-bottom: 20px;">
                <!-- Report content will be inserted here -->
            </div>
            <div class="modal-actions">
                <button class="modal-btn confirm" onclick="printReport()">
                    <i class="fas fa-print"></i> In B√°o C√°o
                </button>
                <button class="modal-btn confirm" style="background: #27ae60;" onclick="downloadReport()">
                    <i class="fas fa-download"></i> T·∫£i Xu·ªëng
                </button>
                <button class="modal-btn cancel" onclick="closeModal()">
                    <i class="fas fa-times"></i> ƒê√≥ng
                </button>
            </div>
        </div>
    </div>

    <script>
        // ==================== C·∫§U H√åNH H·ªÜ TH·ªêNG ====================
        const MENU_ITEMS = [
            { id: 'goi-cuon', name: 'G·ªèi cu·ªën', price: 45000, icon: 'ü•¨', category: 'appetizer', description: 'G·ªèi cu·ªën t√¥m th·ªãt' },
            { id: 'sup-ngo', name: 'S√∫p n·∫•m', price: 35000, icon: 'üç≤', category: 'appetizer', description: 'S√∫p n·∫•m t∆∞∆°i' },
            { id: 'com-ga', name: 'C∆°m g√†', price: 75000, icon: 'üçö', category: 'main', description: 'C∆°m g√† x·ªëi m·ª°' },
            { id: 'pho-bo', name: 'Ph·ªü b√≤', price: 65000, icon: 'üçú', category: 'main', description: 'Ph·ªü b√≤ H√† N·ªôi' },
            { id: 'bun-cha', name: 'B√∫n ch·∫£', price: 70000, icon: 'üçù', category: 'main', description: 'B√∫n ch·∫£ H√† N·ªôi' },
            { id: 'ca-kho', name: 'C√° kho', price: 85000, icon: 'üêü', category: 'main', description: 'C√° kho t·ªô' },
            { id: 'nuoc-cam', name: 'N∆∞·ªõc cam', price: 35000, icon: 'üçä', category: 'drink', description: 'N∆∞·ªõc cam √©p' },
            { id: 'cafe', name: 'Caf√© s·ªØa', price: 25000, icon: '‚òï', category: 'drink', description: 'Caf√© s·ªØa ƒë√°' },
            { id: 'tra-dao', name: 'Tr√† ƒë√†o', price: 40000, icon: 'üçë', category: 'drink', description: 'Tr√† ƒë√†o cam s·∫£' },
            { id: 'bia', name: 'Bia Tiger', price: 45000, icon: 'üç∫', category: 'drink', description: 'Bia Tiger l·∫°nh' },
            { id: 'kem', name: 'Kem d·ª´a', price: 35000, icon: 'üç®', category: 'dessert', description: 'Kem d·ª´a s·∫ßu ri√™ng' },
            { id: 'che', name: 'Ch√® kh√∫c b·∫°ch', price: 30000, icon: 'üçÆ', category: 'dessert', description: 'Ch√® kh√∫c b·∫°ch' },
            { id: 'banh-flan', name: 'B√°nh flan', price: 25000, icon: 'üç∞', category: 'dessert', description: 'B√°nh flan caramel' }
        ];

        // ==================== C·∫§U TR√öC KH√ÅCH S·∫†N ƒêA T·∫¶NG ====================
        const FLOORS = 7;
        const ROOMS_PER_FLOOR = 10;
        const BASE_PRICE_PER_DAY = 200000; // Price for floor 1
        const PRICE_INCREMENT_PER_FLOOR = 50000; // Each floor up increases price by 50k
        
        // Ph√¢n lo·∫°i ph√≤ng cao c·∫•p
        const ROOM_TYPES = {
            'standard': { 
                name: 'Ti√™u Chu·∫©n', 
                priceMultiplier: 1.0, 
                icon: 'üõèÔ∏è', 
                features: ['TV', 'WiFi', 'ƒêi·ªÅu h√≤a', 'Ph√≤ng t·∫Øm ri√™ng'],
                percentage: 60
            },
            'vip': { 
                name: 'VIP', 
                priceMultiplier: 1.5, 
                icon: '‚≠ê', 
                features: ['TV m√†n h√¨nh ph·∫≥ng', 'WiFi cao t·ªëc', 'Minibar', 'B·ªìn t·∫Øm', 'D·ªãch v·ª• 24/7'],
                percentage: 30
            },
            'suite': { 
                name: 'Suite', 
                priceMultiplier: 2.2, 
                icon: 'üëë', 
                features: ['Ph√≤ng kh√°ch ri√™ng', 'TV 2 m√†n h√¨nh', 'Minibar ƒë·∫ßy ƒë·ªß', 'B·ªìn t·∫Øm massage', 'D·ªãch v·ª• Butler', 'B·ªØa s√°ng mi·ªÖn ph√≠'],
                percentage: 10
            }
        };

        // ==================== BI·∫æN TO√ÄN C·ª§C ====================
        let rooms = [];
        let orders = [];
        let totalRevenue = 0;
        let todayRevenue = 0;
        let activities = [];
        let currentCheckinRoom = null;
        let currentServiceRoom = null;
        let currentOrderItems = [];
        let currentFloor = 'all';
        let currentMenuFilter = 'all';
        let currentOrderFilter = 'all';
        let managementData = {
            monthlyRevenue: 125000000,
            lastMonthRevenue: 110000000,
            monthlyOccupancy: 72,
            lastMonthOccupancy: 68,
            vipCustomers: 15,
            avgDailyOrders: 24,
            lastMonthAvgOrders: 21,
            monthlyExpenses: 45000000,
            lastMonthExpenses: 42700000,
            staffMembers: [],
            roomBookings: {},
            financialHistory: [],
            customerHistory: [],
            roomHistory: [],
            staffPerformance: []
        };

        // ==================== KH·ªûI T·∫†O H·ªÜ TH·ªêNG ====================
        function initializeSystem() {
            initializeRooms();
            initializeDemoData();
            initializeManagementData();
            
            updateRoomSelect();
            renderMenu();
            updateOrderSummary();
            renderOrders();
            renderRooms();
            updateDashboardStats();
            generateFloorButtons();
            
            // Show welcome notification
            setTimeout(() => {
                addNotification('Ch√†o m·ª´ng ƒë·∫øn v·ªõi H·ªá th·ªëng Qu·∫£n l√Ω Kh√°ch s·∫°n Cao c·∫•p Horizon!', 'success');
            }, 1000);
        }

        // Kh·ªüi t·∫°o ph√≤ng theo c·∫•u tr√∫c ƒëa t·∫ßng
        function initializeRooms() {
            rooms = [];
            let roomCounter = 1;
            
            for (let floor = 1; floor <= FLOORS; floor++) {
                // Gi√° c∆° b·∫£n cho t·∫ßng n√†y (tƒÉng theo t·∫ßng)
                const floorBasePrice = BASE_PRICE_PER_DAY + ((floor - 1) * PRICE_INCREMENT_PER_FLOOR);
                
                // T√≠nh s·ªë ph√≤ng m·ªói lo·∫°i theo t·ª∑ l·ªá
                const standardCount = Math.floor(ROOMS_PER_FLOOR * (ROOM_TYPES.standard.percentage / 100));
                const vipCount = Math.floor(ROOMS_PER_FLOOR * (ROOM_TYPES.vip.percentage / 100));
                const suiteCount = ROOMS_PER_FLOOR - standardCount - vipCount;
                
                let typeCounter = { 'standard': 0, 'vip': 0, 'suite': 0 };
                
                for (let roomNum = 1; roomNum <= ROOMS_PER_FLOOR; roomNum++) {
                    // X√°c ƒë·ªãnh lo·∫°i ph√≤ng
                    let roomType = 'standard';
                    if (typeCounter.standard < standardCount) {
                        roomType = 'standard';
                        typeCounter.standard++;
                    } else if (typeCounter.vip < vipCount) {
                        roomType = 'vip';
                        typeCounter.vip++;
                    } else {
                        roomType = 'suite';
                        typeCounter.suite++;
                    }
                    
                    // T√≠nh gi√° ph√≤ng
                    const typeMultiplier = ROOM_TYPES[roomType].priceMultiplier;
                    const roomPrice = Math.floor(floorBasePrice * typeMultiplier);
                    
                    // X√°c ƒë·ªãnh ti·ªán nghi ƒë·∫∑c bi·ªát theo t·∫ßng
                    let features = [...ROOM_TYPES[roomType].features];
                    let badges = [];
                    
                    // T√çNH NƒÇNG ƒê·∫∂C BI·ªÜT: View th√†nh ph·ªë t·ª´ t·∫ßng 5
                    if (floor >= 5) {
                        features.push('View th√†nh ph·ªë');
                        badges.push({ type: 'sea-view', text: 'VIEW ƒê·∫∏P' });
                    }
                    
                    // T√çNH NƒÇNG ƒê·∫∂C BI·ªÜT: Ban c√¥ng t·ª´ t·∫ßng 6
                    if (floor >= 6) {
                        features.push('Ban c√¥ng');
                        badges.push({ type: 'balcony', text: 'BAN C√îNG' });
                    }
                    
                    // T√çNH NƒÇNG ƒê·∫∂C BI·ªÜT: H·ªì b∆°i ri√™ng cho suite t·∫ßng 7
                    if (floor === 7 && roomType === 'suite') {
                        features.push('View to√†n c·∫£nh', 'H·ªì b∆°i ri√™ng');
                        badges.push({ type: 'pool', text: 'H·ªí B∆†I' });
                    }
                    
                    // T√çNH NƒÇNG ƒê·∫∂C BI·ªÜT: Ph√≤ng m·ªõi (suite t·∫ßng 7)
                    if (floor === 7 && roomType === 'suite') {
                        badges.push({ type: 'new', text: 'M·ªöI' });
                    }
                    
                    // T√çNH NƒÇNG ƒê·∫∂C BI·ªÜT: Ph√≤ng khuy·∫øn m√£i (gi·∫£m 20% cho ph√≤ng t·∫ßng 1)
                    if (floor === 1 && roomNum <= 3) {
                        badges.push({ type: 'promo', text: 'GI·∫¢M 20%' });
                    }
                    
                    // T·∫°o ƒë·ªëi t∆∞·ª£ng ph√≤ng
                    const room = {
                        id: roomCounter,
                        floor: floor,
                        roomNumber: `${floor}${roomNum.toString().padStart(2, '0')}`,
                        type: roomType,
                        pricePerDay: roomPrice,
                        customer: null,
                        customerPhone: null,
                        customerEmail: null,
                        numDays: 0,
                        checkinTime: null,
                        checkoutTime: null,
                        status: 'empty',
                        specialRequests: '',
                        serviceRequests: [],
                        features: features,
                        badges: badges,
                        needsCleaning: false,
                        bookingCount: Math.floor(Math.random() * 20) + 5, // S·ªë l·∫ßn thu√™ demo
                        totalRevenue: (Math.floor(Math.random() * 100) + 20) * 1000000, // Doanh thu demo
                        occupancyRate: Math.floor(Math.random() * 40) + 60 // T·ª∑ l·ªá thu√™ demo
                    };
                    
                    rooms.push(room);
                    roomCounter++;
                }
            }
        }

        // Kh·ªüi t·∫°o d·ªØ li·ªáu demo
        function initializeDemoData() {
            // Kh√°ch h√†ng demo
            const demoCustomers = [
                { name: 'Nguy·ªÖn VƒÉn A', phone: '0912345678', email: 'a.nguyen@email.com', days: 3, roomId: '101', vip: true },
                { name: 'Tr·∫ßn Th·ªã B', phone: '0923456789', email: 'b.tran@email.com', days: 2, roomId: '205', vip: false },
                { name: 'L√™ VƒÉn C', phone: '0934567890', email: 'c.le@email.com', days: 5, roomId: '312', vip: true },
                { name: 'Ph·∫°m Th·ªã D', phone: '0945678901', email: 'd.pham@email.com', days: 1, roomId: '407', vip: false },
                { name: 'Ho√†ng VƒÉn E', phone: '0956789012', email: 'e.hoang@email.com', days: 4, roomId: '509', vip: false },
                { name: 'ƒê·∫∑ng Th·ªã F', phone: '0967890123', email: 'f.dang@email.com', days: 3, roomId: '610', vip: true },
                { name: 'B√πi VƒÉn G', phone: '0978901234', email: 'g.bui@email.com', days: 7, roomId: '703', vip: true }
            ];
            
            demoCustomers.forEach(customer => {
                const room = rooms.find(r => r.roomNumber == customer.roomId);
                if (room) {
                    room.customer = customer.name;
                    room.customerPhone = customer.phone;
                    room.customerEmail = customer.email;
                    room.numDays = customer.days;
                    room.checkinTime = new Date(Date.now() - Math.floor(Math.random() * 86400000));
                    room.status = 'occupied';
                    
                    activities.push({
                        type: 'checkin',
                        roomNumber: room.roomNumber,
                        customerName: customer.name,
                        time: room.checkinTime
                    });
                    
                    // Th√™m y√™u c·∫ßu d·ªãch v·ª•
                    if (Math.random() > 0.5) {
                        const services = ['d·ªçn ph√≤ng', 'th√™m ƒë·ªì d√πng', 'gi·∫∑t ·ªßi'];
                        room.serviceRequests.push({
                            service: services[Math.floor(Math.random() * services.length)],
                            time: new Date(Date.now() - Math.floor(Math.random() * 3600000)),
                            completed: Math.random() > 0.5
                        });
                    }
                }
            });
            
            // ƒê∆°n h√†ng demo
            const demoOrders = [
                { roomId: '101', items: 'C∆°m g√† x 2\nN∆∞·ªõc cam x 2', status: 'completed' },
                { roomId: '205', items: 'Ph·ªü b√≤ x 1\nCaf√© s·ªØa x 1', status: 'preparing' },
                { roomId: '312', items: 'B√∫n ch·∫£ x 3\nBia Tiger x 3\nKem d·ª´a x 3', status: 'pending' },
                { roomId: '407', items: 'G·ªèi cu·ªën x 2\nC√° kho x 1\nTr√† ƒë√†o x 2', status: 'pending' }
            ];
            
            demoOrders.forEach(orderData => {
                const room = rooms.find(r => r.roomNumber == orderData.roomId);
                if (room) {
                    orders.push({
                        id: Date.now() + Math.floor(Math.random() * 1000),
                        roomId: orderData.roomId,
                        customerName: room.customer,
                        items: orderData.items,
                        time: new Date(Date.now() - Math.floor(Math.random() * 7200000)),
                        status: orderData.status,
                        priority: orderData.status === 'pending' ? 'medium' : 'low'
                    });
                    
                    activities.push({
                        type: 'order',
                        roomNumber: orderData.roomId,
                        customerName: room.customer,
                        time: new Date(Date.now() - Math.floor(Math.random() * 7200000))
                    });
                }
            });
            
            // ƒê√°nh d·∫•u ph√≤ng c·∫ßn d·ªçn
            rooms.filter(r => r.status === 'empty' && Math.random() > 0.7).forEach(room => {
                room.needsCleaning = true;
                room.status = 'cleaning';
                
                activities.push({
                    type: 'cleaning',
                    roomNumber: room.roomNumber,
                    time: new Date(Date.now() - Math.floor(Math.random() * 3600000))
                });
            });
            
            // Doanh thu demo
            todayRevenue = 12500000;
            totalRevenue = 87500000;
        }

        // Kh·ªüi t·∫°o d·ªØ li·ªáu qu·∫£n l√Ω
        function initializeManagementData() {
            // Nh√¢n vi√™n demo
            managementData.staffMembers = [
                { id: 1, name: 'Nguy·ªÖn Th·ªã Hoa', position: 'reception', phone: '0911111111', email: 'hoa@hotel.com', salary: 9000000, shift: 'morning', performance: 95, status: 'active' },
                { id: 2, name: 'Tr·∫ßn VƒÉn B√¨nh', position: 'housekeeping', phone: '0922222222', email: 'binh@hotel.com', salary: 7500000, shift: 'morning', performance: 88, status: 'active' },
                { id: 3, name: 'L√™ Th·ªã Mai', position: 'restaurant', phone: '0933333333', email: 'mai@hotel.com', salary: 8000000, shift: 'afternoon', performance: 92, status: 'active' },
                { id: 4, name: 'Ph·∫°m VƒÉn C∆∞·ªùng', position: 'manager', phone: '0944444444', email: 'cuong@hotel.com', salary: 15000000, shift: 'flexible', performance: 98, status: 'active' },
                { id: 5, name: 'Ho√†ng Th·ªã Lan', position: 'security', phone: '0955555555', email: 'lan@hotel.com', salary: 7000000, shift: 'night', performance: 85, status: 'onleave' }
            ];
            
            // L·ªãch s·ª≠ t√†i ch√≠nh demo
            const months = ['Th1', 'Th2', 'Th3', 'Th4', 'Th5', 'Th6'];
            managementData.financialHistory = months.map((month, index) => ({
                month: month,
                revenue: 100000000 + (Math.random() * 50000000),
                occupancy: 60 + (Math.random() * 30),
                expenses: 40000000 + (Math.random() * 20000000),
                profit: 60000000 + (Math.random() * 30000000)
            }));
            
            // L·ªãch s·ª≠ ph√≤ng
            managementData.roomHistory = rooms.map(room => ({
                roomNumber: room.roomNumber,
                type: room.type,
                bookingCount: room.bookingCount,
                totalRevenue: room.totalRevenue,
                occupancyRate: room.occupancyRate
            }));
            
            // L·ªãch s·ª≠ kh√°ch h√†ng demo
            for (let i = 0; i < 20; i++) {
                managementData.customerHistory.push({
                    id: i + 1,
                    name: `Kh√°ch h√†ng ${i + 1}`,
                    roomType: ['standard', 'vip', 'suite'][Math.floor(Math.random() * 3)],
                    visits: Math.floor(Math.random() * 5) + 1,
                    totalSpent: 5000000 + (Math.random() * 15000000),
                    isVip: Math.random() > 0.7
                });
            }
            
            // Hi·ªáu su·∫•t nh√¢n vi√™n
            managementData.staffPerformance = managementData.staffMembers.map(staff => ({
                ...staff,
                attendance: Math.floor(Math.random() * 20) + 15,
                tasksCompleted: Math.floor(Math.random() * 50) + 30,
                customerRating: Math.floor(Math.random() * 20) + 80
            }));
        }

        // ==================== TI·ªÜN √çCH CHUNG ====================
        function formatCurrency(amount) {
            return amount.toLocaleString('vi-VN') + 'ƒë';
        }

        function addNotification(message, type = 'info') {
            const notifDiv = document.createElement('div');
            notifDiv.className = `notification ${type}`;
            
            let icon = '‚ÑπÔ∏è';
            if (type === 'success') icon = '‚úÖ';
            if (type === 'warning') icon = '‚ö†Ô∏è';
            if (type === 'error') icon = '‚ùå';
            
            notifDiv.innerHTML = `
                <span style="font-size: 1.2em;">${icon}</span>
                <span>${message}</span>
            `;
            
            const notifications = document.getElementById('notifications');
            notifications.appendChild(notifDiv);
            
            setTimeout(() => {
                notifDiv.style.opacity = '0';
                notifDiv.style.transform = 'translateX(100px)';
                setTimeout(() => {
                    if (notifDiv.parentNode) {
                        notifDiv.parentNode.removeChild(notifDiv);
                    }
                }, 300);
            }, 4000);
        }

        function closeModal() {
            document.querySelectorAll('.modal').forEach(modal => modal.classList.remove('active'));
            currentCheckinRoom = null;
            currentServiceRoom = null;
        }

        // ==================== CH·ª®C NƒÇNG KH√ÅCH H√ÄNG ====================
        function switchView(view) {
            document.querySelectorAll('.view-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            document.querySelectorAll('.view-content').forEach(content => content.classList.remove('active'));
            document.getElementById(view + 'View').classList.add('active');
            
            if (view === 'staff') {
                renderOrders();
                renderRooms();
                updateDashboardStats();
                generateFloorButtons();
            } else if (view === 'customer') {
                updateRoomSelect();
                renderMenu();
                updateOrderSummary();
            } else if (view === 'management') {
                updateManagementStats();
                renderManagementCharts();
            }
        }

        function updateRoomSelect() {
            const select = document.getElementById('customerRoom');
            select.innerHTML = '<option value="">-- Ch·ªçn ph√≤ng --</option>';
            
            rooms.forEach(room => {
                if (room.customer) {
                    const option = document.createElement('option');
                    option.value = room.id;
                    option.textContent = `Ph√≤ng ${room.roomNumber} - ${room.customer} (${ROOM_TYPES[room.type].name})`;
                    select.appendChild(option);
                }
            });
            
            // Th√™m ph√≤ng tr·ªëng cho kh√°ch m·ªõi
            rooms.filter(room => !room.customer).forEach(room => {
                const option = document.createElement('option');
                option.value = room.id;
                const promoText = room.badges.some(b => b.type === 'promo') ? ' [KHUY·∫æN M√ÉI]' : '';
                option.textContent = `Ph√≤ng ${room.roomNumber} - ${ROOM_TYPES[room.type].name} - ${formatCurrency(room.pricePerDay)}/ƒë√™m${promoText}`;
                select.appendChild(option);
            });
        }

        function updateRoomDetails() {
            const roomId = document.getElementById('customerRoom').value;
            const detailsDiv = document.getElementById('roomDetails');
            
            if (!roomId) {
                detailsDiv.style.display = 'none';
                return;
            }
            
            const room = rooms.find(r => r.id == roomId);
            if (!room) return;
            
            const typeInfo = ROOM_TYPES[room.type];
            
            document.getElementById('roomTypeDisplay').innerHTML = `
                <strong>${typeInfo.icon} ${typeInfo.name} - T·∫ßng ${room.floor}</strong>
            `;
            
            // Hi·ªÉn th·ªã gi√° (c√≥ khuy·∫øn m√£i n·∫øu c√≥)
            const hasPromo = room.badges.some(b => b.type === 'promo');
            let priceText = formatCurrency(room.pricePerDay) + ' / ƒë√™m';
            if (hasPromo) {
                const discountedPrice = room.pricePerDay * 0.8; // Gi·∫£m 20%
                priceText = `
                    <span style="text-decoration: line-through; color: #999;">${formatCurrency(room.pricePerDay)}</span> 
                    <span style="color: #e74c3c; font-size: 1.2em;">${formatCurrency(discountedPrice)}</span> / ƒë√™m 
                    <span style="background: #e74c3c; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8em;">GI·∫¢M 20%</span>
                `;
            }
            
            document.getElementById('roomPriceDisplay').innerHTML = priceText;
            
            // Hi·ªÉn th·ªã ti·ªán nghi
            const featuresHtml = room.features.map(feature => 
                `<div style="display: inline-block; background: #e8f4fc; padding: 5px 10px; border-radius: 15px; margin: 5px 5px 5px 0; font-size: 0.9em;">‚úì ${feature}</div>`
            ).join('');
            
            // Hi·ªÉn th·ªã badge ƒë·∫∑c bi·ªát
            const badgesHtml = room.badges.map(badge => 
                `<span style="background: ${getBadgeColor(badge.type)}; color: white; padding: 3px 8px; border-radius: 10px; font-size: 0.7em; margin-left: 5px;">${badge.text}</span>`
            ).join('');
            
            document.getElementById('roomFeatures').innerHTML = `
                <div style="margin-top: 10px; font-size: 0.9em;">
                    <div style="font-weight: bold; margin-bottom: 5px;">Ti·ªán nghi: ${badgesHtml}</div>
                    ${featuresHtml}
                </div>
            `;
            
            detailsDiv.style.display = 'block';
        }

        function getBadgeColor(type) {
            const colors = {
                'new': '#e74c3c',
                'promo': '#9b59b6',
                'sea-view': '#3498db',
                'balcony': '#27ae60',
                'pool': '#3498db'
            };
            return colors[type] || '#95a5a6';
        }

        function renderMenu() {
            const grid = document.getElementById('menuGrid');
            grid.innerHTML = '';
            
            let filteredItems = MENU_ITEMS;
            if (currentMenuFilter !== 'all') {
                filteredItems = MENU_ITEMS.filter(item => item.category === currentMenuFilter);
            }
            
            filteredItems.forEach(item => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'menu-item';
                itemDiv.onclick = () => addToOrder(item);
                itemDiv.innerHTML = `
                    <div class="menu-icon">${item.icon}</div>
                    <div class="menu-name">${item.name}</div>
                    <div class="menu-category">${getCategoryName(item.category)}</div>
                    <div style="font-size: 0.9em; color: #666; margin-bottom: 10px;">${item.description}</div>
                    <div class="menu-price">${formatCurrency(item.price)}</div>
                `;
                grid.appendChild(itemDiv);
            });
        }

        function getCategoryName(category) {
            const names = {
                'appetizer': 'Khai v·ªã',
                'main': 'M√≥n ch√≠nh',
                'drink': 'ƒê·ªì u·ªëng',
                'dessert': 'Tr√°ng mi·ªáng'
            };
            return names[category] || category;
        }

        function addToOrder(item) {
            const existingItem = currentOrderItems.find(i => i.id === item.id);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                currentOrderItems.push({
                    id: item.id,
                    name: item.name,
                    price: item.price,
                    quantity: 1,
                    icon: item.icon
                });
            }
            
            updateOrderSummary();
            
            // Highlight menu item
            const menuItems = document.querySelectorAll('.menu-item');
            menuItems.forEach(menuItem => {
                if (menuItem.querySelector('.menu-name').textContent === item.name) {
                    menuItem.classList.add('highlight');
                    setTimeout(() => {
                        menuItem.classList.remove('highlight');
                    }, 500);
                }
            });
        }

        function updateOrderSummary() {
            const orderItemsDiv = document.getElementById('orderItems');
            const orderTotalDiv = document.getElementById('orderTotal');
            const submitBtn = document.getElementById('submitOrderBtn');
            
            if (currentOrderItems.length === 0) {
                orderItemsDiv.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-shopping-basket"></i>
                        <p>Ch∆∞a c√≥ m√≥n n√†o trong ƒë∆°n h√†ng</p>
                        <p>H√£y ch·ªçn m√≥n t·ª´ th·ª±c ƒë∆°n b√™n tr√™n</p>
                    </div>
                `;
                orderTotalDiv.textContent = '0ƒë';
                submitBtn.disabled = true;
                return;
            }
            
            let total = 0;
            let itemsHtml = '';
            
            currentOrderItems.forEach((item, index) => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                
                itemsHtml += `
                    <div class="order-item">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span>${item.icon}</span>
                            <span>${item.name}</span>
                        </div>
                        <div class="item-controls">
                            <button class="qty-btn" onclick="changeQuantity(${index}, -1)">-</button>
                            <span class="item-qty">${item.quantity}</span>
                            <button class="qty-btn" onclick="changeQuantity(${index}, 1)">+</button>
                            <span style="min-width: 80px; text-align: right; font-weight: bold;">${formatCurrency(itemTotal)}</span>
                            <button class="remove-btn" onclick="removeItem(${index})">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                `;
            });
            
            orderItemsDiv.innerHTML = itemsHtml;
            orderTotalDiv.textContent = formatCurrency(total);
            submitBtn.disabled = false;
        }

        function changeQuantity(index, change) {
            const item = currentOrderItems[index];
            item.quantity += change;
            
            if (item.quantity <= 0) {
                currentOrderItems.splice(index, 1);
            }
            
            updateOrderSummary();
        }

        function removeItem(index) {
            currentOrderItems.splice(index, 1);
            updateOrderSummary();
        }

        function submitOrder() {
            const roomId = document.getElementById('customerRoom').value;
            const customerName = document.getElementById('customerName').value.trim();
            const customerPhone = document.getElementById('customerPhone').value.trim();
            
            if (!roomId) {
                addNotification('Vui l√≤ng ch·ªçn ph√≤ng!', 'error');
                return;
            }
            
            if (!customerName) {
                addNotification('Vui l√≤ng nh·∫≠p t√™n kh√°ch h√†ng!', 'error');
                return;
            }
            
            if (!customerPhone) {
                addNotification('Vui l√≤ng nh·∫≠p s·ªë ƒëi·ªán tho·∫°i!', 'error');
                return;
            }
            
            if (currentOrderItems.length === 0) {
                addNotification('Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt m√≥n!', 'error');
                return;
            }
            
            const room = rooms.find(r => r.id == roomId);
            
            // ƒê·ªãnh d·∫°ng ƒë∆°n h√†ng
            let orderText = '';
            let orderTotal = 0;
            
            currentOrderItems.forEach(item => {
                const itemTotal = item.price * item.quantity;
                orderTotal += itemTotal;
                orderText += `${item.name} x ${item.quantity} - ${formatCurrency(itemTotal)}\n`;
            });
            
            orderText += `\nT·ªïng c·ªông: ${formatCurrency(orderTotal)}`;
            
            // T·∫°o ƒë∆°n h√†ng
            const order = {
                id: Date.now(),
                roomId: room.roomNumber,
                roomIdNum: parseInt(roomId),
                customerName: customerName,
                customerPhone: customerPhone,
                items: orderText,
                time: new Date(),
                status: 'pending',
                priority: 'medium',
                total: orderTotal
            };
            
            orders.push(order);
            todayRevenue += orderTotal;
            totalRevenue += orderTotal;
            
            // Th√™m v√†o ho·∫°t ƒë·ªông
            activities.push({
                type: 'order',
                roomNumber: room.roomNumber,
                customerName: customerName,
                time: new Date(),
                amount: orderTotal
            });
            
            // X√≥a ƒë∆°n h√†ng hi·ªán t·∫°i
            currentOrderItems = [];
            updateOrderSummary();
            
            addNotification(`‚úÖ ƒê∆°n h√†ng t·ª´ ph√≤ng ${room.roomNumber} ƒë√£ ƒë∆∞·ª£c g·ª≠i! T·ªïng: ${formatCurrency(orderTotal)}`, 'success');
            
            // C·∫≠p nh·∫≠t giao di·ªán nh√¢n vi√™n n·∫øu ƒëang xem
            if (document.getElementById('staffView').classList.contains('active')) {
                renderOrders();
                updateDashboardStats();
            }
            
            // C·∫≠p nh·∫≠t qu·∫£n l√Ω n·∫øu ƒëang xem
            if (document.getElementById('managementView').classList.contains('active')) {
                updateManagementStats();
            }
        }

        // ==================== CH·ª®C NƒÇNG NH√ÇN VI√äN ====================
        function generateFloorButtons() {
            const floorSelect = document.querySelector('.floor-select');
            const allBtn = floorSelect.querySelector('.floor-btn');
            floorSelect.innerHTML = '';
            floorSelect.appendChild(allBtn);
            
            for (let floor = 1; floor <= FLOORS; floor++) {
                const floorBtn = document.createElement('button');
                floorBtn.className = 'floor-btn';
                floorBtn.textContent = floor;
                floorBtn.onclick = () => changeFloor(floor);
                floorSelect.appendChild(floorBtn);
            }
            
            if (currentFloor === 'all') {
                floorSelect.querySelector('.floor-btn').classList.add('active');
            } else {
                floorSelect.querySelectorAll('.floor-btn')[currentFloor].classList.add('active');
            }
        }

        function changeFloor(floor) {
            currentFloor = floor;
            
            document.querySelectorAll('.floor-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            renderRooms();
        }

        function renderOrders() {
            const list = document.getElementById('ordersList');
            
            let filteredOrders = orders;
            if (currentOrderFilter !== 'all') {
                filteredOrders = orders.filter(order => order.status === currentOrderFilter);
            }
            
            if (filteredOrders.length === 0) {
                list.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-concierge-bell"></i>
                        <p>Kh√¥ng c√≥ ƒë∆°n h√†ng n√†o</p>
                        <p>${currentOrderFilter !== 'all' ? 'Th·ª≠ ch·ªçn b·ªô l·ªçc kh√°c' : 'ƒê∆°n h√†ng s·∫Ω xu·∫•t hi·ªán ·ªü ƒë√¢y'}</p>
                    </div>
                `;
                return;
            }
            
            list.innerHTML = '';
            
            // S·∫Øp x·∫øp theo ƒë·ªô ∆∞u ti√™n v√† th·ªùi gian
            filteredOrders.sort((a, b) => {
                const priorityOrder = { 'high': 3, 'medium': 2, 'low': 1 };
                if (priorityOrder[b.priority] !== priorityOrder[a.priority]) {
                    return priorityOrder[b.priority] - priorityOrder[a.priority];
                }
                return new Date(b.time) - new Date(a.time);
            });
            
            filteredOrders.forEach(order => {
                const orderDiv = document.createElement('div');
                orderDiv.className = `order-card ${order.priority === 'high' ? 'high-priority' : order.priority === 'medium' ? 'medium-priority' : ''}`;
                
                const statusColors = {
                    'pending': '#f39c12',
                    'preparing': '#3498db',
                    'completed': '#27ae60',
                    'cancelled': '#e74c3c'
                };
                
                const statusTexts = {
                    'pending': 'Ch·ªù x·ª≠ l√Ω',
                    'preparing': 'ƒêang chu·∫©n b·ªã',
                    'completed': 'Ho√†n th√†nh',
                    'cancelled': 'ƒê√£ h·ªßy'
                };
                
                const priorityTexts = {
                    'high': 'Cao',
                    'medium': 'Trung b√¨nh',
                    'low': 'Th·∫•p'
                };
                
                orderDiv.innerHTML = `
                    <div class="order-header">
                        <div class="order-room">
                            <i class="fas fa-door-closed"></i> Ph√≤ng ${order.roomId}
                            <span style="font-size: 0.9em; color: #666; margin-left: 10px;">${order.customerName}</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span class="order-priority priority-${order.priority}">${priorityTexts[order.priority]}</span>
                            <span class="order-time">
                                <i class="far fa-clock"></i> ${new Date(order.time).toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' })}
                            </span>
                        </div>
                    </div>
                    <div class="order-items">${order.items}</div>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span style="padding: 5px 15px; border-radius: 15px; background: ${statusColors[order.status]}; color: white; font-weight: bold; font-size: 0.9em;">
                                ${statusTexts[order.status]}
                            </span>
                            <span style="font-size: 0.9em; color: #666;">
                                <i class="fas fa-phone"></i> ${order.customerPhone}
                            </span>
                        </div>
                        <div class="order-actions">
                            ${order.status === 'pending' || order.status === 'preparing' ? `
                                <button class="complete-btn" onclick="updateOrderStatus(${order.id}, 'completed')">
                                    <i class="fas fa-check"></i> Ho√†n th√†nh
                                </button>
                                <button class="cancel-btn" onclick="updateOrderStatus(${order.id}, 'cancelled')">
                                    <i class="fas fa-times"></i> H·ªßy
                                </button>
                            ` : ''}
                            ${order.status === 'pending' ? `
                                <button class="complete-btn" style="background: #3498db;" onclick="updateOrderStatus(${order.id}, 'preparing')">
                                    <i class="fas fa-utensils"></i> Chu·∫©n b·ªã
                                </button>
                            ` : ''}
                        </div>
                    </div>
                `;
                list.appendChild(orderDiv);
            });
        }

        function updateOrderStatus(orderId, status) {
            const order = orders.find(o => o.id === orderId);
            if (!order) return;
            
            order.status = status;
            
            // C·∫≠p nh·∫≠t ƒë·ªô ∆∞u ti√™n n·∫øu ƒëang ch·ªù
            if (status === 'pending') {
                const waitTime = new Date() - new Date(order.time);
                if (waitTime > 30 * 60 * 1000) { // Tr√™n 30 ph√∫t
                    order.priority = 'high';
                } else if (waitTime > 15 * 60 * 1000) { // Tr√™n 15 ph√∫t
                    order.priority = 'medium';
                }
            }
            
            renderOrders();
            
            if (status === 'completed') {
                addNotification(`‚úÖ ƒê∆°n h√†ng ph√≤ng ${order.roomId} ƒë√£ ho√†n th√†nh`, 'success');
            } else if (status === 'cancelled') {
                addNotification(`‚ùå ƒê∆°n h√†ng ph√≤ng ${order.roomId} ƒë√£ h·ªßy`, 'error');
            }
        }

        function renderRooms() {
            const list = document.getElementById('roomsList');
            list.innerHTML = '';
            
            let filteredRooms = rooms;
            
            // L·ªçc theo t·∫ßng
            if (currentFloor !== 'all') {
                filteredRooms = rooms.filter(room => room.floor == currentFloor);
            }
            
            if (filteredRooms.length === 0) {
                list.innerHTML = `
                    <div class="empty-state" style="grid-column: 1 / -1;">
                        <i class="fas fa-bed"></i>
                        <p>Kh√¥ng c√≥ ph√≤ng n√†o</p>
                    </div>
                `;
                return;
            }
            
            filteredRooms.forEach(room => {
                const roomDiv = document.createElement('div');
                roomDiv.className = `room-card ${room.type} ${room.status === 'occupied' ? 'occupied' : ''} ${room.needsCleaning ? 'need-cleaning' : ''}`;
                
                // Th√™m badges
                let badgesHtml = '';
                room.badges.forEach(badge => {
                    badgesHtml += `<div class="room-badge badge-${badge.type}">${badge.text}</div>`;
                });
                
                const typeInfo = ROOM_TYPES[room.type];
                
                // Th√¥ng tin kh√°ch h√†ng n·∫øu ph√≤ng ƒëang thu√™
                let customerInfo = '';
                let serviceRequests = '';
                let actions = '';
                
                if (room.customer) {
                    customerInfo = `
                        <div class="room-customer">
                            <i class="fas fa-user"></i> ${room.customer}
                        </div>
                        <div class="room-details">
                            <i class="fas fa-phone"></i> ${room.customerPhone}
                        </div>
                        <div class="room-details">
                            <i class="far fa-calendar"></i> ${room.numDays} ng√†y (ƒë·∫øn ${formatDate(new Date(room.checkinTime.getTime() + room.numDays * 24 * 60 * 60 * 1000))})
                        </div>
                        ${room.specialRequests ? `
                            <div class="room-details">
                                <i class="fas fa-sticky-note"></i> ${room.specialRequests.substring(0, 30)}${room.specialRequests.length > 30 ? '...' : ''}
                            </div>
                        ` : ''}
                    `;
                    
                    // Y√™u c·∫ßu d·ªãch v·ª•
                    if (room.serviceRequests.length > 0) {
                        const pendingServices = room.serviceRequests.filter(req => !req.completed);
                        if (pendingServices.length > 0) {
                            serviceRequests = `
                                <div class="service-request">
                                    <div style="font-size: 0.9em; font-weight: bold; margin-bottom: 5px;">Y√™u c·∫ßu d·ªãch v·ª•:</div>
                                    ${pendingServices.map(req => 
                                        `<span class="service-tag">${req.service}</span>`
                                    ).join('')}
                                </div>
                            `;
                        }
                    }
                    
                    actions = `
                        <button class="room-btn checkout-btn" onclick="checkout(${room.id})">
                            <i class="fas fa-sign-out-alt"></i> Tr·∫£ ph√≤ng
                        </button>
                        <button class="room-btn service-btn" onclick="showServiceModal(${room.id})">
                            <i class="fas fa-concierge-bell"></i> D·ªãch v·ª•
                        </button>
                    `;
                } else if (room.status === 'cleaning') {
                    customerInfo = `
                        <div class="room-customer">
                            <i class="fas fa-broom"></i> ƒêang d·ªçn d·∫πp
                        </div>
                        <div class="room-details">
                            <i class="far fa-clock"></i> C·∫ßn d·ªçn tr∆∞·ªõc khi nh·∫≠n kh√°ch
                        </div>
                    `;
                    
                    actions = `
                        <button class="room-btn checkin-btn" onclick="markCleaningDone(${room.id})">
                            <i class="fas fa-check"></i> ƒê√£ d·ªçn xong
                        </button>
                    `;
                } else {
                    customerInfo = `
                        <div style="text-align: center; padding: 20px 0; color: #999;">
                            <i class="fas fa-door-open" style="font-size: 2em; margin-bottom: 10px;"></i>
                            <div>Ph√≤ng tr·ªëng</div>
                        </div>
                    `;
                    
                    actions = `
                        <button class="room-btn checkin-btn" onclick="showCheckinModal(${room.id})">
                            <i class="fas fa-key"></i> Nh·∫≠n ph√≤ng
                        </button>
                    `;
                }
                
                // Hi·ªÉn th·ªã gi√° (c√≥ khuy·∫øn m√£i n·∫øu c√≥)
                const hasPromo = room.badges.some(b => b.type === 'promo');
                let priceDisplay = '';
                if (hasPromo) {
                    const discountedPrice = room.pricePerDay * 0.8;
                    priceDisplay = `
                        <span style="text-decoration: line-through; color: #999;">${formatCurrency(room.pricePerDay)}</span>
                        <span style="color: #e74c3c;">${formatCurrency(discountedPrice)}</span>
                    `;
                } else {
                    priceDisplay = formatCurrency(room.pricePerDay);
                }
                
                roomDiv.innerHTML = `
                    ${badgesHtml}
                    <div class="room-header-info">
                        <div class="room-number">
                            ${typeInfo.icon} Ph√≤ng ${room.roomNumber}
                            <span class="room-type type-${room.type}">${typeInfo.name}</span>
                        </div>
                        <div class="room-status status-${room.status}">
                            ${room.status === 'occupied' ? 'ƒêang thu√™' : 
                              room.status === 'cleaning' ? 'ƒêang d·ªçn' : 'Tr·ªëng'}
                        </div>
                    </div>
                    ${customerInfo}
                    <div class="room-price">
                        <i class="fas fa-tag"></i> ${priceDisplay} / ƒë√™m
                    </div>
                    ${serviceRequests}
                    <div class="room-actions">
                        ${actions}
                    </div>
                `;
                
                list.appendChild(roomDiv);
            });
        }

        function showCheckinModal(roomId) {
            currentCheckinRoom = roomId;
            document.getElementById('checkinModal').classList.add('active');
            document.getElementById('modalCustomerName').value = '';
            document.getElementById('modalCustomerPhone').value = '';
            document.getElementById('modalNumDays').value = '1';
            document.getElementById('modalSpecialRequests').value = '';
        }

        function confirmCheckin() {
            const customerName = document.getElementById('modalCustomerName').value.trim();
            const customerPhone = document.getElementById('modalCustomerPhone').value.trim();
            const numDays = parseInt(document.getElementById('modalNumDays').value);
            const specialRequests = document.getElementById('modalSpecialRequests').value.trim();
            
            if (!customerName) {
                addNotification('Vui l√≤ng nh·∫≠p t√™n kh√°ch h√†ng!', 'error');
                return;
            }
            
            if (!customerPhone) {
                addNotification('Vui l√≤ng nh·∫≠p s·ªë ƒëi·ªán tho·∫°i!', 'error');
                return;
            }
            
            if (!numDays || numDays < 1) {
                addNotification('S·ªë ng√†y thu√™ ph·∫£i l·ªõn h∆°n 0!', 'error');
                return;
            }
            
            const room = rooms.find(r => r.id === currentCheckinRoom);
            room.customer = customerName;
            room.customerPhone = customerPhone;
            room.numDays = numDays;
            room.checkinTime = new Date();
            room.status = 'occupied';
            room.specialRequests = specialRequests;
            room.needsCleaning = false;
            
            // Th√™m v√†o ho·∫°t ƒë·ªông
            activities.push({
                type: 'checkin',
                roomNumber: room.roomNumber,
                customerName: customerName,
                time: new Date()
            });
            
            closeModal();
            renderRooms();
            updateRoomSelect();
            updateDashboardStats();
            updateManagementStats();
            
            addNotification(`‚úÖ ${customerName} ƒë√£ nh·∫≠n ph√≤ng ${room.roomNumber} - ${numDays} ng√†y`, 'success');
        }

        function checkout(roomId) {
            const room = rooms.find(r => r.id === roomId);
            if (!room.customer) return;
            
            // T√≠nh ti·ªÅn ph√≤ng (c√≥ khuy·∫øn m√£i n·∫øu c√≥)
            const hasPromo = room.badges.some(b => b.type === 'promo');
            const roomCharge = hasPromo ? 
                (room.pricePerDay * 0.8) * room.numDays : 
                room.pricePerDay * room.numDays;
            
            totalRevenue += roomCharge;
            todayRevenue += roomCharge;
            
            addNotification(`üí∞ ${room.customer} tr·∫£ ph√≤ng ${room.roomNumber}. Ti·ªÅn ph√≤ng: ${formatCurrency(roomCharge)} (${room.numDays} ng√†y)`, 'success');
            
            // Th√™m v√†o ho·∫°t ƒë·ªông
            activities.push({
                type: 'checkout',
                roomNumber: room.roomNumber,
                customerName: room.customer,
                time: new Date(),
                amount: roomCharge
            });
            
            // ƒê√°nh d·∫•u ph√≤ng c·∫ßn d·ªçn
            room.status = 'cleaning';
            room.needsCleaning = true;
            const oldCustomer = room.customer;
            
            // X√≥a th√¥ng tin kh√°ch h√†ng sau 3 gi√¢y (ƒë·ªÉ hi·ªÉn th·ªã tr·∫°ng th√°i ƒëang d·ªçn)
            setTimeout(() => {
                room.customer = null;
                room.customerPhone = null;
                room.customerEmail = null;
                room.numDays = 0;
                room.checkinTime = null;
                room.specialRequests = '';
                renderRooms();
                updateRoomSelect();
            }, 3000);
            
            renderRooms();
            updateDashboardStats();
            updateManagementStats();
        }

        function markCleaningDone(roomId) {
            const room = rooms.find(r => r.id === roomId);
            room.status = 'empty';
            room.needsCleaning = false;
            room.serviceRequests = room.serviceRequests.filter(req => !req.completed);
            
            // Th√™m v√†o ho·∫°t ƒë·ªông
            activities.push({
                type: 'cleaning',
                roomNumber: room.roomNumber,
                time: new Date(),
                action: 'completed'
            });
            
            renderRooms();
            addNotification(`üßπ Ph√≤ng ${room.roomNumber} ƒë√£ ƒë∆∞·ª£c d·ªçn xong`, 'success');
        }

        function showServiceModal(roomId) {
            currentServiceRoom = roomId;
            const room = rooms.find(r => r.id == roomId);
            if (!room) return;
            
            document.getElementById('serviceRoomNumber').textContent = room.roomNumber;
            document.getElementById('serviceModal').classList.add('active');
            
            // X√≥a checkbox c≈©
            document.querySelectorAll('.service-checkbox').forEach(cb => cb.checked = false);
            document.getElementById('serviceNotes').value = '';
        }

        function confirmServiceRequest() {
            const room = rooms.find(r => r.id === currentServiceRoom);
            if (!room) return;
            
            const selectedServices = Array.from(document.querySelectorAll('.service-checkbox:checked')).map(cb => cb.value);
            const notes = document.getElementById('serviceNotes').value.trim();
            
            if (selectedServices.length === 0) {
                addNotification('Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt d·ªãch v·ª•!', 'error');
                return;
            }
            
            selectedServices.forEach(service => {
                room.serviceRequests.push({
                    service: service,
                    time: new Date(),
                    completed: false,
                    notes: notes
                });
            });
            
            closeModal();
            renderRooms();
            
            addNotification(`‚úÖ ƒê√£ g·ª≠i y√™u c·∫ßu d·ªãch v·ª• cho ph√≤ng ${room.roomNumber}`, 'success');
        }

        function updateDashboardStats() {
            // T√≠nh to√°n th·ªëng k√™
            const occupiedRooms = rooms.filter(r => r.status === 'occupied').length;
            const cleaningRooms = rooms.filter(r => r.status === 'cleaning').length;
            const availableRooms = rooms.length - occupiedRooms - cleaningRooms;
            const occupancyRate = Math.round((occupiedRooms / rooms.length) * 100);
            
            const todayOrders = orders.filter(o => {
                const orderDate = new Date(o.time);
                const today = new Date();
                return orderDate.getDate() === today.getDate() && 
                       orderDate.getMonth() === today.getMonth() && 
                       orderDate.getFullYear() === today.getFullYear();
            }).length;
            
            // C·∫≠p nh·∫≠t giao di·ªán
            document.getElementById('todayRevenue').textContent = formatCurrency(todayRevenue);
            document.getElementById('occupancyRate').textContent = `${occupancyRate}%`;
            document.getElementById('availableRooms').textContent = availableRooms;
            document.getElementById('todayOrders').textContent = todayOrders;
            
            // C·∫≠p nh·∫≠t danh s√°ch ho·∫°t ƒë·ªông
            updateActivityList();
        }

        function updateActivityList() {
            const activityList = document.getElementById('activityList');
            activityList.innerHTML = '';
            
            // L·∫•y 10 ho·∫°t ƒë·ªông g·∫ßn ƒë√¢y nh·∫•t
            const recentActivities = [...activities]
                .sort((a, b) => new Date(b.time) - new Date(a.time))
                .slice(0, 10);
            
            if (recentActivities.length === 0) {
                activityList.innerHTML = `
                    <div class="empty-state">
                        <p>Ch∆∞a c√≥ ho·∫°t ƒë·ªông n√†o</p>
                    </div>
                `;
                return;
            }
            
            recentActivities.forEach(activity => {
                const activityDiv = document.createElement('div');
                activityDiv.className = 'activity-item';
                
                let iconClass = '';
                let icon = '';
                let text = '';
                
                switch(activity.type) {
                    case 'checkin':
                        iconClass = 'icon-checkin';
                        icon = 'fas fa-key';
                        text = `<strong>${activity.customerName}</strong> nh·∫≠n ph√≤ng <strong>${activity.roomNumber}</strong>`;
                        break;
                    case 'checkout':
                        iconClass = 'icon-checkout';
                        icon = 'fas fa-sign-out-alt';
                        text = `<strong>${activity.customerName}</strong> tr·∫£ ph√≤ng <strong>${activity.roomNumber}</strong>`;
                        if (activity.amount) {
                            text += ` - ${formatCurrency(activity.amount)}`;
                        }
                        break;
                    case 'order':
                        iconClass = 'icon-order';
                        icon = 'fas fa-utensils';
                        text = `ƒê∆°n h√†ng t·ª´ ph√≤ng <strong>${activity.roomNumber}</strong> - ${activity.customerName}`;
                        if (activity.amount) {
                            text += ` - ${formatCurrency(activity.amount)}`;
                        }
                        break;
                    case 'cleaning':
                        iconClass = 'icon-cleaning';
                        icon = 'fas fa-broom';
                        text = `Ph√≤ng <strong>${activity.roomNumber}</strong> ${activity.action === 'completed' ? 'ƒë√£ ƒë∆∞·ª£c d·ªçn xong' : 'c·∫ßn d·ªçn d·∫πp'}`;
                        break;
                }
                
                activityDiv.innerHTML = `
                    <div class="activity-icon ${iconClass}">
                        <i class="${icon}"></i>
                    </div>
                    <div class="activity-details">
                        <div>${text}</div>
                        <div class="activity-time">
                            ${new Date(activity.time).toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' })} - 
                            ${new Date(activity.time).toLocaleDateString('vi-VN')}
                        </div>
                    </div>
                `;
                
                activityList.appendChild(activityDiv);
            });
        }

        function formatDate(date) {
            return date.toLocaleDateString('vi-VN', { day: '2-digit', month: '2-digit', year: 'numeric' });
        }

        // ==================== CH·ª®C NƒÇNG QU·∫¢N L√ù ====================
        function switchManagementTab(tab) {
            document.querySelectorAll('.management-tab').forEach(t => t.classList.remove('active'));
            document.getElementById(tab + 'Tab').classList.add('active');
            
            // C·∫≠p nh·∫≠t n√∫t active
            const buttons = event.target.parentElement.querySelectorAll('.view-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // T·∫£i d·ªØ li·ªáu tab
            switch(tab) {
                case 'overview':
                    updateManagementStats();
                    renderManagementCharts();
                    break;
                case 'financial':
                    renderFinancialCharts();
                    break;
                case 'rooms':
                    renderRoomCharts();
                    break;
                case 'customers':
                    renderCustomerCharts();
                    break;
                case 'staff':
                    renderStaffCharts();
                    break;
                case 'reports':
                    // Tab b√°o c√°o kh√¥ng c·∫ßn t·∫£i d·ªØ li·ªáu tr∆∞·ªõc
                    break;
            }
        }

        function updateManagementStats() {
            // T√≠nh to√°n thay ƒë·ªïi so v·ªõi th√°ng tr∆∞·ªõc
            const revenueChange = ((managementData.monthlyRevenue - managementData.lastMonthRevenue) / managementData.lastMonthRevenue * 100).toFixed(1);
            const occupancyChange = (managementData.monthlyOccupancy - managementData.lastMonthOccupancy).toFixed(1);
            const expensesChange = ((managementData.monthlyExpenses - managementData.lastMonthExpenses) / managementData.lastMonthExpenses * 100).toFixed(1);
            
            // C·∫≠p nh·∫≠t UI
            document.getElementById('monthRevenue').textContent = formatCurrency(managementData.monthlyRevenue);
            document.getElementById('monthRevenueChange').innerHTML = `
                ${revenueChange >= 0 ? '+' : ''}${revenueChange}% so v·ªõi th√°ng tr∆∞·ªõc
                <span class="${revenueChange >= 0 ? 'positive-change' : 'negative-change'}" style="margin-left: 5px;">
                    ${revenueChange >= 0 ? '‚Üó' : '‚Üò'}
                </span>
            `;
            
            document.getElementById('monthOccupancy').textContent = `${managementData.monthlyOccupancy}%`;
            document.getElementById('monthOccupancyChange').innerHTML = `
                ${occupancyChange >= 0 ? '+' : ''}${occupancyChange}% so v·ªõi th√°ng tr∆∞·ªõc
                <span class="${occupancyChange >= 0 ? 'positive-change' : 'negative-change'}" style="margin-left: 5px;">
                    ${occupancyChange >= 0 ? '‚Üó' : '‚Üò'}
                </span>
            `;
            
            document.getElementById('vipCustomers').textContent = managementData.vipCustomers;
            document.getElementById('monthExpenses').textContent = formatCurrency(managementData.monthlyExpenses);
            document.getElementById('monthExpensesChange').innerHTML = `
                ${expensesChange >= 0 ? '+' : ''}${expensesChange}% so v·ªõi th√°ng tr∆∞·ªõc
                <span class="${expensesChange >= 0 ? 'negative-change' : 'positive-change'}" style="margin-left: 5px;">
                    ${expensesChange >= 0 ? '‚Üó' : '‚Üò'}
                </span>
            `;
        }

        function renderManagementCharts() {
            renderRevenueTrendChart();
            renderRevenueDistribution();
            renderFloorOccupancyChart();
        }

        function renderRevenueTrendChart() {
            const chart = document.getElementById('revenueTrendChart');
            chart.innerHTML = '';
            
            const months = managementData.financialHistory.map(item => item.month);
            const revenues = managementData.financialHistory.map(item => item.revenue);
            const maxRevenue = Math.max(...revenues);
            
            months.forEach((month, index) => {
                const height = (revenues[index] / maxRevenue) * 100;
                const bar = document.createElement('div');
                bar.className = 'chart-bar';
                bar.style.height = `${height}%`;
                bar.style.background = `linear-gradient(to top, #3498db, #2c3e50)`;
                
                const label = document.createElement('div');
                label.className = 'chart-label';
                label.textContent = month;
                
                const tooltip = document.createElement('div');
                tooltip.className = 'tooltiptext';
                tooltip.textContent = `${month}: ${formatCurrency(revenues[index])}`;
                
                bar.appendChild(label);
                bar.appendChild(tooltip);
                chart.appendChild(bar);
            });
        }

        function renderRevenueDistribution() {
            const container = document.getElementById('revenueDistribution');
            
            // T√≠nh to√°n doanh thu theo d·ªãch v·ª•
            const roomRevenue = managementData.monthlyRevenue * 0.7; // 70% t·ª´ ph√≤ng
            const restaurantRevenue = managementData.monthlyRevenue * 0.2; // 20% t·ª´ nh√† h√†ng
            const serviceRevenue = managementData.monthlyRevenue * 0.1; // 10% t·ª´ d·ªãch v·ª• kh√°c
            
            const data = [
                { label: 'Ph√≤ng ·ªêc', value: roomRevenue, color: '#3498db' },
                { label: 'Nh√† H√†ng', value: restaurantRevenue, color: '#27ae60' },
                { label: 'D·ªãch V·ª• Kh√°c', value: serviceRevenue, color: '#9b59b6' }
            ];
            
            let html = '<div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 20px;">';
            data.forEach(item => {
                const percentage = ((item.value / managementData.monthlyRevenue) * 100).toFixed(1);
                html += `
                    <div style="text-align: center;">
                        <div style="width: 100px; height: 100px; border-radius: 50%; background: conic-gradient(${item.color} 0% ${percentage}%, #eee ${percentage}% 100%); display: flex; align-items: center; justify-content: center; margin: 0 auto 10px;">
                            <div style="width: 70px; height: 70px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #2c3e50;">
                                ${percentage}%
                            </div>
                        </div>
                        <div style="font-weight: bold; margin-bottom: 5px;">${item.label}</div>
                        <div style="color: #666; font-size: 0.9em;">${formatCurrency(item.value)}</div>
                    </div>
                `;
            });
            html += '</div>';
            
            container.innerHTML = html;
        }

        function renderFloorOccupancyChart() {
            const chart = document.getElementById('floorOccupancyChart');
            chart.innerHTML = '';
            
            // T√≠nh t·ª∑ l·ªá thu√™ ph√≤ng theo t·∫ßng
            const floorOccupancy = {};
            for (let floor = 1; floor <= FLOORS; floor++) {
                const floorRooms = rooms.filter(r => r.floor === floor);
                const occupiedRooms = floorRooms.filter(r => r.status === 'occupied').length;
                floorOccupancy[floor] = Math.round((occupiedRooms / floorRooms.length) * 100);
            }
            
            // T√¨m t·ª∑ l·ªá cao nh·∫•t ƒë·ªÉ t√≠nh chi·ªÅu cao
            const maxOccupancy = Math.max(...Object.values(floorOccupancy));
            
            Object.keys(floorOccupancy).forEach(floor => {
                const occupancy = floorOccupancy[floor];
                const height = maxOccupancy > 0 ? (occupancy / maxOccupancy) * 100 : 0;
                
                const bar = document.createElement('div');
                bar.className = 'chart-bar';
                bar.style.height = `${height}%`;
                bar.style.background = `linear-gradient(to top, #27ae60, #2ecc71)`;
                
                const label = document.createElement('div');
                label.className = 'chart-label';
                label.textContent = `T${floor}`;
                
                const tooltip = document.createElement('div');
                tooltip.className = 'tooltiptext';
                tooltip.textContent = `T·∫ßng ${floor}: ${occupancy}% thu√™`;
                
                bar.appendChild(label);
                bar.appendChild(tooltip);
                chart.appendChild(bar);
            });
        }

        function renderFinancialCharts() {
            renderDetailedRevenueChart();
            renderExpensesProfitChart();
            renderFinancialReport();
        }

        function renderDetailedRevenueChart() {
            const chart = document.getElementById('detailedRevenueChart');
            chart.innerHTML = '';
            
            const periods = ['Tu·∫ßn 1', 'Tu·∫ßn 2', 'Tu·∫ßn 3', 'Tu·∫ßn 4'];
            const revenues = periods.map(() => Math.random() * 50000000 + 100000000);
            const maxRevenue = Math.max(...revenues);
            
            periods.forEach((period, index) => {
                const height = (revenues[index] / maxRevenue) * 100;
                const bar = document.createElement('div');
                bar.className = 'chart-bar';
                bar.style.height = `${height}%`;
                bar.style.background = `linear-gradient(to top, #3498db, #2980b9)`;
                
                const label = document.createElement('div');
                label.className = 'chart-label';
                label.textContent = period;
                
                const tooltip = document.createElement('div');
                tooltip.className = 'tooltiptext';
                tooltip.textContent = `${period}: ${formatCurrency(revenues[index])}`;
                
                bar.appendChild(label);
                bar.appendChild(tooltip);
                chart.appendChild(bar);
            });
        }

        function renderExpensesProfitChart() {
            const chart = document.getElementById('expensesProfitChart');
            chart.innerHTML = '';
            
            const months = ['Th1', 'Th2', 'Th3', 'Th4', 'Th5', 'Th6'];
            const expenses = months.map(() => Math.random() * 30000000 + 30000000);
            const profits = months.map(() => Math.random() * 70000000 + 50000000);
            
            const maxValue = Math.max(...expenses, ...profits);
            
            months.forEach((month, index) => {
                const expenseHeight = (expenses[index] / maxValue) * 100;
                const profitHeight = (profits[index] / maxValue) * 100;
                
                const group = document.createElement('div');
                group.style.display = 'flex';
                group.style.flexDirection = 'column';
                group.style.alignItems = 'center';
                group.style.flex: 1;
                group.style.gap = '2px';
                
                // C·ªôt chi ph√≠
                const expenseBar = document.createElement('div');
                expenseBar.style.width = '80%';
                expenseBar.style.height = `${expenseHeight}%`;
                expenseBar.style.background = '#e74c3c';
                expenseBar.style.borderRadius = '5px 5px 0 0';
                expenseBar.className = 'tooltip';
                
                const expenseTooltip = document.createElement('div');
                expenseTooltip.className = 'tooltiptext';
                expenseTooltip.textContent = `${month} - Chi ph√≠: ${formatCurrency(expenses[index])}`;
                expenseBar.appendChild(expenseTooltip);
                
                // C·ªôt l·ª£i nhu·∫≠n
                const profitBar = document.createElement('div');
                profitBar.style.width = '80%';
                profitBar.style.height = `${profitHeight}%`;
                profitBar.style.background = '#27ae60';
                profitBar.style.borderRadius = '0 0 5px 5px';
                profitBar.className = 'tooltip';
                
                const profitTooltip = document.createElement('div');
                profitTooltip.className = 'tooltiptext';
                profitTooltip.textContent = `${month} - L·ª£i nhu·∫≠n: ${formatCurrency(profits[index])}`;
                profitBar.appendChild(profitTooltip);
                
                // Nh√£n
                const label = document.createElement('div');
                label.className = 'chart-label';
                label.textContent = month;
                
                group.appendChild(expenseBar);
                group.appendChild(profitBar);
                group.appendChild(label);
                chart.appendChild(group);
            });
        }

        function renderFinancialReport() {
            const table = document.getElementById('financialReport');
            
            const categories = [
                { name: 'Ph√≤ng ·ªêc', revenue: managementData.monthlyRevenue * 0.7, expenses: managementData.monthlyExpenses * 0.4, profit: 0 },
                { name: 'Nh√† H√†ng', revenue: managementData.monthlyRevenue * 0.2, expenses: managementData.monthlyExpenses * 0.3, profit: 0 },
                { name: 'D·ªãch V·ª•', revenue: managementData.monthlyRevenue * 0.1, expenses: managementData.monthlyExpenses * 0.2, profit: 0 },
                { name: 'Kh√°c', revenue: managementData.monthlyRevenue * 0.05, expenses: managementData.monthlyExpenses * 0.1, profit: 0 }
            ];
            
            // T√≠nh l·ª£i nhu·∫≠n
            categories.forEach(cat => {
                cat.profit = cat.revenue - cat.expenses;
            });
            
            let html = '';
            categories.forEach(cat => {
                const profitPercentage = cat.revenue > 0 ? ((cat.profit / cat.revenue) * 100).toFixed(1) : '0.0';
                html += `
                    <tr>
                        <td>${cat.name}</td>
                        <td>${formatCurrency(cat.revenue)}</td>
                        <td>${formatCurrency(cat.expenses)}</td>
                        <td style="color: ${cat.profit >= 0 ? '#27ae60' : '#e74c3c'}; font-weight: bold;">
                            ${formatCurrency(cat.profit)}
                        </td>
                        <td>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <span>${profitPercentage}%</span>
                                <div style="flex: 1; height: 10px; background: #e9ecef; border-radius: 5px; overflow: hidden;">
                                    <div style="width: ${Math.min(Math.max(profitPercentage, 0), 100)}%; height: 100%; background: ${cat.profit >= 0 ? '#27ae60' : '#e74c3c'};"></div>
                                </div>
                            </div>
                        </td>
                    </tr>
                `;
            });
            
            // T·ªïng c·ªông
            const totalRevenue = categories.reduce((sum, cat) => sum + cat.revenue, 0);
            const totalExpenses = categories.reduce((sum, cat) => sum + cat.expenses, 0);
            const totalProfit = totalRevenue - totalExpenses;
            const totalProfitPercentage = totalRevenue > 0 ? ((totalProfit / totalRevenue) * 100).toFixed(1) : '0.0';
            
            html += `
                <tr style="background: #f8f9fa; font-weight: bold;">
                    <td>T·ªîNG C·ªòNG</td>
                    <td>${formatCurrency(totalRevenue)}</td>
                    <td>${formatCurrency(totalExpenses)}</td>
                    <td style="color: ${totalProfit >= 0 ? '#27ae60' : '#e74c3c'};">${formatCurrency(totalProfit)}</td>
                    <td>${totalProfitPercentage}%</td>
                </tr>
            `;
            
            table.innerHTML = html;
        }

        function renderRoomCharts() {
            renderRoomPerformanceChart();
            renderRoomHistoryTable();
            updateRoomStats();
        }

        function renderRoomPerformanceChart() {
            const chart = document.getElementById('roomPerformanceChart');
            chart.innerHTML = '';
            
            // T√≠nh hi·ªáu su·∫•t theo lo·∫°i ph√≤ng
            const roomTypes = ['standard', 'vip', 'suite'];
            const performanceData = roomTypes.map(type => {
                const typeRooms = rooms.filter(r => r.type === type);
                const totalRevenue = typeRooms.reduce((sum, room) => sum + room.totalRevenue, 0);
                const avgOccupancy = typeRooms.reduce((sum, room) => sum + room.occupancyRate, 0) / typeRooms.length;
                return { type, revenue: totalRevenue, occupancy: avgOccupancy };
            });
            
            const maxRevenue = Math.max(...performanceData.map(d => d.revenue));
            const maxOccupancy = Math.max(...performanceData.map(d => d.occupancy));
            
            performanceData.forEach(data => {
                const revenueHeight = (data.revenue / maxRevenue) * 100;
                const occupancyHeight = (data.occupancy / maxOccupancy) * 100;
                
                const group = document.createElement('div');
                group.style.display = 'flex';
                group.style.flexDirection: 'column';
                group.style.alignItems: 'center';
                group.style.flex: 1;
                group.style.gap: '5px';
                
                // C·ªôt doanh thu
                const revenueBar = document.createElement('div');
                revenueBar.style.width = '60%';
                revenueBar.style.height = `${revenueHeight}%`;
                revenueBar.style.background = '#3498db';
                revenueBar.style.borderRadius = '5px 5px 0 0';
                revenueBar.className = 'tooltip';
                
                const revenueTooltip = document.createElement('div');
                revenueTooltip.className = 'tooltiptext';
                revenueTooltip.textContent = `${ROOM_TYPES[data.type].name}: ${formatCurrency(data.revenue)}`;
                revenueBar.appendChild(revenueTooltip);
                
                // C·ªôt t·ª∑ l·ªá thu√™
                const occupancyBar = document.createElement('div');
                occupancyBar.style.width = '60%';
                occupancyBar.style.height = `${occupancyHeight}%`;
                occupancyBar.style.background = '#27ae60';
                occupancyBar.style.borderRadius = '0 0 5px 5px';
                occupancyBar.className = 'tooltip';
                
                const occupancyTooltip = document.createElement('div');
                occupancyTooltip.className = 'tooltiptext';
                occupancyTooltip.textContent = `${ROOM_TYPES[data.type].name}: ${data.occupancy.toFixed(1)}%`;
                occupancyBar.appendChild(occupancyTooltip);
                
                // Nh√£n
                const label = document.createElement('div');
                label.className = 'chart-label';
                label.textContent = ROOM_TYPES[data.type].name;
                
                group.appendChild(revenueBar);
                group.appendChild(occupancyBar);
                group.appendChild(label);
                chart.appendChild(group);
            });
        }

        function renderRoomHistoryTable() {
            const table = document.getElementById('roomHistoryTable');
            
            // L·∫•y 10 ph√≤ng c√≥ doanh thu cao nh·∫•t
            const topRooms = [...managementData.roomHistory]
                .sort((a, b) => b.totalRevenue - a.totalRevenue)
                .slice(0, 10);
            
            let html = '';
            topRooms.forEach(room => {
                html += `
                    <tr>
                        <td>${room.roomNumber}</td>
                        <td>${ROOM_TYPES[room.type].name}</td>
                        <td>${room.bookingCount}</td>
                        <td>${formatCurrency(room.totalRevenue)}</td>
                        <td>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <span>${room.occupancyRate}%</span>
                                <div style="flex: 1; height: 8px; background: #e9ecef; border-radius: 4px; overflow: hidden;">
                                    <div style="width: ${room.occupancyRate}%; height: 100%; background: #27ae60;"></div>
                                </div>
                            </div>
                        </td>
                    </tr>
                `;
            });
            
            table.innerHTML = html;
        }

        function updateRoomStats() {
            // Ph√≤ng thu√™ nhi·ªÅu nh·∫•t
            const mostBooked = [...managementData.roomHistory].sort((a, b) => b.bookingCount - a.bookingCount)[0];
            document.getElementById('mostBookedRoom').textContent = mostBooked ? `${mostBooked.roomNumber} (${mostBooked.bookingCount})` : '-';
            
            // Ph√≤ng doanh thu cao nh·∫•t
            const highestRevenue = [...managementData.roomHistory].sort((a, b) => b.totalRevenue - a.totalRevenue)[0];
            document.getElementById('highestRevenueRoom').textContent = highestRevenue ? formatCurrency(highestRevenue.totalRevenue) : '-';
            
            // Th·ªùi gian thu√™ trung b√¨nh
            const avgStay = rooms.filter(r => r.numDays > 0).reduce((sum, room) => sum + room.numDays, 0);
            const avgStayCount = rooms.filter(r => r.numDays > 0).length;
            document.getElementById('avgStayDuration').textContent = avgStayCount > 0 ? (avgStay / avgStayCount).toFixed(1) : '-';
            
            // Ph√≤ng c√≥ t·ª∑ l·ªá thu√™ cao nh·∫•t
            const highestOccupancy = [...managementData.roomHistory].sort((a, b) => b.occupancyRate - a.occupancyRate)[0];
            document.getElementById('highestOccupancyRoom').textContent = highestOccupancy ? `${highestOccupancy.roomNumber} (${highestOccupancy.occupancyRate}%)` : '-';
        }

        function renderCustomerCharts() {
            renderCustomerDistributionChart();
            renderFrequentCustomersTable();
            renderCustomerTrendChart();
        }

        function renderCustomerDistributionChart() {
            const chart = document.getElementById('customerDistributionChart');
            
            // Ph√¢n t√≠ch kh√°ch h√†ng
            const vipCustomers = managementData.customerHistory.filter(c => c.isVip).length;
            const regularCustomers = managementData.customerHistory.length - vipCustomers;
            const repeatCustomers = managementData.customerHistory.filter(c => c.visits > 1).length;
            
            const data = [
                { label: 'Kh√°ch VIP', value: vipCustomers, color: '#f1c40f' },
                { label: 'Kh√°ch th∆∞·ªùng', value: regularCustomers, color: '#3498db' },
                { label: 'Kh√°ch quay l·∫°i', value: repeatCustomers, color: '#27ae60' }
            ];
            
            let html = '<div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 20px;">';
            data.forEach(item => {
                const percentage = managementData.customerHistory.length > 0 ? 
                    ((item.value / managementData.customerHistory.length) * 100).toFixed(1) : '0.0';
                html += `
                    <div style="text-align: center;">
                        <div style="width: 100px; height: 100px; border-radius: 50%; background: ${item.color}; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px; color: white; font-size: 1.5em; font-weight: bold;">
                            ${item.value}
                        </div>
                        <div style="font-weight: bold; margin-bottom: 5px;">${item.label}</div>
                        <div style="color: #666; font-size: 0.9em;">${percentage}%</div>
                    </div>
                `;
            });
            html += '</div>';
            
            chart.innerHTML = html;
        }

        function renderFrequentCustomersTable() {
            const table = document.getElementById('frequentCustomersTable');
            
            // L·∫•y 10 kh√°ch h√†ng th∆∞·ªùng xuy√™n nh·∫•t
            const frequentCustomers = [...managementData.customerHistory]
                .sort((a, b) => b.visits - a.visits)
                .slice(0, 10);
            
            let html = '';
            frequentCustomers.forEach(customer => {
                html += `
                    <tr>
                        <td>${customer.name}</td>
                        <td>${customer.visits}</td>
                        <td>${formatCurrency(customer.totalSpent)}</td>
                        <td>
                            <span class="status-badge ${customer.isVip ? 'status-active' : 'status-inactive'}">
                                ${customer.isVip ? 'VIP' : 'Th∆∞·ªùng'}
                            </span>
                        </td>
                    </tr>
                `;
            });
            
            table.innerHTML = html;
        }

        function renderCustomerTrendChart() {
            const chart = document.getElementById('customerTrendChart');
            chart.innerHTML = '';
            
            // D·ªØ li·ªáu demo v·ªÅ xu h∆∞·ªõng kh√°ch h√†ng
            const months = ['T1', 'T2', 'T3', 'T4', 'T5', 'T6'];
            const newCustomers = months.map(() => Math.floor(Math.random() * 50) + 30);
            const returningCustomers = months.map(() => Math.floor(Math.random() * 30) + 20);
            
            const maxCustomers = Math.max(...newCustomers, ...returningCustomers);
            
            months.forEach((month, index) => {
                const newHeight = (newCustomers[index] / maxCustomers) * 100;
                const returnHeight = (returningCustomers[index] / maxCustomers) * 100;
                
                const group = document.createElement('div');
                group.style.display = 'flex';
                group.style.flexDirection: 'column';
                group.style.alignItems: 'center';
                group.style.flex: 1;
                group.style.gap: '2px';
                
                // C·ªôt kh√°ch m·ªõi
                const newBar = document.createElement('div');
                newBar.style.width = '80%';
                newBar.style.height = `${newHeight}%`;
                newBar.style.background = '#3498db';
                newBar.style.borderRadius = '5px 5px 0 0';
                
                // C·ªôt kh√°ch quay l·∫°i
                const returnBar = document.createElement('div');
                returnBar.style.width = '80%';
                returnBar.style.height = `${returnHeight}%`;
                returnBar.style.background = '#9b59b6';
                returnBar.style.borderRadius = '0 0 5px 5px';
                
                // Nh√£n
                const label = document.createElement('div');
                label.className = 'chart-label';
                label.textContent = month;
                
                group.appendChild(newBar);
                group.appendChild(returnBar);
                group.appendChild(label);
                chart.appendChild(group);
            });
        }

        function renderStaffCharts() {
            renderStaffPerformanceTable();
            renderStaffSchedule();
            renderStaffDistributionChart();
        }

        function renderStaffPerformanceTable() {
            const table = document.getElementById('staffPerformanceTable');
            
            let html = '';
            managementData.staffPerformance.forEach(staff => {
                const positionNames = {
                    'reception': 'L·ªÖ t√¢n',
                    'housekeeping': 'D·ªçn ph√≤ng',
                    'restaurant': 'Nh√† h√†ng',
                    'manager': 'Qu·∫£n l√Ω',
                    'security': 'B·∫£o v·ªá'
                };
                
                const ratingStars = '‚òÖ'.repeat(Math.floor(staff.customerRating / 20)) + '‚òÜ'.repeat(5 - Math.floor(staff.customerRating / 20));
                
                html += `
                    <tr>
                        <td>${staff.name}</td>
                        <td>${positionNames[staff.position]}</td>
                        <td>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <span>${staff.performance}%</span>
                                <div style="flex: 1; height: 8px; background: #e9ecef; border-radius: 4px; overflow: hidden;">
                                    <div style="width: ${staff.performance}%; height: 100%; background: ${staff.performance >= 90 ? '#27ae60' : staff.performance >= 80 ? '#f39c12' : '#e74c3c'};"></div>
                                </div>
                            </div>
                        </td>
                        <td>
                            <span style="color: #f39c12; font-size: 1.2em;">${ratingStars}</span>
                            <div style="font-size: 0.8em; color: #666;">${staff.customerRating}/100</div>
                        </td>
                        <td>
                            <button class="modal-btn confirm" style="padding: 5px 10px; font-size: 0.8em;" onclick="viewStaffDetails(${staff.id})">
                                <i class="fas fa-eye"></i>
                            </button>
                        </td>
                    </tr>
                `;
            });
            
            table.innerHTML = html;
        }

        function renderStaffSchedule() {
            const schedule = document.getElementById('staffSchedule');
            
            const shifts = [
                { time: '06:00 - 14:00', staff: ['Nguy·ªÖn Th·ªã Hoa', 'Tr·∫ßn VƒÉn B√¨nh'] },
                { time: '14:00 - 22:00', staff: ['L√™ Th·ªã Mai', 'Ph·∫°m VƒÉn C∆∞·ªùng'] },
                { time: '22:00 - 06:00', staff: ['Ho√†ng Th·ªã Lan'] }
            ];
            
            let html = '<div style="display: flex; flex-direction: column; gap: 15px;">';
            shifts.forEach(shift => {
                html += `
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 10px;">
                        <div style="font-weight: bold; color: #2c3e50; margin-bottom: 10px;">
                            <i class="far fa-clock"></i> ${shift.time}
                        </div>
                        <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                            ${shift.staff.map(name => `
                                <div style="background: white; padding: 8px 15px; border-radius: 20px; border: 1px solid #dee2e6;">
                                    ${name}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            });
            html += '</div>';
            
            schedule.innerHTML = html;
        }

        function renderStaffDistributionChart() {
            const chart = document.getElementById('staffDistributionChart');
            chart.innerHTML = '';
            
            // Ph√¢n b·ªï nh√¢n s·ª± theo b·ªô ph·∫≠n
            const departments = {};
            managementData.staffMembers.forEach(staff => {
                if (!departments[staff.position]) {
                    departments[staff.position] = 0;
                }
                departments[staff.position]++;
            });
            
            const departmentNames = {
                'reception': 'L·ªÖ t√¢n',
                'housekeeping': 'D·ªçn ph√≤ng',
                'restaurant': 'Nh√† h√†ng',
                'manager': 'Qu·∫£n l√Ω',
                'security': 'B·∫£o v·ªá'
            };
            
            const colors = ['#3498db', '#27ae60', '#9b59b6', '#f39c12', '#e74c3c'];
            let colorIndex = 0;
            
            const maxCount = Math.max(...Object.values(departments));
            
            Object.keys(departments).forEach(dept => {
                const count = departments[dept];
                const height = (count / maxCount) * 100;
                
                const bar = document.createElement('div');
                bar.className = 'chart-bar';
                bar.style.height = `${height}%`;
                bar.style.background = colors[colorIndex % colors.length];
                
                const label = document.createElement('div');
                label.className = 'chart-label';
                label.textContent = departmentNames[dept] || dept;
                
                const tooltip = document.createElement('div');
                tooltip.className = 'tooltiptext';
                tooltip.textContent = `${departmentNames[dept] || dept}: ${count} ng∆∞·ªùi`;
                
                bar.appendChild(label);
                bar.appendChild(tooltip);
                chart.appendChild(bar);
                
                colorIndex++;
            });
        }

        // ==================== CH·ª®C NƒÇNG B√ÅO C√ÅO ====================
        function generateReport(type) {
            const reportModal = document.getElementById('reportModal');
            const reportContent = document.getElementById('reportContent');
            
            let reportHtml = '';
            const today = new Date();
            const dateStr = today.toLocaleDateString('vi-VN');
            
            switch(type) {
                case 'financial':
                    reportHtml = generateFinancialReport();
                    break;
                case 'occupancy':
                    reportHtml = generateOccupancyReport();
                    break;
                case 'customers':
                    reportHtml = generateCustomerReport();
                    break;
                case 'staff':
                    reportHtml = generateStaffReport();
                    break;
                default:
                    reportHtml = '<p>B√°o c√°o kh√¥ng t·ªìn t·∫°i</p>';
            }
            
            reportContent.innerHTML = reportHtml;
            reportModal.classList.add('active');
        }

        function generateFinancialReport() {
            const today = new Date();
            const month = today.toLocaleDateString('vi-VN', { month: 'long', year: 'numeric' });
            
            return `
                <h3 style="text-align: center; color: #2c3e50; margin-bottom: 20px;">B√ÅO C√ÅO T√ÄI CH√çNH</h3>
                <p style="text-align: center; color: #666; margin-bottom: 30px;">Th√°ng ${month}</p>
                
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 30px;">
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                        <h4 style="color: #3498db; margin-bottom: 15px;">T·ªïng quan</h4>
                        <p><strong>Doanh thu:</strong> ${formatCurrency(managementData.monthlyRevenue)}</p>
                        <p><strong>Chi ph√≠:</strong> ${formatCurrency(managementData.monthlyExpenses)}</p>
                        <p><strong>L·ª£i nhu·∫≠n:</strong> ${formatCurrency(managementData.monthlyRevenue - managementData.monthlyExpenses)}</p>
                        <p><strong>T·ª∑ su·∫•t l·ª£i nhu·∫≠n:</strong> ${(((managementData.monthlyRevenue - managementData.monthlyExpenses) / managementData.monthlyRevenue) * 100).toFixed(1)}%</p>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                        <h4 style="color: #27ae60; margin-bottom: 15px;">Ph√¢n b·ªï doanh thu</h4>
                        <p><strong>Ph√≤ng ·ªëc:</strong> ${formatCurrency(managementData.monthlyRevenue * 0.7)} (70%)</p>
                        <p><strong>Nh√† h√†ng:</strong> ${formatCurrency(managementData.monthlyRevenue * 0.2)} (20%)</p>
                        <p><strong>D·ªãch v·ª• kh√°c:</strong> ${formatCurrency(managementData.monthlyRevenue * 0.1)} (10%)</p>
                    </div>
                </div>
                
                <h4 style="color: #2c3e50; margin-bottom: 15px;">Xu h∆∞·ªõng 6 th√°ng</h4>
                <table style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr style="background: #f8f9fa;">
                            <th style="padding: 10px; border: 1px solid #ddd;">Th√°ng</th>
                            <th style="padding: 10px; border: 1px solid #ddd;">Doanh thu</th>
                            <th style="padding: 10px; border: 1px solid #ddd;">Chi ph√≠</th>
                            <th style="padding: 10px; border: 1px solid #ddd;">L·ª£i nhu·∫≠n</th>
                            <th style="padding: 10px; border: 1px solid #ddd;">T·ª∑ l·ªá thu√™</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${managementData.financialHistory.map(item => `
                            <tr>
                                <td style="padding: 10px; border: 1px solid #ddd;">${item.month}</td>
                                <td style="padding: 10px; border: 1px solid #ddd;">${formatCurrency(item.revenue)}</td>
                                <td style="padding: 10px; border: 1px solid #ddd;">${formatCurrency(item.expenses)}</td>
                                <td style="padding: 10px; border: 1px solid #ddd; color: ${item.profit >= 0 ? '#27ae60' : '#e74c3c'};">${formatCurrency(item.profit)}</td>
                                <td style="padding: 10px; border: 1px solid #ddd;">${item.occupancy.toFixed(1)}%</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
                
                <div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                    <h4 style="color: #2c3e50; margin-bottom: 15px;">Ph√¢n t√≠ch</h4>
                    <p><strong>ƒêi·ªÉm m·∫°nh:</strong> Doanh thu ph√≤ng ·ªïn ƒë·ªãnh, t·ª∑ l·ªá thu√™ cao</p>
                    <p><strong>ƒêi·ªÉm y·∫øu:</strong> Chi ph√≠ nh√¢n s·ª± tƒÉng, c·∫ßn t·ªëi ∆∞u</p>
                    <p><strong>ƒê·ªÅ xu·∫•t:</strong> TƒÉng c∆∞·ªùng d·ªãch v·ª• nh√† h√†ng, t·ªëi ∆∞u chi ph√≠ v·∫≠n h√†nh</p>
                </div>
            `;
        }

        function generateMonthlyReport() {
            generateReport('financial');
        }

        function generateQuarterlyReport() {
            addNotification('B√°o c√°o qu√Ω ƒëang ƒë∆∞·ª£c t·∫°o...', 'info');
        }

        function generateYearlyReport() {
            addNotification('B√°o c√°o nƒÉm ƒëang ƒë∆∞·ª£c t·∫°o...', 'info');
        }

        function printReport() {
            window.print();
        }

        function downloadReport() {
            addNotification('ƒêang t·∫£i xu·ªëng b√°o c√°o...', 'success');
        }

        // ==================== KH·ªûI CH·∫†Y H·ªÜ TH·ªêNG ====================
        window.onload = initializeSystem;
    </script>
</body>
</html>
