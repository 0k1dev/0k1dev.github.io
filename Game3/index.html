<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game C√¥ng Th√†nh 8 ƒê·ªôi</title>
    <style>
        /* CSS */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #e9ebee;
            margin: 0;
            color: #333;
        }

        .game-container {
            text-align: center;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 12px;
            background-color: #fff;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
            width: 95%;
            max-width: 1200px;
        }

        h1 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .team-status {
            display: flex;
            flex-wrap: wrap; /* Cho ph√©p c√°c ƒë·ªôi xu·ªëng d√≤ng */
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }

        .team {
            padding: 15px;
            border-radius: 8px;
            width: 22%; /* 4 ƒë·ªôi tr√™n 1 h√†ng */
            min-width: 200px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s;
            text-align: left;
        }

        .team:hover {
            transform: translateY(-3px);
        }
        
        /* M√†u s·∫Øc cho 8 ƒë·ªôi */
        .team-1 { border: 3px solid #e74c3c; background-color: #fcecec; } /* Red */
        .team-2 { border: 3px solid #3498db; background-color: #ecf3fc; } /* Blue */
        .team-3 { border: 3px solid #2ecc71; background-color: #e9f8ed; } /* Green */
        .team-4 { border: 3px solid #f1c40f; background-color: #fffaf0; } /* Yellow */
        .team-5 { border: 3px solid #9b59b6; background-color: #f6eff9; } /* Purple */
        .team-6 { border: 3px solid #1abc9c; background-color: #e8f7f5; } /* Turquoise */
        .team-7 { border: 3px solid #e67e22; background-color: #fdf5eb; } /* Orange */
        .team-8 { border: 3px solid #34495e; background-color: #eff3f7; } /* Dark Blue */

        h2 {
            margin-top: 0;
            font-size: 1.2em;
        }

        p {
            font-size: 1em;
            font-weight: 500;
            margin: 5px 0;
        }

        span {
            font-weight: bold;
            font-size: 1.1em;
            color: #27ae60;
        }

        button {
            padding: 8px 12px;
            font-size: 0.9em;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            background-color: #f39c12;
            color: white;
            font-weight: bold;
            margin-top: 10px;
            transition: background-color 0.2s;
            width: 100%;
        }

        button:hover:not(:disabled) {
            background-color: #e67e22;
        }

        button:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
        }

        .message {
            margin-top: 25px;
            padding: 15px;
            background-color: #ecf0f1;
            border: 1px solid #bdc3c7;
            border-radius: 8px;
            font-weight: bold;
            color: #333;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>‚öîÔ∏è Tr·∫≠n Chi·∫øn C√¥ng Th√†nh 8 ƒê·ªôi ‚öîÔ∏è</h1>
        <div id="team-status-container" class="team-status">
            </div>

        <div id="message" class="message">Tr·∫≠n chi·∫øn 8 ƒë·ªôi b·∫Øt ƒë·∫ßu! Qu√¢n s·ªë l√† 0 v√† s·∫Ω ƒë∆∞·ª£c s·∫£n xu·∫•t theo th·ªùi gian.</div>
    </div>

    <script>
        // JavaScript
        // --- C·∫•u h√¨nh Game ---
        const NUM_TEAMS = 8;
        const INITIAL_ARMY = 0; // Qu√¢n kh·ªüi ƒë·∫ßu l√† 0
        const PRODUCTION_RATE = 5; // S·ªë qu√¢n s·∫£n xu·∫•t m·ªói gi√¢y
        const ATTACK_COST = 50; // Qu√¢n c·∫ßn ƒë·ªÉ ph√°t ƒë·ªông t·∫•n c√¥ng
        const ATTACK_POWER = 60; // Qu√¢n b·ªã ti√™u di·ªát khi t·∫•n c√¥ng th√†nh c√¥ng

        let teams = {};
        let teamNames = ["RED", "BLUE", "GREEN", "YELLOW", "PURPLE", "TURQUOISE", "ORANGE", "DARK"];
        let gameRunning = true;

        /**
         * Kh·ªüi t·∫°o d·ªØ li·ªáu cho 8 ƒë·ªôi.
         */
        function initializeTeams() {
            for (let i = 1; i <= NUM_TEAMS; i++) {
                teams[i] = {
                    army: INITIAL_ARMY,
                    production: PRODUCTION_RATE,
                    name: `ƒê·ªôi ${i} (${teamNames[i-1]})`,
                    armyId: `army${i}`,
                    prodId: `production${i}`
                };
            }
        }

        /**
         * T·∫°o v√† ch√®n HTML cho t·∫•t c·∫£ c√°c ƒë·ªôi.
         */
        function createTeamHTML() {
            const container = document.getElementById('team-status-container');
            let html = '';

            for (let i = 1; i <= NUM_TEAMS; i++) {
                html += `
                    <div id="team${i}-info" class="team team-${i}">
                        <h2>${teams[i].name}</h2>
                        <p>Qu√¢n hi·ªán t·∫°i: <span id="${teams[i].armyId}">${teams[i].army}</span></p>
                        <p>Qu√¢n s·∫£n xu·∫•t/s: <span id="${teams[i].prodId}">${teams[i].production}</span></p>
                        <select id="target-select-${i}" class="target-select">
                            ${getTargetOptions(i)}
                        </select>
                        <button onclick="attack(${i})" id="btn-attack-${i}">T·∫•n C√¥ng</button>
                    </div>
                `;
            }
            container.innerHTML = html;
        }

        /**
         * T·∫°o c√°c t√πy ch·ªçn t·∫•n c√¥ng cho m·ªôt ƒë·ªôi.
         */
        function getTargetOptions(attackerId) {
            let options = '<option value="">Ch·ªçn M·ª•c Ti√™u</option>';
            for (let i = 1; i <= NUM_TEAMS; i++) {
                if (i !== attackerId) {
                    options += `<option value="${i}">T·∫•n C√¥ng ƒê·ªôi ${i}</option>`;
                }
            }
            return options;
        }


        /**
         * C·∫≠p nh·∫≠t giao di·ªán v·ªõi s·ªë qu√¢n m·ªõi nh·∫•t.
         */
        function updateUI() {
            for (const teamId in teams) {
                document.getElementById(teams[teamId].armyId).textContent = Math.floor(Math.max(0, teams[teamId].army));
                // V√¥ hi·ªáu h√≥a/k√≠ch ho·∫°t n√∫t t·∫•n c√¥ng
                const btn = document.getElementById(`btn-attack-${teamId}`);
                if (teams[teamId].army < ATTACK_COST || !gameRunning) {
                    btn.disabled = true;
                } else {
                    btn.disabled = false;
                }
            }
        }

        /**
         * S·∫£n xu·∫•t qu√¢n m·ªói gi√¢y.
         */
        function produceArmy() {
            if (!gameRunning) return;

            for (const teamId in teams) {
                // Ch·ªâ s·∫£n xu·∫•t n·∫øu ƒë·ªôi ƒë√≥ ch∆∞a b·ªã ti√™u di·ªát
                if (teams[teamId].army > 0 || teams[teamId].army === INITIAL_ARMY) {
                    teams[teamId].army += teams[teamId].production;
                }
            }
            updateUI();
        }

        /**
         * H√†m x·ª≠ l√Ω t·∫•n c√¥ng.
         * @param {number} attackerId - ID c·ªßa ƒë·ªôi t·∫•n c√¥ng.
         */
        function attack(attackerId) {
            if (!gameRunning) return;

            const targetSelect = document.getElementById(`target-select-${attackerId}`);
            const targetId = parseInt(targetSelect.value);

            if (!targetId) {
                document.getElementById('message').textContent = `‚ö†Ô∏è ƒê·ªôi ${attackerId}: Vui l√≤ng ch·ªçn m·ª•c ti√™u t·∫•n c√¥ng!`;
                return;
            }

            const attacker = teams[attackerId];
            const target = teams[targetId];
            const messageEl = document.getElementById('message');

            if (attacker.army >= ATTACK_COST) {
                // 1. Tr·ª´ qu√¢n ph√≠ t·ªïn cho ƒë·ªôi t·∫•n c√¥ng
                attacker.army -= ATTACK_COST;

                // 2. M√¥ ph·ªèng tr·∫≠n chi·∫øn: ƒë·ªôi b·ªã t·∫•n c√¥ng m·∫•t qu√¢n
                target.army -= ATTACK_POWER;

                messageEl.className = 'message';
                messageEl.textContent = `üí• ${attacker.name} ƒë√£ d√πng ${ATTACK_COST} qu√¢n t·∫•n c√¥ng ${target.name}. ${target.name} m·∫•t ${ATTACK_POWER} qu√¢n!`;

                // 3. Ki·ªÉm tra ƒëi·ªÅu ki·ªán th·∫Øng/thua
                if (target.army <= 0) {
                    target.army = 0;
                    
                    // V√¥ hi·ªáu h√≥a ƒë·ªôi b·ªã ti√™u di·ªát
                    document.getElementById(`team${targetId}-info`).style.opacity = 0.5;
                    document.getElementById(`team${targetId}-info`).innerHTML += '<div style="color: red; font-weight: bold; margin-top: 10px;">(ƒê√É B·ªä TI√äU DI·ªÜT)</div>';

                    messageEl.textContent = `üéâ ${attacker.name} ƒë√£ ti√™u di·ªát ${target.name}! üéâ`;

                    checkGameOver();
                }

            } else {
                messageEl.textContent = `‚ö†Ô∏è ${attacker.name}: Kh√¥ng ƒë·ªß qu√¢n (${Math.floor(attacker.army)}) ƒë·ªÉ t·∫•n c√¥ng. C·∫ßn ${ATTACK_COST} qu√¢n.`;
            }

            updateUI();
        }

        /**
         * Ki·ªÉm tra ƒëi·ªÅu ki·ªán k·∫øt th√∫c game (Ch·ªâ c√≤n 1 ƒë·ªôi).
         */
        function checkGameOver() {
            let activeTeams = 0;
            let winnerId = null;

            for (const id in teams) {
                if (teams[id].army > 0) {
                    activeTeams++;
                    winnerId = id;
                }
            }

            if (activeTeams <= 1) {
                gameRunning = false;
                clearInterval(gameInterval); // D·ª´ng game
                const messageEl = document.getElementById('message');

                if (winnerId) {
                    messageEl.className = 'message team-3'; // M√†u xanh l√°
                    messageEl.textContent = `üëë TR·∫¨N CHI·∫æN K·∫æT TH√öC! ${teams[winnerId].name} l√† ng∆∞·ªùi chi·∫øn th·∫Øng cu·ªëi c√πng! üëë`;
                } else {
                    messageEl.textContent = `Tr·∫≠n chi·∫øn k·∫øt th√∫c trong h√≤a b√¨nh (ho·∫∑c c·∫£ 8 ƒë·ªôi ƒë·ªÅu b·ªã ti√™u di·ªát!)`;
                }
            }
        }


        // --- Kh·ªüi ƒë·ªông Game ---
        initializeTeams();
        createTeamHTML();
        
        // Thi·∫øt l·∫≠p chu k·ª≥ s·∫£n xu·∫•t qu√¢n m·ªói 1000ms (1 gi√¢y)
        const gameInterval = setInterval(produceArmy, 1000);

        // Kh·ªüi t·∫°o giao di·ªán
        updateUI();
    </script>
</body>
</html>
